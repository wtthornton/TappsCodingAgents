id: prompt-enhancement
name: Prompt Enhancement Workflow
type: utility
version: "1.0.0"
description: "Enhances simple prompts through all TappsCodingAgents capabilities"

steps:
  - id: analyze
    agent: analyst
    action: analyze-prompt
    notes: "Analyze prompt intent, scope, and domains"
    creates: ["prompt_metadata"]
    next: enrich-requirements
  
  - id: enrich-requirements
    agent: analyst
    action: gather-requirements
    notes: "Gather functional and non-functional requirements"
    consults: ["expert-*"]  # Consult all relevant experts
    requires: ["prompt_metadata"]
    creates: ["requirements"]
    next: architecture-guidance
  
  - id: architecture-guidance
    agent: architect
    action: design-system
    notes: "Provide architecture guidance and design patterns"
    context_tier: TIER2
    requires: ["requirements"]
    creates: ["architecture"]
    next: codebase-context
  
  - id: codebase-context
    agent: orchestrator
    action: inject-context
    notes: "Inject codebase context and related files"
    requires: ["prompt_metadata"]
    creates: ["codebase_context"]
    next: quality-standards
  
  - id: quality-standards
    agent: reviewer
    action: define-standards
    notes: "Define quality gates and standards"
    requires: ["requirements", "architecture"]
    creates: ["quality_gates"]
    next: implementation-plan
  
  - id: implementation-plan
    agent: planner
    action: create-tasks
    notes: "Create implementation task breakdown"
    requires: ["requirements", "architecture"]
    creates: ["implementation_plan"]
    next: synthesize
  
  - id: synthesize
    agent: documenter
    action: synthesize-prompt
    notes: "Synthesize final enhanced prompt"
    requires: ["prompt_metadata", "requirements", "architecture", 
               "codebase_context", "quality_gates", "implementation_plan"]
    creates: ["enhanced_prompt"]
    condition: required

