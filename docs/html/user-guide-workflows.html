<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflows - TappsCodingAgents</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>ü§ñ TappsCodingAgents</h1>
                <span class="version">v2.0.5</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="user-guide-index.html" class="active">User Guide</a></li>
                <li><a href="technical-spec.html">Technical Spec</a></li>
                <li><a href="examples.html">Examples</a></li>
                <li><a href="api-reference.html">API Reference</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-content">
            <nav style="margin-bottom: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                <a href="user-guide-index.html">‚Üê Back to User Guide</a>
            </nav>

            <h1>Workflows</h1>
            <p class="lead">Workflows are the primary way to use TappsCodingAgents. They orchestrate multiple agents in sequence to complete complex development tasks. Most of your development work will use workflows rather than individual agents.</p>

            <div class="alert alert-info" style="margin: 2rem 0;">
                <strong>Workflow-First Approach:</strong> Workflows provide better coordination, artifact tracking, and quality gates than running agents individually. Use workflows for 90% of your development tasks.
            </div>

            <section id="workflow-overview">
                <h2>Workflow Overview</h2>
                
                <h3>What are Workflows?</h3>
                <p>Workflows are YAML-defined multi-step processes that:</p>
                <ul>
                    <li><strong>Orchestrate multiple agents</strong> in a logical sequence</li>
                    <li><strong>Manage dependencies</strong> between steps</li>
                    <li><strong>Enforce quality gates</strong> with automatic scoring</li>
                    <li><strong>Track artifacts</strong> created at each stage</li>
                    <li><strong>Support conditional logic</strong> for branching workflows</li>
                    <li><strong>Provide context tiers</strong> for efficient token usage</li>
                </ul>

                <h3>Running Workflows</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>Basic Workflow Commands</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code># List all available workflow presets
tapps-agents workflow list

# Run workflow presets (short aliases)
tapps-agents workflow full
tapps-agents workflow rapid
tapps-agents workflow quality
tapps-agents workflow fix
tapps-agents workflow hotfix

# Voice-friendly aliases (same as above)
tapps-agents workflow enterprise  # same as "full"
tapps-agents workflow feature      # same as "rapid"
tapps-agents workflow refactor     # same as "fix"
tapps-agents workflow improve      # same as "quality"
tapps-agents workflow urgent       # same as "hotfix"</code></pre>
                </div>
            </section>

            <section id="workflow-arguments">
                <h2>Workflow Command Arguments</h2>
                <p>All workflow presets support common arguments that control execution behavior and provide context to agents.</p>

                <h3>Common Arguments</h3>
                <p>These arguments apply to all workflow presets:</p>

                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4>--prompt, -p</h4>
                    <p><strong>Type:</strong> String (optional)</p>
                    <p><strong>Description:</strong> User prompt or description for the project/task. This provides context to agents about what you want to accomplish.</p>
                    <p><strong>Use Cases:</strong></p>
                    <ul>
                        <li>Greenfield projects: Describe what you want to build</li>
                        <li>Feature development: Describe the feature to implement</li>
                        <li>Refactoring: Describe what needs to be improved</li>
                        <li>Bug fixes: Describe the issue to fix</li>
                    </ul>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Examples</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Create a new project with description
tapps-agents workflow full --prompt "Build a task management web app with user authentication"

# Rapid feature development
tapps-agents workflow rapid --prompt "Add user profile page with avatar upload"

# Refactor existing code
tapps-agents workflow refactor --prompt "Review and fix large classes over 1000 lines"

# Fix a specific bug
tapps-agents workflow hotfix --prompt "Fix authentication token expiration issue"

# Using short form
tapps-agents workflow quality -p "Improve code quality in src/api/ directory"</code></pre>
                    </div>
                </div>

                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4>--file</h4>
                    <p><strong>Type:</strong> File path (optional)</p>
                    <p><strong>Description:</strong> Optional target file for workflows. Specifies which file or directory the workflow should focus on.</p>
                    <p><strong>Default Behavior:</strong> For <code>hotfix</code> workflow, defaults to <code>example_bug.py</code> if present in project root.</p>
                    <p><strong>Use Cases:</strong></p>
                    <ul>
                        <li>Focus workflow on a specific file</li>
                        <li>Target a directory for bulk operations</li>
                        <li>Override default file selection</li>
                    </ul>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Examples</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Review and improve a specific file
tapps-agents workflow quality --file src/api/auth.py

# Fix a specific file
tapps-agents workflow hotfix --file src/utils/validator.py

# Work on entire directory
tapps-agents workflow refactor --file src/api/

# Combine with prompt
tapps-agents workflow quality --file src/api/ --prompt "Improve error handling and add type hints"</code></pre>
                    </div>
                </div>

                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4>--auto</h4>
                    <p><strong>Type:</strong> Flag (optional)</p>
                    <p><strong>Description:</strong> Enable auto mode for fully automated execution. No prompts or manual confirmations required.</p>
                    <p><strong>Behavior:</strong></p>
                    <ul>
                        <li>Workflow runs without user interaction</li>
                        <li>All steps execute automatically</li>
                        <li>Quality gates are enforced automatically</li>
                        <li>Perfect for CI/CD and background execution</li>
                    </ul>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Examples</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Fully automated workflow execution
tapps-agents workflow full --auto --prompt "Build REST API for user management"

# Automated quality improvement
tapps-agents workflow quality --auto --file src/

# Automated hotfix (no prompts)
tapps-agents workflow hotfix --auto --file src/api/auth.py</code></pre>
                    </div>
                </div>

                <h3>Combining Arguments</h3>
                <p>You can combine multiple arguments for precise control:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span>Combined Arguments Examples</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code># Full automation with prompt and target file
tapps-agents workflow refactor --auto --prompt "Refactor authentication module" --file src/auth/

# Rapid development with description
tapps-agents workflow rapid --prompt "Add payment processing with Stripe" --auto

# Quality improvement on specific directory
tapps-agents workflow quality --file src/api/ --prompt "Improve code quality and add tests" --auto

# Enterprise workflow with full context
tapps-agents workflow enterprise --prompt "Build e-commerce platform with user auth, product catalog, and checkout" --auto</code></pre>
                </div>

                <h3>Create Command (Shortcut)</h3>
                <p>The <code>create</code> command is a shortcut for creating new projects. It's equivalent to <code>workflow full --auto --prompt</code>:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span>Create Command</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code># Create a new project (positional prompt argument)
tapps-agents create "Build a task management web application"

# Specify workflow preset
tapps-agents create "Add user authentication" --workflow rapid

# Available workflow choices: full, rapid, enterprise, feature
tapps-agents create "Create REST API" --workflow feature</code></pre>
                </div>
                <p><strong>Note:</strong> The <code>create</code> command automatically enables <code>--auto</code> mode and executes the workflow fully automated.</p>
            </section>

            <section id="workflow-full-sdlc">
                <h2>Full SDLC Pipeline</h2>
                
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--primary); margin: 1.5rem 0;">
                    <p><strong>Best for:</strong> Enterprise projects, new applications, compliance-heavy systems, greenfield development</p>
                    <p><strong>Commands:</strong></p>
                    <ul>
                        <li><code>tapps-agents workflow full</code> - Basic execution</li>
                        <li><code>tapps-agents workflow enterprise</code> - Alias for "full"</li>
                        <li><code>tapps-agents workflow full --prompt "Your project description"</code> - With user prompt</li>
                        <li><code>tapps-agents workflow full --auto --prompt "Your project description"</code> - Fully automated</li>
                    </ul>
                    <p><strong>Duration:</strong> Typically 15-30 minutes depending on project complexity</p>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Example Usage</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Create a complete enterprise application
tapps-agents workflow full --prompt "Build a task management web app with user authentication, task CRUD operations, team collaboration, and real-time notifications" --auto

# Or use the create shortcut
tapps-agents create "Build a task management web app with user authentication, task CRUD operations, team collaboration, and real-time notifications"</code></pre>
                    </div>
                </div>

                <h3>Workflow Stages</h3>
                <p>The Full SDLC Pipeline consists of 10 stages, each calling a specific agent with a clear purpose:</p>

                <div style="margin: 2rem 0;">
                    <h4>Stage 1: Requirements Gathering</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Analyst</p>
                        <p><strong>Action:</strong> gather_requirements</p>
                        <p><strong>Context Tier:</strong> Tier 1 (Core context - ~500 tokens)</p>
                        <p><strong>Why:</strong> Analyzes user input and project context to extract functional and non-functional requirements. This stage establishes the foundation for all subsequent work.</p>
                        <p><strong>Creates:</strong> <code>requirements.md</code></p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Analyst Prompt</span>
                            </div>
                            <pre><code>You are an Analyst agent. Analyze the following project request and extract comprehensive requirements.

User Request: "Build a task management web application with user authentication"

Project Context:
- Type: Web Application
- Stack: Python, FastAPI, React
- Deployment: Cloud (AWS)
- Security Level: High

Tasks:
1. Identify functional requirements
2. Identify non-functional requirements
3. Extract compliance needs (GDPR, security)
4. Define success criteria
5. Identify risks and constraints

Output a structured requirements document in requirements.md</code></pre>
                        </div>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>requirements.md (Example)</span>
                            </div>
                            <pre><code># Requirements: Task Management Web Application

## Functional Requirements

### FR1: User Authentication
- Users can register with email/password
- Users can log in securely
- Password reset functionality
- Session management

### FR2: Task Management
- Create, read, update, delete tasks
- Assign tasks to users
- Set due dates and priorities
- Task status tracking (todo, in-progress, done)

### FR3: User Interface
- Responsive web interface
- Real-time updates
- Task filtering and search

## Non-Functional Requirements

### NFR1: Security
- Encryption at rest and in transit
- OAuth 2.0 / JWT authentication
- Rate limiting
- Input validation

### NFR2: Performance
- API response time < 200ms
- Support 1000+ concurrent users
- Database query optimization

### NFR3: Compliance
- GDPR compliance
- Audit logging
- Data retention policies</code></pre>
                        </div>
                    </div>

                    <h4>Stage 2: Story Planning</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Planner</p>
                        <p><strong>Action:</strong> create_stories</p>
                        <p><strong>Context Tier:</strong> Tier 1</p>
                        <p><strong>Why:</strong> Breaks down requirements into actionable user stories with acceptance criteria. Enables iterative development and clear deliverables.</p>
                        <p><strong>Requires:</strong> <code>requirements.md</code></p>
                        <p><strong>Creates:</strong> <code>stories/</code> directory with story files</p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Planner Prompt</span>
                            </div>
                            <pre><code>You are a Planner agent. Create user stories from the requirements document.

Input: requirements.md (from previous stage)

Tasks:
1. Break down requirements into user stories
2. Define acceptance criteria for each story
3. Estimate story points
4. Prioritize stories
5. Identify dependencies between stories

Create story files in stories/ directory, one file per epic.</code></pre>
                        </div>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>stories/authentication-epic.md (Example)</span>
                            </div>
                            <pre><code># Authentication Epic

## Story 1: User Registration
**As a** new user  
**I want to** create an account  
**So that** I can access the application

**Acceptance Criteria:**
- User can register with email and password
- Email validation is performed
- Password meets security requirements (min 8 chars, special chars)
- Confirmation email is sent
- Duplicate email registration is prevented

**Story Points:** 5  
**Priority:** High  
**Dependencies:** None

## Story 2: User Login
**As a** registered user  
**I want to** log in securely  
**So that** I can access my tasks

**Acceptance Criteria:**
- User can log in with email/password
- Failed login attempts are rate-limited
- JWT token is issued on successful login
- Session timeout after 24 hours

**Story Points:** 3  
**Priority:** High  
**Dependencies:** Story 1</code></pre>
                        </div>
                    </div>

                    <h4>Stage 3: System Design</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Architect</p>
                        <p><strong>Action:</strong> design_system</p>
                        <p><strong>Context Tier:</strong> Tier 2 (Extended context - ~2000 tokens)</p>
                        <p><strong>Why:</strong> Designs the overall system architecture, including component structure, data flow, and technology choices. Ensures scalability and maintainability.</p>
                        <p><strong>Requires:</strong> <code>requirements.md</code>, <code>stories/</code></p>
                        <p><strong>Creates:</strong> <code>architecture.md</code></p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Architect Prompt</span>
                            </div>
                            <pre><code>You are an Architect agent. Design the system architecture based on requirements and stories.

Input:
- requirements.md
- stories/ directory

Project Profile:
- Deployment: Cloud (AWS)
- Security Level: High
- Scale: Enterprise (10000+ users)

Tasks:
1. Design system architecture
2. Define component boundaries
3. Choose technology stack
4. Design data models
5. Define API structure
6. Plan for scalability and security

Output architecture.md with diagrams (ASCII/Mermaid) and detailed design.</code></pre>
                        </div>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>architecture.md (Example Excerpt)</span>
                            </div>
                            <pre><code># System Architecture

## Overview
Three-tier architecture: Frontend (React), Backend (FastAPI), Database (PostgreSQL)

## Component Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   React     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   FastAPI    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ PostgreSQL  ‚îÇ
‚îÇ  Frontend   ‚îÇ      ‚îÇ   Backend    ‚îÇ      ‚îÇ  Database   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ             ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ  Redis  ‚îÇ   ‚îÇ  S3    ‚îÇ
                ‚îÇ  Cache  ‚îÇ   ‚îÇ Storage‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Data Models

### User Model
- id: UUID (primary key)
- email: String (unique, indexed)
- password_hash: String (bcrypt)
- created_at: Timestamp
- last_login: Timestamp

### Task Model
- id: UUID (primary key)
- user_id: UUID (foreign key)
- title: String
- description: Text
- status: Enum (todo, in_progress, done)
- priority: Enum (low, medium, high)
- due_date: Timestamp
- created_at: Timestamp</code></pre>
                        </div>
                    </div>

                    <h4>Stage 4: API Design</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Designer</p>
                        <p><strong>Action:</strong> api_design</p>
                        <p><strong>Context Tier:</strong> Tier 2</p>
                        <p><strong>Why:</strong> Designs RESTful API contracts, request/response schemas, and API documentation. Ensures consistent API design across the application.</p>
                        <p><strong>Requires:</strong> <code>architecture.md</code></p>
                        <p><strong>Creates:</strong> <code>api-specs/</code> directory</p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Designer Prompt</span>
                            </div>
                            <pre><code>You are a Designer agent. Create API specifications based on the architecture.

Input: architecture.md

Tasks:
1. Design RESTful API endpoints
2. Define request/response schemas
3. Specify authentication requirements
4. Document error responses
5. Create OpenAPI/Swagger specification

Output API specs in api-specs/ directory.</code></pre>
                        </div>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>api-specs/tasks-api.yaml (Example)</span>
                            </div>
                            <pre><code># Tasks API Specification

## POST /api/v1/tasks
Create a new task

**Request:**
```json
{
  "title": "Complete project documentation",
  "description": "Write comprehensive docs",
  "priority": "high",
  "due_date": "2026-02-01T00:00:00Z"
}
```

**Response (201):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "Complete project documentation",
  "status": "todo",
  "created_at": "2026-01-15T10:30:00Z"
}
```

## GET /api/v1/tasks
List all tasks for authenticated user

**Query Parameters:**
- status: filter by status (optional)
- priority: filter by priority (optional)
- limit: pagination limit (default: 20)
- offset: pagination offset (default: 0)

**Response (200):**
```json
{
  "tasks": [...],
  "total": 42,
  "limit": 20,
  "offset": 0
}
```</code></pre>
                        </div>
                    </div>

                    <h4>Stage 5: Implementation</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Implementer</p>
                        <p><strong>Action:</strong> write_code</p>
                        <p><strong>Context Tier:</strong> Tier 3 (Full context - ~10000 tokens)</p>
                        <p><strong>Why:</strong> Implements the actual code based on architecture, API specs, and stories. This is where the actual application code is generated.</p>
                        <p><strong>Requires:</strong> <code>architecture.md</code>, <code>api-specs/</code>, <code>stories/</code></p>
                        <p><strong>Creates:</strong> <code>src/</code> directory with application code</p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Implementer Prompt</span>
                            </div>
                            <pre><code>You are an Implementer agent. Write production-quality code based on the design documents.

Input:
- architecture.md
- api-specs/ directory
- stories/ directory

Project Context:
- Language: Python 3.13+
- Framework: FastAPI
- Database: PostgreSQL
- Security: High (encryption, JWT, rate limiting)

Tasks:
1. Implement API endpoints according to api-specs
2. Create data models matching architecture
3. Implement authentication and authorization
4. Add input validation and error handling
5. Follow project coding standards
6. Write clean, maintainable code

Create source code in src/ directory with proper structure.</code></pre>
                        </div>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>src/api/tasks.py (Example)</span>
                            </div>
                            <pre><code>from fastapi import APIRouter, Depends, HTTPException, status
from sqlalchemy.orm import Session
from typing import List, Optional
from datetime import datetime

from ..database import get_db
from ..models import Task, User
from ..schemas import TaskCreate, TaskResponse, TaskUpdate
from ..auth import get_current_user

router = APIRouter(prefix="/api/v1/tasks", tags=["tasks"])

@router.post("", response_model=TaskResponse, status_code=status.HTTP_201_CREATED)
async def create_task(
    task_data: TaskCreate,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user)
):
    """Create a new task for the authenticated user."""
    task = Task(
        user_id=current_user.id,
        title=task_data.title,
        description=task_data.description,
        priority=task_data.priority,
        due_date=task_data.due_date,
        status="todo"
    )
    db.add(task)
    db.commit()
    db.refresh(task)
    return TaskResponse.from_orm(task)

@router.get("", response_model=List[TaskResponse])
async def list_tasks(
    status_filter: Optional[str] = None,
    priority_filter: Optional[str] = None,
    limit: int = 20,
    offset: int = 0,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user)
):
    """List all tasks for the authenticated user."""
    query = db.query(Task).filter(Task.user_id == current_user.id)
    
    if status_filter:
        query = query.filter(Task.status == status_filter)
    if priority_filter:
        query = query.filter(Task.priority == priority_filter)
    
    tasks = query.limit(limit).offset(offset).all()
    return [TaskResponse.from_orm(task) for task in tasks]</code></pre>
                        </div>
                    </div>

                    <h4>Stage 6: Code Review</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Reviewer</p>
                        <p><strong>Action:</strong> review_code</p>
                        <p><strong>Context Tier:</strong> Tier 2</p>
                        <p><strong>Why:</strong> Reviews code quality, calculates scores, and provides feedback. This stage includes quality gates that can trigger re-implementation if thresholds aren't met.</p>
                        <p><strong>Requires:</strong> <code>src/</code></p>
                        <p><strong>Quality Gates:</strong></p>
                        <ul>
                            <li>Overall Score: ‚â• 70</li>
                            <li>Security Score: ‚â• 7.0</li>
                            <li>Maintainability Score: ‚â• 7.0</li>
                        </ul>
                        <p><strong>Gate Behavior:</strong> If gates pass ‚Üí proceed to testing. If gates fail ‚Üí loop back to implementation stage.</p>
                        <p><strong>Prompt Example:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>Reviewer Prompt</span>
                            </div>
                            <pre><code>You are a Reviewer agent. Review the code in src/ directory and calculate quality scores.

Tasks:
1. Review code quality (complexity, maintainability)
2. Check security vulnerabilities
3. Verify test coverage
4. Assess performance
5. Calculate scores for each dimension
6. Provide actionable feedback

Quality Gate Thresholds:
- Overall Score: ‚â• 70
- Security Score: ‚â• 7.0
- Maintainability Score: ‚â• 7.0

If thresholds are not met, provide specific recommendations for improvement.</code></pre>
                        </div>
                    </div>

                    <h4>Stage 7: Testing</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Tester</p>
                        <p><strong>Action:</strong> write_tests</p>
                        <p><strong>Context Tier:</strong> Tier 2</p>
                        <p><strong>Why:</strong> Generates comprehensive test suites including unit tests, integration tests, and API tests. Ensures code reliability and maintainability.</p>
                        <p><strong>Requires:</strong> <code>src/</code></p>
                        <p><strong>Creates:</strong> <code>tests/</code> directory</p>
                        <p><strong>Mock Output:</strong></p>
                        <div class="code-block" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span>tests/test_tasks.py (Example)</span>
                            </div>
                            <pre><code>import pytest
from fastapi.testclient import TestClient
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

from ..main import app
from ..database import Base, get_db

# Test database
SQLALCHEMY_DATABASE_URL = "sqlite:///./test.db"
engine = create_engine(SQLALCHEMY_DATABASE_URL, connect_args={"check_same_thread": False})
TestingSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

def override_get_db():
    try:
        db = TestingSessionLocal()
        yield db
    finally:
        db.close()

app.dependency_overrides[get_db] = override_get_db
Base.metadata.create_all(bind=engine)

client = TestClient(app)

def test_create_task():
    """Test creating a new task."""
    response = client.post(
        "/api/v1/tasks",
        json={
            "title": "Test task",
            "description": "Test description",
            "priority": "high"
        },
        headers={"Authorization": "Bearer test_token"}
    )
    assert response.status_code == 201
    assert response.json()["title"] == "Test task"
    assert response.json()["status"] == "todo"</code></pre>
                        </div>
                    </div>

                    <h4>Stage 8: Security Scan</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Ops</p>
                        <p><strong>Action:</strong> security_scan</p>
                        <p><strong>Context Tier:</strong> Tier 1</p>
                        <p><strong>Why:</strong> Performs security vulnerability scanning, dependency checks, and compliance validation. Critical for production-ready code.</p>
                        <p><strong>Requires:</strong> <code>src/</code></p>
                        <p><strong>Checks:</strong></p>
                        <ul>
                            <li>Dependency vulnerabilities (via safety, npm audit)</li>
                            <li>Code security issues (SQL injection, XSS, etc.)</li>
                            <li>Secrets exposure</li>
                            <li>Compliance with security standards</li>
                        </ul>
                    </div>

                    <h4>Stage 9: Documentation</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Documenter</p>
                        <p><strong>Action:</strong> generate_docs</p>
                        <p><strong>Context Tier:</strong> Tier 1</p>
                        <p><strong>Why:</strong> Generates comprehensive documentation including API docs, code documentation, and user guides.</p>
                        <p><strong>Requires:</strong> <code>src/</code></p>
                        <p><strong>Creates:</strong> <code>docs/</code> directory</p>
                    </div>

                    <h4>Stage 10: Finalization</h4>
                    <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>Agent:</strong> Orchestrator</p>
                        <p><strong>Action:</strong> finalize</p>
                        <p><strong>Context Tier:</strong> Tier 1</p>
                        <p><strong>Why:</strong> Finalizes the workflow, creates summary reports, and prepares artifacts for deployment or review.</p>
                    </div>
                </div>

                <h3>Workflow Visualization</h3>
                <div style="background: var(--bg-secondary); padding: 2rem; border-radius: 12px; margin: 2rem 0;">
                    <pre style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; line-height: 1.8;"><code>Requirements ‚Üí Planning ‚Üí Design ‚Üí API Design ‚Üí Implementation
                                                                    ‚Üì
                                                              Code Review
                                                                    ‚Üì
                                                              [Quality Gate]
                                                          Pass / Fail
                                                          ‚Üì      ‚Üì
                                                      Testing  Implementation (retry)
                                                          ‚Üì
                                                      Security Scan
                                                          ‚Üì
                                                      Documentation
                                                          ‚Üì
                                                      Finalization</code></pre>
                </div>
            </section>

            <section id="workflow-rapid-dev">
                <h2>Rapid Development Workflow</h2>
                
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--success); margin: 1.5rem 0;">
                    <p><strong>Best for:</strong> Feature development, sprint work, iterative development, brownfield projects</p>
                    <p><strong>Commands:</strong></p>
                    <ul>
                        <li><code>tapps-agents workflow rapid</code> - Basic execution</li>
                        <li><code>tapps-agents workflow feature</code> - Alias for "rapid"</li>
                        <li><code>tapps-agents workflow rapid --prompt "Add user profile page"</code> - With feature description</li>
                        <li><code>tapps-agents workflow rapid --auto --prompt "Add payment processing"</code> - Fully automated</li>
                    </ul>
                    <p><strong>Duration:</strong> Typically 5-10 minutes</p>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Example Usage</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Add a new feature quickly
tapps-agents workflow rapid --prompt "Add user profile management: users can view and edit their profile, upload avatar images (stored in S3), and update preferences" --auto

# Feature development with specific context
tapps-agents workflow feature --prompt "Add comment system: users can comment on posts, edit/delete their own comments, and reply to other comments"</code></pre>
                    </div>
                </div>

                <h3>Workflow Stages</h3>
                <ol>
                    <li><strong>Enhance Prompt</strong> (Enhancer) - Optional prompt enhancement for better context</li>
                    <li><strong>Create Stories</strong> (Planner) - Quick story breakdown</li>
                    <li><strong>Write Code</strong> (Implementer) - Fast implementation</li>
                    <li><strong>Review Code</strong> (Reviewer) - Quick review with lower thresholds (Overall ‚â• 65, Security ‚â• 6.5)</li>
                    <li><strong>Write Tests</strong> (Tester) - Generate tests</li>
                    <li><strong>Finalize</strong> (Orchestrator) - Complete workflow</li>
                </ol>

                <p><strong>Key Differences from Full SDLC:</strong></p>
                <ul>
                    <li>Skips architecture and API design (assumes existing structure)</li>
                    <li>Lower quality gate thresholds for faster iteration</li>
                    <li>No security scan or documentation stages</li>
                    <li>Optimized for speed over comprehensiveness</li>
                </ul>
            </section>

            <section id="workflow-quality">
                <h2>Quality Improvement Workflow</h2>
                
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--warning); margin: 1.5rem 0;">
                    <p><strong>Best for:</strong> Code quality initiatives, refactoring sprints, quality gates, improving existing codebases</p>
                    <p><strong>Commands:</strong></p>
                    <ul>
                        <li><code>tapps-agents workflow quality</code> - Basic execution</li>
                        <li><code>tapps-agents workflow improve</code> - Alias for "quality"</li>
                        <li><code>tapps-agents workflow quality --file src/api/</code> - Target specific directory</li>
                        <li><code>tapps-agents workflow quality --prompt "Refactor payment module" --file src/payments/</code> - With context</li>
                    </ul>
                    <p><strong>Duration:</strong> Typically 10-20 minutes</p>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Example Usage</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Improve code quality in a specific module
tapps-agents workflow quality --file src/api/ --prompt "Refactor the payment processing module to use dependency injection and improve testability" --auto

# Quality improvement across entire project
tapps-agents workflow improve --prompt "Improve code quality: add type hints, reduce complexity, improve error handling"</code></pre>
                    </div>
                </div>

                <h3>Workflow Stages</h3>
                <ol>
                    <li><strong>Initial Review</strong> (Reviewer) - Comprehensive code review and scoring</li>
                    <li><strong>Improve Code</strong> (Improver) - Refactoring and optimization</li>
                    <li><strong>Re-Review</strong> (Reviewer) - Validation with higher thresholds (Overall ‚â• 75, Maintainability ‚â• 8.0, Security ‚â• 7.5)</li>
                    <li><strong>Write Tests</strong> (Tester) - Update/add tests for improved code</li>
                    <li><strong>Security Scan</strong> (Ops) - Security validation</li>
                    <li><strong>Finalize</strong> (Orchestrator) - Complete workflow</li>
                </ol>

                <p><strong>Key Features:</strong></p>
                <ul>
                    <li>Double-review cycle ensures quality improvements</li>
                    <li>Higher quality thresholds than other workflows</li>
                    <li>Focus on maintainability and code quality</li>
                    <li>Can loop back to improvement stage if gates fail</li>
                </ul>
            </section>

            <section id="workflow-quick-fix">
                <h2>Quick Fix Workflow</h2>
                
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--error); margin: 1.5rem 0;">
                    <p><strong>Best for:</strong> Production bugs, hotfixes, urgent patches, critical issues</p>
                    <p><strong>Commands:</strong></p>
                    <ul>
                        <li><code>tapps-agents workflow hotfix</code> - Basic execution (uses example_bug.py if present)</li>
                        <li><code>tapps-agents workflow urgent</code> - Alias for "hotfix"</li>
                        <li><code>tapps-agents workflow hotfix --file src/api/auth.py</code> - Target specific file</li>
                        <li><code>tapps-agents workflow hotfix --prompt "Fix token expiration bug" --file src/auth.py</code> - With description</li>
                    </ul>
                    <p><strong>Duration:</strong> Typically 3-5 minutes</p>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Example Usage</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Fix a production bug quickly
tapps-agents workflow hotfix --file src/api/auth.py --prompt "Fix the authentication token expiration issue where tokens expire too quickly" --auto

# Urgent fix with minimal description
tapps-agents workflow urgent --file src/utils/validator.py --prompt "Fix validation error causing 500 responses"</code></pre>
                    </div>
                </div>

                <h3>Workflow Stages</h3>
                <ol>
                    <li><strong>Analyze Error</strong> (Debugger) - Error analysis and root cause identification</li>
                    <li><strong>Write Code</strong> (Implementer) - Fix implementation</li>
                    <li><strong>Review Code</strong> (Reviewer) - Quick review with minimal thresholds (Overall ‚â• 60, Security ‚â• 7.0)</li>
                    <li><strong>Write Tests</strong> (Tester) - Regression tests</li>
                    <li><strong>Finalize</strong> (Orchestrator) - Complete workflow</li>
                </ol>

                <p><strong>Key Features:</strong></p>
                <ul>
                    <li>Minimal overhead for fast turnaround</li>
                    <li>Focus on fixing the specific issue</li>
                    <li>Lower quality thresholds (but security still enforced)</li>
                    <li>No documentation or architecture stages</li>
                </ul>
            </section>

            <section id="workflow-maintenance">
                <h2>Maintenance & Bug Fixing Workflow</h2>
                
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--secondary); margin: 1.5rem 0;">
                    <p><strong>Best for:</strong> Existing codebases, bug fixes, refactoring, technical debt, maintenance tasks</p>
                    <p><strong>Commands:</strong></p>
                    <ul>
                        <li><code>tapps-agents workflow fix</code> - Basic execution</li>
                        <li><code>tapps-agents workflow refactor</code> - Alias for "fix"</li>
                        <li><code>tapps-agents workflow fix --file src/api/</code> - Target directory</li>
                        <li><code>tapps-agents workflow refactor --prompt "Review and fix large classes" --file src/</code> - With context</li>
                    </ul>
                    <p><strong>Duration:</strong> Typically 8-15 minutes</p>
                    <div class="code-block" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span>Example Usage</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code># Refactor existing codebase
tapps-agents workflow refactor --prompt "Review and fix large classes over 1000 lines" --file src/ --auto

# Maintenance on specific module
tapps-agents workflow fix --file src/api/auth/ --prompt "Improve error handling and add logging"</code></pre>
                    </div>
                </div>

                <h3>Workflow Stages</h3>
                <ol>
                    <li><strong>Analyze Error</strong> (Debugger) - Optional error analysis</li>
                    <li><strong>Refactor</strong> (Improver) - Code improvement and refactoring</li>
                    <li><strong>Review Code</strong> (Reviewer) - Code review (Overall ‚â• 70, Maintainability ‚â• 7.5)</li>
                    <li><strong>Write Tests</strong> (Tester) - Test updates</li>
                    <li><strong>Update Documentation</strong> (Documenter) - Documentation updates</li>
                    <li><strong>Finalize</strong> (Orchestrator) - Complete workflow</li>
                </ol>

                <p><strong>Key Features:</strong></p>
                <ul>
                    <li>Balanced approach between speed and quality</li>
                    <li>Includes documentation updates</li>
                    <li>Focus on maintainability</li>
                    <li>Good for ongoing maintenance work</li>
                </ul>
            </section>

            <section id="workflow-comparison">
                <h2>Workflow Comparison</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>Workflow</th>
                            <th>Aliases</th>
                            <th>Best For</th>
                            <th>Stages</th>
                            <th>Quality Gates</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Full SDLC</strong></td>
                            <td><code>enterprise</code></td>
                            <td>Enterprise, new apps, compliance</td>
                            <td>10 stages</td>
                            <td>Overall ‚â• 70, Security ‚â• 7.0</td>
                            <td>15-30 min</td>
                        </tr>
                        <tr>
                            <td><strong>Rapid Dev</strong></td>
                            <td><code>feature</code></td>
                            <td>Features, sprints, iteration</td>
                            <td>5 stages</td>
                            <td>Overall ‚â• 65, Security ‚â• 6.5</td>
                            <td>5-10 min</td>
                        </tr>
                        <tr>
                            <td><strong>Quality</strong></td>
                            <td><code>improve</code></td>
                            <td>Quality initiatives, refactoring</td>
                            <td>5 stages</td>
                            <td>Overall ‚â• 75, Maintainability ‚â• 8.0</td>
                            <td>10-20 min</td>
                        </tr>
                        <tr>
                            <td><strong>Quick Fix</strong></td>
                            <td><code>urgent</code></td>
                            <td>Production bugs, hotfixes</td>
                            <td>4 stages</td>
                            <td>Overall ‚â• 60, Security ‚â• 7.0</td>
                            <td>3-5 min</td>
                        </tr>
                        <tr>
                            <td><strong>Maintenance</strong></td>
                            <td><code>fix</code>, <code>refactor</code></td>
                            <td>Existing code, technical debt</td>
                            <td>5 stages</td>
                            <td>Overall ‚â• 70, Maintainability ‚â• 7.5</td>
                            <td>8-15 min</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="workflow-quick-reference">
                <h2>Quick Reference: Command Arguments</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>Argument</th>
                            <th>Short Form</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>--prompt</code></td>
                            <td><code>-p</code></td>
                            <td>String</td>
                            <td>User description/prompt for the task</td>
                            <td><code>--prompt "Add user authentication"</code></td>
                        </tr>
                        <tr>
                            <td><code>--file</code></td>
                            <td>-</td>
                            <td>File path</td>
                            <td>Target file or directory</td>
                            <td><code>--file src/api/auth.py</code></td>
                        </tr>
                        <tr>
                            <td><code>--auto</code></td>
                            <td>-</td>
                            <td>Flag</td>
                            <td>Enable fully automated execution</td>
                            <td><code>--auto</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Common Command Patterns</h3>
                <div class="code-block" style="margin-top: 1rem;">
                    <div class="code-header">
                        <span>Command Patterns</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code># Basic workflow execution
tapps-agents workflow [preset]

# With user prompt
tapps-agents workflow [preset] --prompt "Your description"

# With target file
tapps-agents workflow [preset] --file path/to/file.py

# Fully automated
tapps-agents workflow [preset] --auto --prompt "Your description"

# Combined: prompt + file + auto
tapps-agents workflow [preset] --prompt "Description" --file path/ --auto

# Create shortcut (auto-enabled)
tapps-agents create "Your description" [--workflow preset]</code></pre>
                </div>

                <h3>Available Presets</h3>
                <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <p><strong>Primary Presets:</strong></p>
                    <ul>
                        <li><code>full</code> / <code>enterprise</code> - Full SDLC Pipeline</li>
                        <li><code>rapid</code> / <code>feature</code> - Rapid Development</li>
                        <li><code>fix</code> / <code>refactor</code> - Maintenance & Bug Fixing</li>
                        <li><code>quality</code> / <code>improve</code> - Quality Improvement</li>
                        <li><code>hotfix</code> / <code>urgent</code> - Quick Fix</li>
                        <li><code>list</code> - List all available presets</li>
                    </ul>
                </div>
            </section>

            <section id="custom-workflows">
                <h2>Custom Workflows</h2>
                
                <p>You can create custom workflows by defining YAML files. See the <a href="user-guide-advanced.html">Advanced Topics</a> guide for detailed information on creating custom workflows.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span>Custom Workflow Example</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>workflow:
  id: my-custom-workflow
  name: "My Custom Workflow"
  description: "Custom workflow for specific needs"
  
  steps:
    - id: step1
      agent: planner
      action: create_stories
      context_tier: 1
      creates:
        - stories/
      next: step2
      
    - id: step2
      agent: implementer
      action: write_code
      context_tier: 3
      requires:
        - stories/
      creates:
        - src/
      next: complete
        
    - id: complete
      agent: orchestrator
      action: finalize
      context_tier: 1</code></pre>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 TappsCodingAgents. MIT License.</p>
            <p>Version 2.0.5 | Last Updated: January 2026</p>
        </div>
    </footer>

    <script>
        function copyCode(btn) {
            const codeBlock = btn.parentElement.nextElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = 'Copy';
                }, 2000);
            });
        }
    </script>
</body>
</html>

