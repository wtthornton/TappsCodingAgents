# Story 16.2: Custom Skill Loader

<!-- Source: implementation/EPIC_16_Custom_Skills_Support.md -->

## Status

**Draft**

## Story

**As a** framework user,
**I want** custom Skills to be automatically discovered and loaded alongside built-in Skills,
**so that** my custom Skills work seamlessly with framework features.

## Acceptance Criteria

1. Custom Skill loader discovers Skills in user directory
2. Skill discovery finds all custom Skills in `.claude/skills/`
3. Skill registration registers custom Skills with framework
4. Skill priority system handles custom vs built-in Skills correctly
5. Custom Skills load and are available alongside built-in Skills

## Tasks / Subtasks

- [ ] Task 1: Implement custom Skill discovery (AC: 1, 2)
  - [ ] Create function to scan `.claude/skills/` directory
  - [ ] Identify custom Skills (not in built-in list)
  - [ ] Parse Skill metadata from SKILL.md files
  - [ ] Return list of discovered Skills

- [ ] Task 2: Create Skill registration system (AC: 3)
  - [ ] Create Skill registry to track loaded Skills
  - [ ] Register custom Skills with metadata
  - [ ] Store Skill location and configuration
  - [ ] Provide lookup methods for Skills

- [ ] Task 3: Implement Skill priority system (AC: 4)
  - [ ] Define priority rules (custom vs built-in)
  - [ ] Handle name conflicts between custom and built-in Skills
  - [ ] Implement priority resolution logic
  - [ ] Add configuration for priority override

- [ ] Task 4: Integrate loader with framework (AC: 5)
  - [ ] Load custom Skills during framework initialization
  - [ ] Make custom Skills available to agents
  - [ ] Ensure custom Skills work with existing features
  - [ ] Add error handling for invalid Skills

## Dev Notes

### Existing System Context

- Built-in Skills loaded from `tapps_agents/resources/claude/skills/`
- Skills copied to `.claude/skills/` during `init`
- `init_claude_skills()` function in `tapps_agents/core/init_project.py`
- Skills are directories with `SKILL.md` files
- Framework initialization in `tapps_agents/core/`

### Integration Approach

- Extend `init_claude_skills()` or create new loader module
- Load custom Skills after built-in Skills
- Create `SkillRegistry` class to manage Skills
- Integrate with framework initialization
- Add namespace separation for custom Skills

### Technical Details

- **Loader Module**: `tapps_agents/core/skill_loader.py` (new)
- **Registry Class**: `SkillRegistry` to track all Skills
- **Discovery**: Scan `.claude/skills/` for directories with `SKILL.md`
- **Priority**: Custom Skills override built-in if same name (or use namespace)
- **Integration Point**: Framework initialization, agent system

### Risk Assessment

- **Primary risk**: Custom Skills may conflict with built-in Skills
  - **Mitigation**: Namespace separation, priority system, conflict detection
- **Primary risk**: Invalid Skills may break framework
  - **Mitigation**: Validation before loading, error handling, skip invalid Skills

### Rollback Plan

- Disable custom Skill loading
- Remove loader module
- Fall back to built-in Skills only

### Testing

- Test discovery of custom Skills
- Test registration and lookup
- Test priority resolution
- Test error handling for invalid Skills
- Test integration with framework

## Change Log

| Date       | Version | Description                     | Author      |
| ---------- | ------- | ------------------------------- | ----------- |
| 2025-01-27 | 0.1     | Initial draft for Epic 16.2     | James       |

## Dev Agent Record

### Completion Notes

_TBD_

### File List

_TBD_

### Change Log

_TBD_

## QA Results

_TBD_

