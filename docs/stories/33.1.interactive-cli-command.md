# Story 33.1: Interactive CLI Command Implementation

<!-- Source: implementation/EPIC_05_Workflow_Recommendation_Engine_Enhancement.md -->

## Status

**Ready for Review**

## Story

**As a** framework user,
**I want** an interactive CLI command for workflow recommendation,
**so that** I can get guided workflow selection with clear explanations and alternatives.

## Acceptance Criteria

1. CLI command `tapps-agents workflow-recommend` is created
2. Interactive mode with prompts is implemented
3. Non-interactive mode (programmatic) is supported
4. Command integrates with existing `WorkflowRecommender` class
5. Command provides helpful output with recommendation details
6. Command handles errors gracefully

## Tasks / Subtasks

- [x] Task 1: Create CLI command (AC: 1)
  - [x] Add `workflow recommend` command to CLI
  - [x] Define command arguments and options
  - [x] Integrate with argparse CLI framework

- [x] Task 2: Implement interactive mode (AC: 2)
  - [x] Add interactive prompts
  - [x] Support user input
  - [x] Handle user responses

- [x] Task 3: Support non-interactive mode (AC: 3)
  - [x] Add `--non-interactive` flag
  - [x] Support programmatic usage
  - [x] Return structured output (JSON format)

- [x] Task 4: Integrate with recommender (AC: 4)
  - [x] Use `WorkflowRecommender` class
  - [x] Call recommendation methods
  - [x] Handle recommender results

- [x] Task 5: Format output (AC: 5)
  - [x] Format recommendation message
  - [x] Show workflow details
  - [x] Display alternatives

- [x] Task 6: Error handling (AC: 6)
  - [x] Handle recommender errors
  - [x] Handle user input errors
  - [x] Provide clear error messages

## Dev Notes

### Existing System Context

- CLI system in `tapps_agents/cli/`
- `WorkflowRecommender` in `tapps_agents/workflow/recommender.py`
- Click framework for CLI
- Existing CLI command patterns

### Integration Approach

- Add command to existing CLI structure
- Use WorkflowRecommender class
- Follow existing CLI patterns
- Support both interactive and non-interactive

### Risk Assessment

- **Primary risk**: Interactive prompts may be too verbose
  - **Mitigation**: Configurable verbosity, clear prompts, non-interactive option

### Rollback Plan

- Remove CLI command
- Programmatic recommender still works
- No breaking changes

### Testing

- Test interactive mode
- Test non-interactive mode
- Test recommender integration
- Test error handling
- Integration tests

## Change Log

| Date       | Version | Description                     | Author      |
| ---------- | ------- | ------------------------------- | ----------- |
| 2025-01-XX | 0.1     | Initial draft for Epic 33.1     | bmad-master |

## Dev Agent Record

**Implementation Complete:**
- Added `workflow recommend` subcommand to CLI parser (`tapps_agents/cli/parsers/top_level.py`)
- Implemented `handle_workflow_recommend_command` function (`tapps_agents/cli/commands/top_level.py`)
- Integrated with existing `WorkflowRecommender` class
- Supports both interactive and non-interactive modes
- JSON and text output formats supported
- Error handling implemented

**Files Modified:**
- `tapps_agents/cli/parsers/top_level.py` - Added recommend subcommand parser
- `tapps_agents/cli/commands/top_level.py` - Added command handler

**Usage:**
```bash
# Interactive mode
tapps-agents workflow recommend

# Non-interactive mode with JSON output
tapps-agents workflow recommend --non-interactive --format json

# With auto-load
tapps-agents workflow recommend --auto-load
```

## QA Results

_TBD_

