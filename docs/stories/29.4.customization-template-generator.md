# Story 29.4: Customization Template Generator

<!-- Source: implementation/EPIC_01_Update_Safe_Agent_Customization_Layer.md -->
<!-- Context: Brownfield enhancement - CLI tool to generate customization templates -->

## Status

**Ready for Review**

## Story

**As a** framework user,
**I want** a CLI command to generate customization file templates,
**so that** I can quickly create customization files with proper structure and helpful examples.

## Acceptance Criteria

1. CLI command `tapps-agents customize init {agent-id}` generates customization file template
2. Generated template includes all format sections with commented examples
3. Template includes common customization patterns as examples
4. Command supports generating templates for all built-in agents
5. Generated files are valid YAML and pass schema validation
6. Command provides helpful output explaining how to use the generated file

## Tasks / Subtasks

- [x] Task 1: Create CLI command (AC: 1)
  - [x] Add `customize init` command to CLI
  - [x] Accept agent-id as argument
  - [x] Generate file at `.tapps-agents/customizations/{agent-id}-custom.yaml`
  - [x] Handle file already exists (prompt or overwrite option)

- [x] Task 2: Create template content (AC: 2, 3)
  - [x] Create template with all sections (persona_overrides, command_overrides, etc.)
  - [x] Add YAML comments explaining each section
  - [x] Include example values for common customizations
  - [x] Add examples of persona overrides, command additions, etc.

- [x] Task 3: Support all built-in agents (AC: 4)
  - [x] List all built-in agents (analyst, architect, implementer, reviewer, tester, etc.)
  - [x] Generate agent-specific templates with relevant examples
  - [x] Handle unknown agent-id gracefully

- [x] Task 4: Ensure template validity (AC: 5)
  - [x] Validate generated template with schema
  - [x] Ensure YAML syntax is correct
  - [x] Test template loads without errors

- [x] Task 5: Add helpful output (AC: 6)
  - [x] Print success message with file location
  - [x] Provide next steps guidance
  - [x] Link to documentation

## Dev Notes

### Existing System Context

- CLI command system exists in `tapps_agents/cli/`
- Built-in agents are defined in `.claude/skills/` and `tapps_agents/agents/`
- Template generation pattern exists in other CLI commands

### Integration Approach

- Add command to existing CLI command structure
- Use template strings or Jinja2 for template generation
- Follow existing CLI command patterns
- Reuse customization schema for validation

### Risk Assessment

- **Primary risk**: Generated templates may be too verbose or too sparse
  - **Mitigation**: Balance examples with clarity, get user feedback
- **Primary risk**: Template may become outdated
  - **Mitigation**: Version templates, update with schema changes

### Rollback Plan

- Remove CLI command
- Templates can be created manually
- No breaking changes

### Testing

- Unit tests for template generation
- Test template validity (schema validation)
- Test CLI command with various agent-ids
- Test file already exists scenario
- Integration test: generate and use template

## Change Log

| Date       | Version | Description                     | Author      |
| ---------- | ------- | ------------------------------- | ----------- |
| 2025-01-XX | 0.1     | Initial draft for Epic 29.4     | bmad-master |

## Dev Agent Record

### Agent Model Used

_TBD_

### Debug Log References

_TBD_

### Completion Notes List

_TBD_

### File List

- `tapps_agents/core/customization_template.py` - Template generator module
- `tapps_agents/cli/parsers/top_level.py` - Added customize command parser
- `tapps_agents/cli/commands/top_level.py` - Added customize command handler
- `tapps_agents/cli/main.py` - Added route for customize command

## QA Results

_TBD_

