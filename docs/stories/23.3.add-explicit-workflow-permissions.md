# Story 23.3: Add explicit workflow permissions

<!-- Source: implementation/cursor/EPIC_23_CI_Gating_And_Workflow_Consolidation.md -->
<!-- Context: Least-privilege GitHub Actions permissions (2025 best practices) -->

```yaml
story_id: 23.3
title: Add explicit workflow permissions
description: Add explicit least-privilege `permissions:` blocks to each CI workflow/job and document/justify any elevated permissions.
epic: EPIC_23_CI_Gating_And_Workflow_Consolidation
domain: CI/CD Security
priority: medium
complexity: 2
status: draft
created_at: 2025-12-16
created_by: planner
```

## Acceptance Criteria

- [ ] Each CI workflow defines minimal `permissions:` (e.g., `contents: read`) required by the actions it uses.
- [ ] Any elevated permissions are justified with inline comments.
- [ ] Fork PRs remain compatible (no required secrets; no privileged write operations in PR context).

## Tasks

1. Enumerate actions used in CI workflows and their permission requirements
   - Checkout, artifact upload, coverage upload, etc.

2. Add workflow-level `permissions:` defaults
   - Default to read-only where possible (e.g., `contents: read`).

3. Add job-level overrides only where necessary
   - If a job requires additional permissions, scope them tightly and document rationale.

4. Validate PR and scheduled behaviors
   - Ensure PR runs do not request unnecessary tokens/permissions.

## Technical Notes

- EPIC_23â€™s least-privilege requirement is specific to GitHub Actions `permissions:` blocks.
- If CI is introduced/reshaped in 23.2, add permissions as part of the canonical workflow design rather than as an afterthought.

## Dependencies

- Related stories: ["23.2"]
- Blocks: []
- Blocked by: ["23.2"]


