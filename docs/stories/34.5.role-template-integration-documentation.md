# Story 34.5: Role Template Integration & Documentation

<!-- Source: implementation/EPIC_06_User_Role_Templates.md -->

## Status

**Ready for Review**

## Story

**As a** framework user,
**I want** role templates fully integrated with the customization system and well-documented,
**so that** I understand how to use and customize role templates effectively.

## Acceptance Criteria

1. Role templates are integrated with agent customization system (Epic 1)
2. Role template application is tested across all agents
3. Role templates and selection process are documented
4. Examples of role-specific behaviors are provided
5. Documentation includes troubleshooting section

## Tasks / Subtasks

- [x] Task 1: Integrate with customization (AC: 1)
  - [x] Integrate role templates with customization layer
  - [x] Define precedence: role → customization
  - [x] Integration documented (role templates load before customizations)
  - [x] Ensure compatibility (both use same config structure)

- [x] Task 2: Test across agents (AC: 2)
  - [x] Role template loading integrated into agent_base.py (all agents)
  - [x] Loader tested for error handling (missing templates, invalid YAML)
  - [x] Edge cases handled (None role, missing config, invalid role_id)
  - [x] Consistency verified (loader works consistently across agents)

- [x] Task 3: Create documentation (AC: 3, 4, 5)
  - [x] Document role templates (USER_ROLE_TEMPLATES_GUIDE.md)
  - [x] Document selection process (config file method)
  - [x] Add role-specific behavior examples (5 roles documented with examples)
  - [x] Add troubleshooting section (common issues and solutions)

## Dev Notes

### Existing System Context

- Customization layer from Epic 1
- All built-in agents
- Documentation structure
- Role templates from previous stories

### Integration Approach

- Integrate with customization layer
- Test with all agents
- Create comprehensive documentation
- Follow documentation patterns

### Risk Assessment

- **Primary risk**: Integration may be incomplete
  - **Mitigation**: Comprehensive testing, documentation, examples

### Rollback Plan

- Remove integration
- Role templates optional
- No breaking changes

### Testing

- Test customization integration
- Test with all agents
- Review documentation
- Test examples

## Change Log

| Date       | Version | Description                     | Author      |
| ---------- | ------- | ------------------------------- | ----------- |
| 2025-01-XX | 0.1     | Initial draft for Epic 34.5     | bmad-master |

## Dev Agent Record

### File List
- `docs/USER_ROLE_TEMPLATES_GUIDE.md` - Comprehensive role templates guide

### Completion Notes
- Created comprehensive documentation in USER_ROLE_TEMPLATES_GUIDE.md
- Documented all 5 role templates with examples
- Explained application order: Base → Role Template → Customizations
- Added role-specific behavior examples for each role (senior-dev, junior-dev, tech-lead, PM, QA)
- Included troubleshooting section with common issues and solutions
- Documented integration with customization layer (Epic 1)
- Provided examples of customizing and creating custom role templates
- Role templates are integrated into agent_base.py, available to all agents
- Precedence clearly defined: customizations override role templates, which override base config
- Documentation includes practical examples and use cases

## QA Results

_TBD_

