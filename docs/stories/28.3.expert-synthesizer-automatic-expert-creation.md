# Story 28.3: Expert Synthesizer (Automatic Expert Creation)

<!-- Source: docs/prd/epic-2-dynamic-expert-rag-engine.md -->
<!-- Context: Dynamic Expert & RAG Engine - Expert Creation -->

## Status

**In Progress** - Core Implementation Complete

**Last Updated:** 2025-01-XX

**Implementation Notes:**
- Expert Synthesizer implemented (`tapps_agents/experts/expert_synthesizer.py`)
- Automatic expert config generation from repo signals implemented
- Knowledge skeleton generator implemented (overview.md, glossary.md, decisions.md, pitfalls.md, constraints.md)
- Technical vs project expert detection implemented
- Signal-based expert creation implemented (uses DomainStackDetector)
- Expert config YAML generation implemented
- Integration with existing expert config format complete
- Basic tests created (`tests/unit/test_expert_synthesizer.py`)
- Ready for integration with Expert Engine (Story 28.1)

## Story

**As a** Expert Engine,
**I want** an Expert Synthesizer that automatically creates project-specific experts from repo signals,
**so that** experts are available for the current project without manual configuration or setup wizards.

## Acceptance Criteria

1. Automatic creation of config-only experts (`.tapps-agents/experts.yaml`) implemented
2. Knowledge skeleton generator created (`.tapps-agents/knowledge/<domain>/` with overview.md, glossary.md, decisions.md, pitfalls.md, constraints.md)
3. Automatic detection of technical experts (framework-controlled) vs project/business experts (project-controlled) implemented
4. Expert creation from signals (not manual wizards) implemented
5. Synthesizer creates experts from signals
6. Synthesizer generates knowledge skeletons
7. Synthesizer distinguishes technical vs project experts
8. Synthesizer writes valid config files

## Tasks / Subtasks

- [ ] Task 1: Design Expert Synthesizer Architecture (AC: 1, 4)
  - [ ] Define synthesizer interface and responsibilities
  - [ ] Design expert creation workflow
  - [ ] Design signal-to-expert mapping
  - [ ] Document synthesizer architecture

- [ ] Task 2: Implement Expert Config Generator (AC: 1, 8)
  - [ ] Create expert config template system
  - [ ] Implement expert YAML generation
  - [ ] Add expert metadata generation
  - [ ] Validate generated config files
  - [ ] Integrate with existing expert config format

- [ ] Task 3: Implement Knowledge Skeleton Generator (AC: 2, 6)
  - [ ] Create knowledge directory structure generator
  - [ ] Implement overview.md template generation
  - [ ] Implement glossary.md template generation
  - [ ] Implement decisions.md template generation
  - [ ] Implement pitfalls.md template generation
  - [ ] Implement constraints.md template generation
  - [ ] Add template customization from signals

- [ ] Task 4: Implement Expert Type Detection (AC: 3, 7)
  - [ ] Create technical expert detection logic
  - [ ] Create project/business expert detection logic
  - [ ] Implement expert type classification
  - [ ] Add expert type metadata

- [ ] Task 5: Implement Signal-Based Expert Creation (AC: 4, 5)
  - [ ] Create signal analysis for expert creation
  - [ ] Implement expert creation triggers
  - [ ] Add expert creation from domain detector output
  - [ ] Implement expert creation from project profile
  - [ ] Add expert creation validation

- [ ] Task 6: Integrate with Domain Detector (AC: 5)
  - [ ] Integrate with Story 28.2 output
  - [ ] Use detected domains for expert creation
  - [ ] Map domains to expert configurations
  - [ ] Update expert configs when domains change

- [ ] Task 7: Testing & Validation (AC: 5, 6, 7, 8)
  - [ ] Unit tests for expert config generation
  - [ ] Unit tests for knowledge skeleton generation
  - [ ] Test expert type detection accuracy
  - [ ] Test signal-based expert creation
  - [ ] Validate generated config files
  - [ ] Test integration with domain detector

## Dev Notes

**Integration Points:**
- Domain detector: Story 28.2 output
- Expert registry: `tapps_agents/experts/expert_registry.py`
- Expert config: `.tapps-agents/experts.yaml` format
- Domain config: `.tapps-agents/domains.md` format
- Knowledge base: `.tapps-agents/knowledge/<domain>/` structure
- Project profile: `tapps_agents/core/project_profile.py`

**Technology Stack:**
- Python 3.13+
- YAML generation (PyYAML)
- Template system (Jinja2 or similar)
- File system operations

**Key Constraints:**
- Must generate valid expert config files
- Must not overwrite existing manual expert configs
- Knowledge skeletons must be useful starting points
- Expert type detection must be accurate
- Must integrate with existing expert registry

**Testing Standards:**
- Test file location: `tests/unit/test_expert_synthesizer.py`
- Test with various project types
- Validate generated configs
- Test knowledge skeleton generation
- Test expert type detection

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story creation | BMad Master |
| 2025-01-XX | 1.1 | Core implementation complete - Expert Synthesizer with automatic config and knowledge skeleton generation | BMad Master |

## Dev Agent Record

### Agent Model Used

_To be populated by dev agent_

### Debug Log References

_To be populated by dev agent_

### Completion Notes List

_To be populated by dev agent_

### File List

_To be populated by dev agent_

## QA Results

_To be populated by QA agent_

