# Quality-Focused Workflow
# Best for: Code quality initiatives, refactoring sprints, quality gates

workflow:
  id: quality
  name: "Quality Improvement"
  description: "Comprehensive code review and improvement cycle"
  version: "1.0.0"
  
  type: brownfield
  auto_detect: true
  
  settings:
    quality_gates: true
    code_scoring: true
    context_tier_default: 2
  
  steps:
    - id: initial_review
      agent: reviewer
      action: review_code
      context_tier: 2
      requires: []
      scoring:
        enabled: true
        thresholds:
          overall_min: 0
      creates:
        - review-report.md
      next: improve
      
    - id: improve
      agent: improver
      action: refactor
      context_tier: 3
      requires:
        - review-report.md
      creates:
        - improved-code/
      next: re_review
      
    - id: re_review
      agent: reviewer
      action: review_code
      context_tier: 2
      requires:
        - improved-code/
      scoring:
        enabled: true
        thresholds:
          overall_min: 75
          maintainability_min: 8.0
          security_min: 7.5
      gate:
        condition: "scoring.passed == true"
        on_pass: testing
        on_fail: improve
      next: testing
      
    - id: testing
      agent: tester
      action: write_tests
      context_tier: 2
      requires:
        - improved-code/
      creates:
        - tests/
      next: security
      
    - id: security
      agent: ops
      action: security_scan
      context_tier: 1
      requires:
        - improved-code/
      next: complete
      
    - id: complete
      agent: orchestrator
      action: finalize
      context_tier: 1

