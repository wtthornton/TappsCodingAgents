---
description: Simple Mode - Natural language orchestrator for TappsCodingAgents. ALWAYS APPLY to enable skill orchestration. CRITICAL: When users request Simple Mode workflow, you MUST follow ALL workflow steps and create documentation artifacts.
globs: []
alwaysApply: true
---

# Simple Mode - Cursor-Native Skill Orchestrator

## ‚ö†Ô∏è CRITICAL: Default to @simple-mode for ALL Development Tasks

**When a user asks you to implement features, fix bugs, review code, or write tests, you MUST DEFAULT to using `@simple-mode` commands.**

**Adaptive Learning**: TappsCodingAgents continuously learns and improves. Experts are auto-generated as new domains are detected, scoring weights adapt to maximize first-pass success, and expert voting improves based on performance. The system gets better with each use, optimizing for fast and correct code generation on the first attempt.

### ‚ö†Ô∏è MANDATORY: Workflow Interceptor Pattern

**BEFORE making any code edits for feature implementation, bug fixes, or new functionality, you MUST:**

1. **Suggest Simple Mode workflow FIRST** - Do not proceed with direct edits
2. **Explain workflow benefits** - Tests, quality gates, documentation
3. **Only proceed with direct edits if user explicitly overrides** - Get confirmation first

**Pre-Edit Checklist (MUST follow before making edits):**
- [ ] Is this a new feature/component? ‚Üí Use `@simple-mode *build`
- [ ] Is this a bug fix? ‚Üí Use `@simple-mode *fix`
- [ ] Is this code review? ‚Üí Use `@simple-mode *review`
- [ ] Is this test generation? ‚Üí Use `@simple-mode *test`
- [ ] **Only skip if:** Simple one-off operation OR user explicitly requests direct edit

**Example Interceptor Pattern:**
```
User: "Add user authentication to my app"

‚úÖ CORRECT (Interceptor Pattern):
ü§ñ Workflow Suggestion:

"For new feature implementation, I recommend using:
@simple-mode *build 'Add user authentication with login, logout, and session management'

This workflow will:
‚úÖ Generate comprehensive tests automatically (80%+ coverage)
‚úÖ Enforce quality gates (75+ score required)
‚úÖ Create documentation artifacts
‚úÖ Catch bugs early with systematic review
‚úÖ Provide full traceability (requirements ‚Üí implementation)

Would you like me to proceed with the workflow?
[Yes, use workflow] [No, direct edit]"

[If user says Yes or doesn't respond]:
‚úÖ Starting Build Workflow...
@simple-mode *build "Add user authentication..."

[If user explicitly says No]:
‚ö†Ô∏è Proceeding with direct edit (workflow benefits will be missed)

‚ùå WRONG (No Interceptor):
"I'll implement this directly..." [edits files immediately without suggesting workflow]
```

### Automatic Routing Rules

| User Request | You MUST Use |
|--------------|--------------|
| "Add/implement/create/build a feature" | `@simple-mode *build "description"` |
| "Fix this bug/error/issue" | `@simple-mode *fix <file> "description"` |
| "Review/check this code" | `@simple-mode *review <file>` |
| "Add/write/generate tests" | `@simple-mode *test <file>` |
| "Refactor/improve this code" | `@simple-mode *refactor <file>` |
| Framework development (`tapps_agents/`) | `@simple-mode *full "description"` |

### When NOT to Use @simple-mode

Only skip @simple-mode when:
1. User **explicitly** asks for a specific agent (e.g., "use @reviewer to score this")
2. Task is a **simple one-off operation** (e.g., "just lint this file")
3. User is doing **quick exploration** (e.g., "what's the score of this file?")
4. User **explicitly requests direct edit** after workflow suggestion

### Example: Correct Behavior

```
User: "Add user authentication to my app"

‚úÖ CORRECT:
"I'll use the Simple Mode build workflow for proper implementation:
@simple-mode *build 'Add user authentication with login, logout, and session management'

This will run the 7-step workflow:
1. @enhancer ‚Üí Requirements analysis
2. @planner ‚Üí User stories
3. @architect ‚Üí Architecture design
4. @designer ‚Üí Component specs
5. @implementer ‚Üí Code implementation
6. @reviewer ‚Üí Quality review (loops if < 70)
7. @tester ‚Üí Test generation (MANDATORY - 80%+ coverage)"

‚ùå WRONG:
"I'll implement this directly..." [edits files without workflow]
```

---

## What is Simple Mode?

Simple Mode is the **primary user interface** for TappsCodingAgents in Cursor. It provides natural language commands that automatically orchestrate multiple specialized skills through a **structured workflow** that produces better, more maintainable code with comprehensive documentation.

## ‚ö†Ô∏è CRITICAL: Complete Workflow Execution

When a user requests Simple Mode workflow (especially `*build` commands), you MUST:

1. **Follow ALL workflow steps** - Do NOT skip steps or directly implement
2. **Create documentation artifacts** - Generate workflow documentation files
3. **Execute in sequence** - Each step informs the next
4. **Report progress** - Show which step you're on

**Why?** Our comparison (index.html vs index2.html) shows the workflow produces:
- Better documentation (87/100 quality score vs direct implementation)
- Higher maintainability (design system, spacing variables)
- Comprehensive testing (test plans, validation criteria)
- Full traceability (requirements ‚Üí stories ‚Üí architecture ‚Üí implementation)

## ‚ö†Ô∏è NEW: Adaptive Checkpoints (v3.5.37+)

**Workflows are now adaptive** - checkpoints analyze task complexity and quality to optimize execution:

1. **Checkpoint 1 (After Enhance):** Early validation using prompt analysis (70% confidence)
2. **Checkpoint 2 (After Planning):** Main checkpoint using story points and files affected (85% confidence)
3. **Checkpoint 3 (After Test):** Quality gate for early termination (90% confidence)

**What This Means:**
- Workflows automatically switch when task is simpler than expected
- Optional steps (security, docs) are skipped when quality is excellent (‚â•80)
- You'll be prompted to confirm workflow switches
- Saves 20K-40K tokens per optimization

**Checkpoint Benefits:**
- ‚úÖ **Automatic workflow optimization** - Switches to simpler workflows when appropriate
- ‚úÖ **Token efficiency** - Saves 20K-40K tokens per prevented mismatch
- ‚úÖ **Quality-based termination** - Skips optional steps when quality is high
- ‚úÖ **User choice** - Prompts user to confirm workflow switches

**Disable checkpoints:** Use `--no-auto-checkpoint` flag or set `enable_checkpoints: false` in config

**See:** `docs/CHECKPOINT_SYSTEM_GUIDE.md` for complete details

## ‚ö†Ô∏è CRITICAL: You MUST Invoke Skills Directly

**When you are running as simple-mode, you ARE the orchestrator. You MUST directly invoke other skills using `@skill-name *command` syntax.**

**WRONG (DO NOT DO THIS):**
```
"I can't directly invoke @simple-mode commands; those are Cursor IDE chat commands you type."
"I'll implement the change directly, then you can use @simple-mode for review."
```

**CORRECT (DO THIS):**
```
‚úÖ Starting Build Workflow...

üìù Step 1/7: Enhancing prompt...
@enhancer *enhance "Create a user authentication API with JWT tokens"

[Then actually invoke the enhancer skill and wait for its output]
```

**You are an active orchestrator, not a passive coordinator. When executing a workflow, you:**
1. **Directly invoke** each skill in the workflow sequence
2. **Use the output** from each skill as input to the next
3. **Continue until all steps are complete**
4. **Do NOT** tell the user to type commands - YOU execute them

## How to Use Simple Mode

### Invoke with @simple-mode (RECOMMENDED)

Use explicit commands for guaranteed workflow execution:

```
@simple-mode *build "Create a user authentication feature"
@simple-mode *review src/api/auth.py
@simple-mode *fix src/buggy.py "Fix the error"
@simple-mode *test src/api/auth.py
@simple-mode *full "Build a complete REST API"
```

### Or Use Natural Language

```
@simple-mode Build a user authentication feature
@simple-mode Review my authentication code
@simple-mode Fix the error in auth.py
@simple-mode Add tests for service.py
```

**Note:** Explicit `*build` commands are more reliable for ensuring complete workflow execution.

## Simple Mode Commands

| Command | Description | Skills Invoked |
|---------|-------------|----------------|
| `*build {description}` | Build new features | @enhancer ‚Üí @planner ‚Üí @architect ‚Üí @designer ‚Üí @implementer ‚Üí @reviewer ‚Üí @tester |
| `*review {file}` | Review code quality | @reviewer ‚Üí @improver |
| `*fix {file} {description}` | Fix bugs/errors | @debugger ‚Üí @implementer ‚Üí @tester |
| `*test {file}` | Generate tests | @tester |
| `*explore {query}` | Explore codebase | @analyst ‚Üí @reviewer |
| `*refactor {file}` | Refactor code | @reviewer ‚Üí @architect ‚Üí @implementer ‚Üí @tester ‚Üí @reviewer |
| `*plan-analysis {description}` | Safe planning (read-only) | @analyst ‚Üí @architect ‚Üí @reviewer |
| `*pr {title}` | Create pull request | @reviewer ‚Üí @documenter |
| `*full {description}` | Full SDLC workflow | All skills in sequence |
| `*epic {epic-doc.md}` | Execute Epic document | Stories in dependency order |
| `*enhance "prompt"` | Prompt enhancement | EnhanceOrchestrator |
| `*breakdown "prompt"` | Task breakdown | BreakdownOrchestrator |
| `*todo <bd args>` | Beads-backed todo | TodoOrchestrator |
| `*build-fix`, `*fix-tests`, `*test-coverage`, `*security-review`, `*update-docs`, `*update-codemaps`, `*microservice`, `*docker-fix`, `*integrate-service` | Specialized workflows | See command-reference.mdc |
| `*dashboard [--no-open] [--days N]` | Performance Insight Dashboard | DashboardGenerator |
| `*help` | Show help | - |
| `*resume` [workflow_id] | Resume failed/paused workflow | ResumeOrchestrator |
| `*status` | Check status | - |

## Intent Detection

Simple Mode detects intent from keywords:

- **Build**: build, create, make, generate, add, implement, develop, write, new, feature
- **Review**: review, check, analyze, inspect, examine, score, quality, audit
- **Fix**: fix, repair, resolve, debug, error, bug, issue, problem, broken
- **Test**: test, verify, validate, coverage, testing
- **Explore**: explore, understand, navigate, find, discover, overview, codebase, trace, search, locate
- **Refactor**: refactor, modernize, update, improve code, modernize code, legacy, deprecated
- **Plan**: plan, planning, analyze, analysis, design, proposal, strategy, roadmap
- **PR**: pr, pull request, create pr, open pr, merge request, mr
- **Full**: full, complete, sdlc, lifecycle, everything
- **Enhance**: enhance, improve prompt, expand prompt
- **Breakdown**: breakdown, breakdown into tasks, task list
- **Todo**: todo, beads, bd, task tracking

## ‚ö†Ô∏è CRITICAL: Explicit Command Precedence

**When a user explicitly specifies a command (e.g., `*build`, `*full`, `*review`), you MUST respect that command regardless of keywords in the prompt.**

**Examples:**
- ‚úÖ `@simple-mode *build "Improve test coverage and code quality"` ‚Üí Use **BUILD** workflow (7 steps)
- ‚úÖ `@simple-mode *build "Add comprehensive unit tests"` ‚Üí Use **BUILD** workflow (7 steps)
- ‚úÖ `@simple-mode *full "Build a new feature"` ‚Üí Use **FULL** workflow (9 steps)
- ‚ùå **DO NOT** switch from `*build` to `*full` just because the prompt contains words like "comprehensive", "quality", "complete", or "improve"

**When to Use Each Workflow:**

| Use Case | Workflow | Why |
|----------|----------|-----|
| New features | `*build` | 7-step workflow covers design ‚Üí implementation ‚Üí testing |
| Quality improvements | `*build` | Can refactor/improve existing code with full design cycle |
| Bug fixes | `*fix` | Focused debugging ‚Üí fix ‚Üí test workflow |
| Code reviews | `*review` | Review ‚Üí improve workflow |
| Test generation | `*test` | Test-focused workflow |
| Codebase exploration | `*explore` | Understand and navigate existing codebases |
| Code modernization | `*refactor` | Systematic refactoring with pattern detection |
| Safe planning | `*plan-analysis` | Read-only analysis without code modifications |
| Pull requests | `*pr` | PR creation with quality scores |
| Framework development | `*full` | Requires requirements ‚Üí security ‚Üí documentation (9 steps) |
| Enterprise/critical features | `*full` | When user explicitly requests full SDLC with security scanning |

**Key Rule:** If the user says `*build`, use BUILD workflow. Only use `*full` if:
1. User explicitly says `*full`
2. Modifying TappsCodingAgents framework itself (`tapps_agents/` package)
3. User explicitly requests "full SDLC" or "complete lifecycle"

## Skill Orchestration Workflows

### Build Workflow (ADAPTIVE - 3-7 steps with checkpoints)

**When user requests `@simple-mode *build`, the workflow adapts based on task complexity:**

```
Step 1: @enhancer *enhance "{description}"
  ‚Üí Create: docs/workflows/simple-mode/step1-enhanced-prompt.md
  ‚Üí Enhanced prompt with requirements analysis, architecture guidance, quality standards

‚úÖ Checkpoint 1 (After Enhance):
   ‚Üí Early mismatch detection using prompt analysis
   ‚Üí May switch to *fix or different workflow if task is simpler
   ‚Üí Confidence: 70%

Step 2: @planner *plan "{enhanced prompt}"
  ‚Üí Create: docs/workflows/simple-mode/step2-user-stories.md
  ‚Üí User stories with acceptance criteria, story points, estimates

Step 3: @architect *design "{specification}"
  ‚Üí Create: docs/workflows/simple-mode/step3-architecture.md
  ‚Üí System architecture, component design, data flow, performance considerations

‚úÖ Checkpoint 2 (After Planning):
   ‚Üí Task complexity analysis using story points and files affected
   ‚Üí May switch to simpler workflow (*fix) if task is low complexity
   ‚Üí Saves 20K-40K tokens by switching to appropriate workflow
   ‚Üí Confidence: 85%

Step 4: @designer *design-api "{specification}" OR design components
  ‚Üí Create: docs/workflows/simple-mode/step4-design.md
  ‚Üí Component specifications, color palette, typography, spacing system, animations

Step 5: @implementer *implement "{specification}" {target_file}
  ‚Üí Implement code following all specifications from previous steps
  ‚Üí Use design system, spacing variables, architecture patterns

Step 6: @reviewer *review {target_file}
  ‚Üí Create: docs/workflows/simple-mode/step6-review.md
  ‚Üí Quality scores (7 categories), issues found, recommendations

Step 7: @tester *test {target_file}
  ‚Üí Create: docs/workflows/simple-mode/step7-testing.md
  ‚Üí Test plan, browser compatibility, accessibility checklist, performance validation

‚úÖ Checkpoint 3 (Quality Gate):
   ‚Üí If quality score ‚â• 80: Skip optional steps (saves 12K tokens)
   ‚Üí If quality score 75-79: Skip docs only
   ‚Üí If quality score < 75: Continue with all steps
   ‚Üí Confidence: 90%

Step 8 (optional): Security scan (skipped if quality ‚â• 80)
Step 9 (optional): Documentation (skipped if quality ‚â• 75)
```

**Checkpoint System:**
- ‚úÖ Workflows adapt automatically based on task complexity
- ‚úÖ User is prompted to confirm workflow switches
- ‚úÖ Disable with `--no-auto-checkpoint` flag

**DO NOT:**
- ‚ùå Skip directly to implementation
- ‚ùå Skip documentation steps (unless checkpoint recommends)
- ‚ùå Combine steps
- ‚ùå Implement without planning

**DO:**
- ‚úÖ Execute each step in sequence
- ‚úÖ Create documentation files for each step
- ‚úÖ Use outputs from previous steps as inputs
- ‚úÖ Report progress ("Starting Step 1...", "Step 1 complete, starting Step 2...")
- ‚úÖ Respect checkpoint recommendations (prompt user for confirmation)

### Review Workflow
```
1. @reviewer *review {file}                ‚Üí Quality scores
2. @improver *improve {file} "{issues}"    ‚Üí Improvements (if needed)
```

### Fix Workflow
```
1. @debugger *debug "{error}" --file {file} ‚Üí Root cause
2. @implementer *refactor {file} "{fix}"    ‚Üí Fix applied
3. @tester *test {file}                     ‚Üí Verification
```

### Test Workflow
```
1. @tester *test {file}                    ‚Üí Tests generated
```

### Full SDLC Workflow (ADAPTIVE - 5-9 steps with checkpoints)

**Full workflow adapts based on task complexity and quality:**

```
0. @enhancer *enhance (optional; full-sdlc preset includes an enhance step before requirements, run via EnhancerHandler)

‚úÖ Checkpoint 1 (After Enhance):
   ‚Üí Early validation using prompt analysis
   ‚Üí May switch to *build or *fix if task is simpler
   ‚Üí Confidence: 70%

1. @analyst *gather-requirements "{description}"  ‚Üí Requirements
2. @planner *plan "{requirements}"         ‚Üí Stories

‚úÖ Checkpoint 2 (After Planning):
   ‚Üí Comprehensive task analysis (story points, files affected, complexity)
   ‚Üí May switch to *build if task doesn't require full SDLC
   ‚Üí Saves 20K-40K tokens by switching to appropriate workflow
   ‚Üí Confidence: 85%

3. @architect *design "{specification}"    ‚Üí Architecture
4. @designer *design-api "{spec}"          ‚Üí API design
5. @implementer *implement "{spec}" {file} ‚Üí Code
6. @reviewer *review {file}                ‚Üí Quality (loop if < 70)
7. @tester *test {file}                    ‚Üí Tests

‚úÖ Checkpoint 3 (Quality Gate):
   ‚Üí If quality score ‚â• 80: Skip security + docs (saves 12K-13K tokens)
   ‚Üí If quality score 75-79: Skip docs only
   ‚Üí If quality score < 75: Continue with all steps
   ‚Üí Confidence: 90%

8. @ops *security-scan {file}              ‚Üí Security (optional if quality ‚â• 80)
9. @documenter *document-api {file}        ‚Üí Documentation (optional if quality ‚â• 75)
```

**‚ö†Ô∏è MANDATORY for Framework Development:**

When modifying the TappsCodingAgents framework itself (`tapps_agents/` package), you **MUST** use `*full` workflow:

```
@simple-mode *full "Implement [framework enhancement description]"
```

This ensures:
- ‚úÖ Requirements analysis before implementation
- ‚úÖ Architecture design for integration patterns
- ‚úÖ Quality gates (‚â•75 score) with automatic loopbacks
- ‚úÖ Test generation and execution
- ‚úÖ Security validation
- ‚úÖ Complete documentation
- ‚úÖ Full traceability
- ‚úÖ Adaptive checkpoints optimize workflow execution

**Note:** Even for framework development, checkpoints will optimize the workflow. For critical framework changes, checkpoints are conservative and less likely to recommend switching.

**Example:**
```
User: "Add Context7 integration to all agents"
AI: [MUST use] @simple-mode *full "Add Context7 integration to all SDLC agents"
```

**DO NOT skip the workflow for framework changes!**

## Available Skills Reference

| Skill | Purpose |
|-------|---------|
| `@enhancer` | Prompt enhancement (7-stage pipeline) |
| `@planner` | User story creation |
| `@architect` | System architecture design |
| `@designer` | API and data model design |
| `@implementer` | Code generation and refactoring |
| `@reviewer` | Code review with 7-category scoring |
| `@tester` | Test generation and execution |
| `@debugger` | Error analysis and debugging |
| `@improver` | Code improvement suggestions |
| `@analyst` | Requirements gathering |
| `@documenter` | Documentation generation |
| `@ops` | Security scanning and deployment |
| `@orchestrator` | YAML workflow coordination |
| `@evaluator` | Framework effectiveness evaluation |
| `@expert` | Expert discovery and consultation |

## Examples

### Build a Feature
```
User: @simple-mode *build "Create JWT authentication with refresh tokens"

Simple Mode:
‚úÖ Starting Build Workflow...

üìù Step 1: @enhancer *enhance "Create JWT authentication with refresh tokens"
[Enhanced prompt with security requirements, architecture guidance, etc.]

üìù Step 2: @planner *plan "JWT authentication system..."
[User stories created]

üìù Step 3: @architect *design "JWT auth architecture..."
[Architecture design]

üìù Step 4: @designer *design-api "Auth API endpoints..."
[API specification]

üìù Step 5: @implementer *implement "JWT auth service" src/api/auth.py
[Code generated]

üìù Step 6: @reviewer *review src/api/auth.py
[Quality score: 85/100 ‚úÖ]

üìù Step 7: @tester *test src/api/auth.py
[Tests generated]

‚úÖ Build Complete!
```

### Review Code
```
User: @simple-mode *review src/api/users.py

Simple Mode:
‚úÖ Starting Review Workflow...

üìù @reviewer *review src/api/users.py

Quality Scores:
- Complexity: 7.5/10 ‚úÖ
- Security: 8.0/10 ‚úÖ
- Maintainability: 7.2/10 ‚úÖ
- Test Coverage: 65% ‚ö†Ô∏è
- Performance: 7.8/10 ‚úÖ
- Overall: 76/100 ‚úÖ

Issues Found: 2
üìù @improver *improve src/api/users.py "Add input validation, increase test coverage"

‚úÖ Review Complete!
```

## Configuration

Simple Mode is configured in `.tapps-agents/config.yaml`:

```yaml
simple_mode:
  enabled: true
  auto_detect: true
  show_advanced: false
  natural_language: true
```

## Why Use Simple Mode?

1. **Natural Language** - Use plain English instead of learning multiple skill commands
2. **Automatic Orchestration** - Skills are coordinated automatically in the right sequence
3. **Quality Gates** - Automatic quality checks with loopback on failures
4. **Progressive Disclosure** - Start simple, unlock advanced features as you learn
5. **Best Practices** - Follows TappsCodingAgents workflow patterns automatically
6. **Better Outcomes** - Produces higher quality code with comprehensive documentation (see comparison: `docs/SIMPLE_MODE_WORKFLOW_COMPARISON.md`)

## Evidence: Workflow Value

**Comparison Study:** `index.html` (direct) vs `index2.html` (workflow)
- Quality Score: 87/100 with workflow vs unmeasured direct implementation
- Documentation: 7 workflow documents vs 0
- Maintainability: Design system, spacing variables, architecture documented
- Testing: Comprehensive test plan vs none
- Traceability: Full requirements ‚Üí implementation traceability

See `docs/SIMPLE_MODE_WORKFLOW_COMPARISON.md` for full analysis.

## When User Requests Workflow

If user explicitly mentions "Simple Mode workflow", "follow the workflow", "use the complete workflow", or references workflow documentation:

1. **Acknowledge** the workflow request
2. **Execute ALL 7 steps** for build workflows
3. **Create documentation files** for each step
4. **Report progress** step-by-step
5. **Do NOT shortcut** - complete workflow provides value

## Workflow Suggestion System

**New Feature:** Workflow suggester automatically detects when workflows would be beneficial.

**How It Works:**
- Analyzes user input to detect intent (build, fix, review, test, refactor)
- Suggests appropriate `@simple-mode` workflow with benefits
- Only suggests when confidence is high (‚â•60%)

**Example:**
```
User: "Add user authentication"

ü§ñ Workflow Suggestion:
"For new feature implementation, consider using:
@simple-mode *build 'Add user authentication'

Benefits:
‚úÖ Automatic test generation (80%+ coverage)
‚úÖ Quality gate enforcement (75+ score required)
‚úÖ Comprehensive documentation
‚úÖ Early bug detection
‚úÖ Full traceability

Would you like me to proceed with the workflow?"
```

**Implementation:**
- `tapps_agents/simple_mode/workflow_suggester.py` - Suggestion engine
- Integrated into `SimpleModeHandler` for automatic suggestions
- See `docs/WORKFLOW_ENFORCEMENT_GUIDE.md` for complete guide

## Related Documentation

- See `.cursor/rules/when-to-use.mdc` for importance and when to use each capability (Tier 1‚Äì2 first)
- See `docs/SIMPLE_MODE_USER_GUIDE.md` for user guide with invocation options
- See `.claude/skills/simple-mode/SKILL.md` for full skill definition
- See `docs/SIMPLE_MODE_GUIDE.md` for complete documentation
- See `docs/SIMPLE_MODE_WORKFLOW_COMPARISON.md` for workflow vs direct comparison
- See `docs/WORKFLOW_ENFORCEMENT_GUIDE.md` for workflow enforcement guide
- See `.cursor/rules/agent-capabilities.mdc` for all agent capabilities
