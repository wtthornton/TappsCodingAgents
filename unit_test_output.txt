============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: C:\cursor\TappsAgentsTest\TappsCodingAgents
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.9.0, hypothesis-6.148.0, asyncio-1.3.0, cov-7.0.0, httpx-0.36.0, mock-3.15.1, timeout-2.4.0, xdist-3.8.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 30.0s
timeout method: thread
timeout func_only: False
collecting ... collected 1641 items / 203 deselected / 1438 selected

tests/unit/agents/reviewer/test_windows_npx_shims.py::TestReviewerWindowsNpxShims::test_typescript_scorer_wraps_npx_cmd_for_version_checks PASSED [  0%]
tests/unit/agents/reviewer/test_windows_npx_shims.py::TestReviewerWindowsNpxShims::test_code_scorer_wraps_npx_cmd_for_jscpd PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentInitialization::test_reviewer_agent_init SKIPPED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentInitialization::test_reviewer_agent_activate PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentInitialization::test_reviewer_agent_get_commands PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentReviewCommand::test_review_command_success PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentReviewCommand::test_review_command_file_not_found PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentReviewCommand::test_review_command_invalid_file PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentScoreCommand::test_score_command_success PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentScoreCommand::test_score_command_file_not_found PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentErrorHandling::test_review_command_scorer_error PASSED [  0%]
tests/unit/agents/test_reviewer_agent.py::TestReviewerAgentErrorHandling::test_review_command_mal_error PASSED [  0%]
tests/unit/cli/test_cli.py::TestReviewCommand::test_review_command_file_not_found PASSED [  0%]
tests/unit/cli/test_cli.py::TestReviewCommand::test_review_command_success_json PASSED [  0%]
tests/unit/cli/test_cli.py::TestReviewCommand::test_review_command_success_text PASSED [  1%]
tests/unit/cli/test_cli.py::TestReviewCommand::test_review_command_error_handling PASSED [  1%]
tests/unit/cli/test_cli.py::TestScoreCommand::test_score_command_file_not_found PASSED [  1%]
tests/unit/cli/test_cli.py::TestScoreCommand::test_score_command_success_json PASSED [  1%]
tests/unit/cli/test_cli.py::TestScoreCommand::test_score_command_success_text PASSED [  1%]
tests/unit/cli/test_cli.py::TestHelpCommand::test_help_command PASSED    [  1%]
tests/unit/cli/test_cli.py::TestListStoriesCommand::test_list_stories_command_json PASSED [  1%]
tests/unit/cli/test_cli.py::TestListStoriesCommand::test_list_stories_command_text PASSED [  1%]
tests/unit/cli/test_cli.py::TestMainFunction::test_main_help PASSED      [  1%]
tests/unit/cli/test_cli.py::TestMainFunction::test_main_reviewer_help PASSED [  1%]
tests/unit/cli/test_cli_base.py::TestNormalizeCommand::test_normalize_command_with_star PASSED [  1%]
tests/unit/cli/test_cli_base.py::TestNormalizeCommand::test_normalize_command_without_star PASSED [  1%]
tests/unit/cli/test_cli_base.py::TestNormalizeCommand::test_normalize_command_none PASSED [  1%]
tests/unit/cli/test_cli_base.py::TestFormatOutput::test_format_output_json_dict PASSED [  1%]
tests/unit/cli/test_cli_base.py::TestFormatOutput::test_format_output_json_string PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestFormatOutput::test_format_output_text PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestFormatErrorOutput::test_format_error_output_json PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestFormatErrorOutput::test_format_error_output_json_with_details PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestFormatErrorOutput::test_format_error_output_text PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestFormatErrorOutput::test_format_error_output_text_with_details PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestHandleAgentError::test_handle_agent_error_no_error PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestHandleAgentError::test_handle_agent_error_with_error_json PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestHandleAgentError::test_handle_agent_error_with_error_text PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestHandleAgentError::test_handle_agent_error_custom_exit_code PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunWithAgentLifecycle::test_run_with_agent_lifecycle_success PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunWithAgentLifecycle::test_run_with_agent_lifecycle_with_args PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunWithAgentLifecycle::test_run_with_agent_lifecycle_always_closes PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunWithAgentLifecycle::test_run_with_agent_lifecycle_no_close_method PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunAsyncCommand::test_run_async_command_success PASSED [  2%]
tests/unit/cli/test_cli_base.py::TestRunAsyncCommand::test_run_async_command_with_exception PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAsyncCommand::test_run_async_command_in_loop_raises PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAgentCommand::test_run_agent_command_success PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAgentCommand::test_run_agent_command_normalizes_command PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAgentCommand::test_run_agent_command_with_kwargs PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAgentCommand::test_run_agent_command_exit_on_error PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestRunAgentCommand::test_run_agent_command_no_exit_on_error PASSED [  3%]
tests/unit/cli/test_cli_base.py::TestExitCodes::test_exit_codes_defined PASSED [  3%]
tests/unit/cli/test_cli_version_flag.py::TestCliVersionFlag::test_cli_version_flag_prints_version_and_exits FAILED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_is_ambiguous_low_confidence PASSED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_is_ambiguous_high_confidence PASSED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_is_ambiguous_many_alternatives PASSED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_estimate_time_quick_flow PASSED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_estimate_time_bmad_method PASSED [  3%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_estimate_time_enterprise PASSED [  4%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_estimate_time_unknown PASSED [  4%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_recommend_command_json_output PASSED [  4%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_recommend_command_text_output PASSED [  4%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_recommend_command_interactive_qa PASSED [  4%]
tests/unit/cli/test_workflow_recommend.py::TestWorkflowRecommendCommand::test_recommend_command_error_handling PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_init_enabled PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_init_disabled PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_get_documentation_disabled PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_get_documentation_cache_hit SKIPPED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_get_documentation_with_fuzzy_match SKIPPED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_search_libraries_disabled PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_search_libraries_no_gateway PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_search_libraries_with_gateway PASSED [  4%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_is_library_cached_disabled PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_is_library_cached_true SKIPPED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_is_library_cached_false PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_get_cache_statistics_disabled PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_get_cache_statistics_enabled SKIPPED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_should_use_context7_disabled PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_should_use_context7_with_keywords PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestContext7AgentHelper::test_should_use_context7_without_keywords PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestGetContext7Helper::test_get_context7_helper_with_config PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestGetContext7Helper::test_get_context7_helper_disabled_config PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestGetContext7Helper::test_get_context7_helper_no_config PASSED [  5%]
tests/unit/context7/test_agent_integration.py::TestGetContext7Helper::test_get_context7_helper_with_mcp_gateway PASSED [  5%]
tests/unit/context7/test_analytics.py::TestCacheMetrics::test_cache_metrics_creation PASSED [  5%]
tests/unit/context7/test_analytics.py::TestCacheMetrics::test_cache_metrics_to_dict PASSED [  5%]
tests/unit/context7/test_analytics.py::TestLibraryMetrics::test_library_metrics_creation PASSED [  5%]
tests/unit/context7/test_analytics.py::TestLibraryMetrics::test_library_metrics_to_dict PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_initialization PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_record_cache_hit PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_record_cache_miss PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_record_api_call PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_record_fuzzy_match PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_cache_metrics_empty_cache PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_cache_metrics_with_data PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_library_metrics_nonexistent PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_library_metrics_existing PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_top_libraries PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_top_libraries_empty PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_status_report_healthy PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_status_report_needs_attention PASSED [  6%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_get_status_report_structure PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_reset_metrics PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_response_times_limit PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_average_response_time_calculation PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_average_response_time_no_data PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_metrics_persistence PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_hit_rate_calculation PASSED [  7%]
tests/unit/context7/test_analytics.py::TestAnalytics::test_hit_rate_no_requests PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_initialize_cache_dirs PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_get_library_dir PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_get_library_meta_file PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_get_library_doc_file PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_get_topic_dir PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_ensure_library_dir PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_ensure_topic_dir PASSED [  7%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_multiple_libraries PASSED [  8%]
tests/unit/context7/test_cache_structure.py::TestCacheStructure::test_library_with_topics PASSED [  8%]
tests/unit/context7/test_cleanup.py::TestCleanupResult::test_create_cleanup_result PASSED [  8%]
tests/unit/context7/test_cleanup.py::TestCleanupResult::test_to_dict PASSED [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_get_cache_size SKIPPED [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_get_entry_access_info SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_by_size_under_limit SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_by_size_over_limit SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_by_size_preserves_recent SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_by_age SKIPPEDix: Mock file lock acquisition/release in cache operations.
Not critical for functionality - cleanup logic is tested via integration
tests.)                                                                  [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_by_age_ignores_policy SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_unused SKIPPEDix: Mock file lock acquisition/release in cache operations.
Not critical for functionality - cleanup logic is tested via integration
tests.)                                                                  [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_all SKIPPEDix: Mock file lock acquisition/release in cache operations. Not
critical for functionality - cleanup logic is tested via integration
tests.)                                                                  [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_get_cleanup_recommendations SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  8%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_get_cleanup_recommendations_size_limit SKIPPEDix: Mock file lock
acquisition/release in cache operations. Not critical for functionality
- cleanup logic is tested via integration tests.)                        [  9%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_size_calculation_correctness SKIPPEDix: Mock file lock acquisition/release in
cache operations. Not critical for functionality - cleanup logic is
tested via integration tests.)                                           [  9%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_age_calculation_correctness SKIPPEDix: Mock file lock acquisition/release in
cache operations. Not critical for functionality - cleanup logic is
tested via integration tests.)                                           [  9%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cache_hit_miss_logic SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  9%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_preserves_recent_entries SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  9%]
tests/unit/context7/test_cleanup.py::TestKBCleanup::test_cleanup_lru_eviction_order SKIPPEDix: Mock file lock acquisition/release in cache
operations. Not critical for functionality - cleanup logic is tested via
integration tests.)                                                      [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_init_enabled SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_init_disabled SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_set_mcp_gateway SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_docs_disabled SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_docs_cache_hit SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_docs_cache_miss SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_resolve_disabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_resolve_no_gateway SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [  9%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_resolve_with_gateway SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_status_disabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_status_enabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_search_disabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_search_enabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_search_with_limit SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_refresh_disabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_refresh_specific_topic SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_refresh_library SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_refresh_all SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_cleanup_disabled SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_cleanup_size SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_cleanup_age SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_cleanup_unused SKIPPEDck file lock operations. Not critical -
functionality tested elsewhere.)                                         [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_cleanup_all SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 10%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_rebuild_index SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 11%]
tests/unit/context7/test_commands.py::TestContext7Commands::test_cmd_help SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_initialization PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_simple_similarity_exact_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_simple_similarity_no_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_simple_similarity_partial_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_calculate_similarity PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_library_exact_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_library_fuzzy_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_library_no_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_library_max_results PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_topic_exact_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_topic_fuzzy_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_entry_exact_match PASSED [ 11%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_entry_partial_match PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_entry_library_only_match PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_is_match_exact PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_is_match_fuzzy PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_is_match_no_match PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_get_best_match_exact PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_get_best_match_no_match PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_get_best_match_fuzzy PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_fuzzy_match_to_dict PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_library_empty_input PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_topic_empty_input PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_find_matching_entry_empty_input PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_case_insensitive_matching PASSED [ 12%]
tests/unit/context7/test_fuzzy_matcher.py::TestFuzzyMatcher::test_combined_score_weighting PASSED [ 12%]
tests/unit/context7/test_kb_cache.py::TestCacheEntry::test_cache_entry_creation PASSED [ 13%]
tests/unit/context7/test_kb_cache.py::TestCacheEntry::test_cache_entry_to_dict PASSED [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_kb_cache_init SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_kb_cache_init_default SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_store_entry SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_get_entry_exists SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_get_entry_not_found SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_delete_entry SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_list_entries SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_kb_cache.py::TestKBCache::test_clear_cache SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_lookup.py::TestKBLookup::test_kb_lookup_init SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_lookup.py::TestKBLookup::test_lookup_cached_entry SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_lookup.py::TestKBLookup::test_lookup_not_cached SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_lookup.py::TestKBLookup::test_lookup_with_fuzzy_match SKIPPEDck file lock operations. Not critical - functionality
tested elsewhere.)                                                       [ 13%]
tests/unit/context7/test_lookup.py::TestKBLookup::test_lookup_default_topic SKIPPEDck file lock operations. Not critical - functionality tested
elsewhere.)                                                              [ 13%]
tests/unit/context7/test_lookup.py::TestLookupResult::test_lookup_result_creation PASSED [ 14%]
tests/unit/context7/test_lookup.py::TestLookupResult::test_lookup_result_to_dict PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataModels::test_library_metadata_creation PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataModels::test_library_metadata_with_topics PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataModels::test_cache_index_creation PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_load_library_metadata_nonexistent PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_save_and_load_library_metadata PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_load_cache_index_nonexistent PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_save_and_load_cache_index PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_update_library_metadata PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_update_library_metadata_increment_hits PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_update_cache_index PASSED [ 14%]
tests/unit/context7/test_metadata.py::TestMetadataManager::test_update_cache_index_remove PASSED [ 14%]
tests/unit/context7/test_refresh_queue.py::TestRefreshTask::test_task_creation PASSED [ 14%]
tests/unit/context7/test_refresh_queue.py::TestRefreshTask::test_task_to_dict PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshTask::test_task_from_dict PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_initialization PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_add_task PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_add_task_no_topic PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_add_task_duplicate_updates PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_remove_task PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_remove_task_not_found PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_next_task_empty_queue PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_next_task_priority_order PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_next_task_oldest_first_same_priority PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_next_task_max_priority_filter PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_next_task_scheduled_filter PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_get_all_tasks PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_mark_task_completed_success PASSED [ 15%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_mark_task_completed_failure PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_mark_task_completed_multiple_attempts PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_persistence_yaml PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_persistence_json PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_stale_entries PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_stale_entries_priority PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_queue_stale_entries_with_library_type PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_clear_queue PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_size PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_load_queue_missing_file PASSED [ 16%]
tests/unit/context7/test_refresh_queue.py::TestRefreshQueue::test_load_queue_invalid_file PASSED [ 16%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_init_default_config_dir PASSED [ 16%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_init_custom_config_dir PASSED [ 16%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_store_api_key_without_crypto PASSED [ 16%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_load_api_key_without_crypto PASSED [ 17%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_store_and_retrieve_key_with_crypto SKIPPED [ 17%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_load_all_keys PASSED [ 17%]
tests/unit/context7/test_security.py::TestAPIKeyManager::test_delete_api_key PASSED [ 17%]
tests/unit/context7/test_security.py::TestSecurityAuditResult::test_to_dict PASSED [ 17%]
tests/unit/context7/test_security.py::TestComplianceStatus::test_to_dict PASSED [ 17%]
tests/unit/context7/test_security.py::TestSecurityAudit::test_security_audit_result_creation PASSED [ 17%]
tests/unit/context7/test_security.py::TestSecurityValidation::test_validate_api_key_format PASSED [ 17%]
tests/unit/context7/test_security.py::TestSecurityValidation::test_validate_file_permissions PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_policy_creation PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_is_stale_fresh_entry PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_is_stale_old_entry PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_is_stale_exactly_at_threshold PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_is_stale_invalid_date PASSED [ 17%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_days_until_stale_fresh PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_days_until_stale_already_stale PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicy::test_days_until_stale_invalid_date PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_initialization PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_default_policies PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_policy_stable PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_policy_critical_by_name PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_policy_active_by_name PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_policy_explicit_type PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_policy_invalid_type_defaults PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_set_policy_custom PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_is_entry_stale_fresh PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_is_entry_stale_old PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_is_entry_stale_critical_library PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_refresh_recommendation_keep PASSED [ 18%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_refresh_recommendation_refresh PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_refresh_recommendation_consider_refresh PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_library_type_detection_security PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_library_type_detection_auth PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_library_type_detection_test PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_library_type_detection_default PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_get_refresh_recommendation_fields PASSED [ 19%]
tests/unit/context7/test_staleness_policies.py::TestStalenessPolicyManager::test_is_entry_stale_with_explicit_type PASSED [ 19%]
tests/unit/core/test_cursor_first_policy.py::TestCursorFirstMALGuard::test_mal_generate_raises_in_cursor_mode PASSED [ 19%]
tests/unit/core/test_cursor_first_policy.py::TestCursorFirstMALGuard::test_mal_generate_allowed_in_headless_mode PASSED [ 19%]
tests/unit/core/test_doctor_windows_cmd_shims.py::TestDoctorWindowsCmdShims::test_run_version_cmd_wraps_cmd_for_cmd_shim PASSED [ 19%]
tests/unit/core/test_doctor_windows_cmd_shims.py::TestDoctorWindowsCmdShims::test_run_version_cmd_does_not_wrap_non_cmd_exe PASSED [ 19%]
tests/unit/core/test_error_edge_cases.py::TestCorruptedDataHandling::test_invalid_json_handling PASSED [ 19%]
tests/unit/core/test_error_edge_cases.py::TestCorruptedDataHandling::test_invalid_yaml_handling PASSED [ 19%]
tests/unit/core/test_error_edge_cases.py::TestCorruptedDataHandling::test_corrupted_binary_data PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestMissingDependenciesHandling::test_missing_optional_dependency_handled_gracefully PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestMissingDependenciesHandling::test_missing_required_file_raises_clear_error PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestNetworkFailureHandling::test_connection_timeout_handling PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestNetworkFailureHandling::test_connection_refused_handling PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestPermissionErrorHandling::test_permission_error_categorized_correctly PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestPermissionErrorHandling::test_read_permission_error PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestLargeInputHandling::test_file_too_large_error PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestLargeInputHandling::test_very_large_string_handling PASSED [ 20%]
tests/unit/core/test_error_edge_cases.py::TestLargeInputHandling::test_memory_error_handling PASSED [ 20%]+++++++++++++++++++++++++++++++++++ Timeout +++++++++++++++++++++++++++++++++++
~~~~~~~~~~~~~~~~~~~~~~~~~ Stack of MainThread (38688) ~~~~~~~~~~~~~~~~~~~~~~~~~
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pytest\__main__.py", line 9, in <module>
    raise SystemExit(pytest.console_main())
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\config\__init__.py", line 223, in console_main
    code = main()
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\config\__init__.py", line 199, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\runner.py", line 142, in runtestprotocol
    reports.append(call_and_report(item, "teardown", log, nextitem=nextitem))
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\runner.py", line 353, in from_call
    result: TResult | None = func()
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\pluggy\_callers.py", line 152, in _multicall
    teardown.send(result)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\capture.py", line 904, in pytest_runtest_teardown
    with self.item_capture("teardown", item):
  File "C:\Python313\Lib\contextlib.py", line 148, in __exit__
    next(self.gen)
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\capture.py", line 867, in item_capture
    out, err = self.read_global_capture()
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\capture.py", line 803, in read_global_capture
    return self._global_capturing.readouterr()
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\capture.py", line 706, in readouterr
    out = self.out.snap() if self.out else ""
  File "C:\Users\tappt\AppData\Roaming\Python\Python313\site-packages\_pytest\capture.py", line 591, in snap
    self.tmpfile.seek(0)
  File "C:\Python313\Lib\tempfile.py", line 499, in func_wrapper
    return func(*args, **kwargs)
+++++++++++++++++++++++++++++++++++ Timeout +++++++++++++++++++++++++++++++++++
