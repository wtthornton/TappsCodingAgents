{
  "library": "playwright",
  "topic": "usage",
  "documentation": {
    "content": "## Handle errors and timeouts in Playwright sync tests\n\n```python\nfrom playwright.sync_api import sync_playwright, TimeoutError, Error\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch()\n    page = browser.new_page()\n\n    # Set default timeout for all operations\n    page.set_default_timeout(10000)  # 10 seconds\n    page.set_default_navigation_timeout(30000)  # 30 seconds for navigation\n\n    # Handle navigation timeout\n    try:\n        page.goto('https://slow-site.com', timeout=5000)\n    except TimeoutError:\n        print(\"Navigation timed out\")\n\n    # Handle selector not found\n    try:\n        page.click('button#missing', timeout=2000)\n    except TimeoutError:\n        print(\"Button not found\")\n\n    # Wait for selector with timeout\n    try:\n        page.wait_for_selector('.modal', timeout=5000)\n    except TimeoutError:\n        print(\"Modal did not appear\")\n\n    # Handle errors\n    try:\n        page.goto('https://invalid-url')\n    except Error as e:\n        print(f\"Error: {e}\")\n\n    # Graceful degradation\n    if page.locator('.optional-element').count() > 0:\n        page.locator('.optional-element').click()\n\n    browser.close()\n```\n\n## Handle various Page Events in Playwright Python\n\n```python\nfrom playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch()\n    page = browser.new_page()\n\n    # Page events\n    page.on('load', lambda: print('Page loaded'))\n    page.on('domcontentloaded', lambda: print('DOM ready'))\n    page.on('console', lambda msg: print(f'Console [{msg.type}]: {msg.text}'))\n    page.on('dialog', lambda dialog: dialog.accept())\n    page.on('pageerror', lambda error: print(f'Page error: {error}'))\n    page.on('requestfailed', lambda request: print(f'Request failed: {request.url}'))\n\n    # Request/Response events\n    def log_request(request):\n        print(f'\u2192 {request.method} {request.url}')\n\n    def log_response(response):\n        print(f'\u2190 {response.status} {response.url}')\n\n    page.on('request', log_request)\n    page.on('response', log_response)\n\n    # Download event\n    with page.expect_download() as download_info:\n        page.click('a#download-link')\n    download = download_info.value\n    download.save_as('/path/to/save/file.pdf')\n    print(f'Downloaded: {download.suggested_filename}')\n\n    # Popup event (new window/tab)\n    with page.expect_popup() as popup_info:\n        page.click('a[target=\"_blank\"]')\n    popup = popup_info.value\n    print(f'Popup URL: {popup.url}')\n    popup.close()\n\n    # File chooser event\n    with page.expect_file_chooser() as fc_info:\n        page.click('input[type=\"file\"]')\n    file_chooser = fc_info.value\n    file_chooser.set_files('/path/to/file.txt')\n\n    # Worker event (web workers, service workers)\n    page.on('worker', lambda worker: print(f'Worker created: {worker.url}'))\n\n    page.goto('https://example.com')\n\n    browser.close()\n```\n\n## Check Playwright Python for typing errors with MyPy\n\n```sh\nmypy playwright\n```\n\n## Format Playwright Python code with pre-commit\n\n```sh\npre-commit install\npre-commit run --all-files\n```\n\n## Perform Playwright operations using CLI\n\n```bash\n# Install browsers\npython -m playwright install\npython -m playwright install chromium firefox webkit\npython -m playwright install --with-deps\n\n# Code generation (record browser actions)\npython -m playwright codegen https://example.com\npython -m playwright codegen --target python-async https://example.com\n\n# Take screenshot\npython -m playwright screenshot https://example.com screenshot.png\npython -m playwright screenshot --full-page https://example.com full.png\n\n# Generate PDF\npython -m playwright pdf https://example.com page.pdf\n\n# Show trace viewer\npython -m playwright show-trace trace.zip\n\n# Open browser\npython -m playwright open https://example.com\n```\n\n## Perform Assertions with Auto-Waiting in Playwright Python\n\n```python\nfrom playwright.sync_api import sync_playwright, expect\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch()\n    page = browser.new_page()\n    page.goto('https://example.com')\n\n    # Page assertions\n    expect(page).to_have_title('My Page Title')\n    expect(page).to_have_title('My Page', timeout=10000)\n    expect(page).to_have_url('https://example.com/dashboard')\n    expect(page).to_have_url('**/dashboard')\n\n    # Visibility assertions\n    expect(page.locator('button')).to_be_visible()\n    expect(page.locator('.loading')).to_be_hidden()\n    expect(page.locator('.modal')).not_to_be_visible()\n\n    # State assertions\n    expect(page.locator('button')).to_be_enabled()\n    expect(page.locator('button.disabled')).to_be_disabled()\n    expect(page.locator('input')).to_be_focused()\n    expect(page.locator('input[readonly]')).to_be_editable()\n    expect(page.locator('input[type=\"checkbox\"]')).to_be_checked()\n    expect(page.locator('input[type=\"checkbox\"]')).not_to_be_checked()\n\n    # Text assertions\n    expect(page.locator('h1')).to_have_text('Welcome')\n    expect(page.locator('.message')).to_contain_text('Success')\n    expect(page.locator('h1')).to_have_text(['Item 1', 'Item 2', 'Item 3'])\n\n    # Value assertions\n    expect(page.locator('input')).to_have_value('test@example.com')\n    expect(page.locator('input')).to_have_value('test', timeout=5000)\n\n    # Count assertions\n    expect(page.locator('.items')).to_have_count(5)\n\n    # Attribute assertions\n    expect(page.locator('img')).to_have_attribute('src', '/logo.png')\n    expect(page.locator('a')).to_have_attribute('href', 'https://example.com')\n\n    # CSS assertions\n    expect(page.locator('.price')).to_have_css('color', 'rgb(255, 0, 0)')\n    expect(page.locator('h1')).to_have_css('font-size', '24px')\n\n    # Negations\n    expect(page.locator('.error')).not_to_be_visible()\n    expect(page.locator('button')).not_to_be_disabled()\n\n    browser.close()\n```\n\n## Handle Select Element Events and Bubbling in JavaScript\n\n```javascript\nwindow.result = {\n  onInput: null,\n  onChange: null,\n  onBubblingChange: null,\n  onBubblingInput: null,\n};\nlet select = document.querySelector('select');\nfunction makeEmpty() {\n  for (let i = select.options.length - 1; i >= 0; --i) {\n    select.remove(i);\n  }\n}\nfunction makeMultiple() {\n  select.setAttribute('multiple', true);\n}\nselect.addEventListener('input', () => {\n  result.onInput = Array.from(select.querySelectorAll('option:checked')).map((option) => {\n    return option.value;\n  });\n}, false);\nselect.addEventListener('change', () => {\n  result.onChange = Array.from(select.querySelectorAll('option:checked')).map((option) => {\n    return option.value;\n  });\n}, false);\ndocument.body.addEventListener('input', () => {\n  result.onBubblingInput = Array.from(select.querySelectorAll('option:checked')).map((option) => {\n    return option.value;\n  });\n}, false);\ndocument.body.addEventListener('change', () => {\n  result.onBubblingChange = Array.from(select.querySelectorAll('option:checked')).map((option) => {\n    return option.value;\n  });\n}, false);\n```\n\n## Handle Page Navigation and Wait Conditions in Playwright\n\n```python\nfrom playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch()\n    page = browser.new_page()\n\n    # Navigate with different wait conditions\n    page.goto('https://example.com', wait_until='networkidle')\n    page.goto('https://example.com', wait_until='domcontentloaded')\n    page.goto('https://example.com', wait_until='load')\n\n    # Navigation with timeout\n    try:\n        page.goto('https://slow-site.com', timeout=5000)\n    except TimeoutError:\n        print(\"Navigation timed out\")\n\n    # Wait for specific URL pattern\n    page.wait_for_url('**/dashboard')\n    page.wait_for_url('https://example.com/success')\n\n    # Wait for load state\n    page.wait_for_load_state('networkidle')\n\n    # Back and forward navigation\n    page.go_back()\n    page.go_forward()\n    page.reload()\n\n    # Wait for navigation triggered by action\n    with page.expect_navigation():\n        page.click('a[href=\"/next-page\"]')\n\n    browser.close()\n```\n\n## Setup Interstitial Event Listener JavaScript\n\n```javascript\nlet timesToShow = 0;\nfunction setupAnnoyingInterstitial(event, times, capture) {\n  timesToShow = times;\n  const listener = () => {\n    timesToShow--;\n    interstitial.classList.add('visible');\n    interstitial.getBoundingClientRect();\n    if (!timesToShow && event !== 'none') target.removeEventListener(event, listener, capture === 'capture');\n  };\n  if (event === 'hide' || event === 'timeout') {\n    target.classList.add('hidden');\n    listener();\n    if (event === 'timeout') interstitial.classList.add('timeout');\n  } else if (event === 'remove') {\n    target.classList.add('removed');\n    listener();\n  } else if (event === 'none') {\n    listener();\n  } else {\n    target.addEventListener(event, listener, capture === 'capture');\n  }\n}\n```\n\n## CSS Keyframe Animation for Horizontal Movement\n\n```css\n@keyframes move {\n  from {\n    marign-left: 0;\n  }\n  to {\n    margin-left: 100px;\n  }\n}\n```",
    "library": "playwright",
    "topic": "common-mistakes",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:26:43.927066"
}