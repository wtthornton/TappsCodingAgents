{
  "library": "expert_config_generator",
  "topic": "examples",
  "documentation": {
    "content": "## Parse Environment Variables with Panic (Go)\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"os\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype DatabaseConfig struct {\n    Host     string `required:\"true\"`\n    Port     int    `default:\"5432\"`\n    Username string `required:\"true\"`\n    Password string `required:\"true\"`\n    Database string `required:\"true\"`\n    SSLMode  string `default:\"require\"`\n}\n\nfunc main() {\n    // Set required environment variables\n    os.Setenv(\"DB_HOST\", \"postgres.example.com\")\n    os.Setenv(\"DB_USERNAME\", \"admin\")\n    os.Setenv(\"DB_PASSWORD\", \"secret123\")\n    os.Setenv(\"DB_DATABASE\", \"production\")\n\n    var dbConfig DatabaseConfig\n    // This will panic if any required field is missing\n    envconfig.MustProcess(\"db\", &dbConfig)\n\n    fmt.Printf(\"Connecting to %s@%s:%d/%s\\n\",\n        dbConfig.Username,\n        dbConfig.Host,\n        dbConfig.Port,\n        dbConfig.Database)\n\n    // Output:\n    // Connecting to admin@postgres.example.com:5432/production\n}\n```\n\n## Validate known environment variables only\n\n```Go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype StrictConfig struct {\n    Host string\n    Port int\n    User string\n}\n\nfunc main() {\n    // Set valid environment variables\n    os.Setenv(\"APP_HOST\", \"localhost\")\n    os.Setenv(\"APP_PORT\", \"8080\")\n    os.Setenv(\"APP_USER\", \"admin\")\n\n    // Set an invalid/unknown variable (typo)\n    os.Setenv(\"APP_PROT\", \"9090\")  // Typo: PROT instead of PORT\n\n    var config StrictConfig\n\n    // First, process the configuration\n    err := envconfig.Process(\"app\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Check for disallowed/unknown variables\n    err = envconfig.CheckDisallowed(\"app\", &config)\n    if err != nil {\n        log.Fatalf(\"Configuration error: %v\", err)\n    }\n\n    fmt.Printf(\"Config loaded: %+v\\n\", config)\n\n    // Output:\n    // Configuration error: unknown environment variable APP_PROT\n}\n```\n\n## Handle Various Go Types in Config Loading with envconfig\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os\"\n    \"time\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype ComplexConfig struct {\n    // Primitive types\n    StringValue  string\n    IntValue     int\n    Int64Value   int64\n    FloatValue   float64\n    BoolValue    bool\n\n    // Special types\n    Duration     time.Duration\n\n    // Collections\n    StringSlice  []string\n    IntSlice     []int\n\n    // Maps\n    StringMap    map[string]string\n    IntMap       map[string]int\n\n    // Pointers\n    OptionalStr  *string\n}\n\nfunc main() {\n    os.Setenv(\"CFG_STRING_VALUE\", \"hello\")\n    os.Setenv(\"CFG_INT_VALUE\", \"42\")\n    os.Setenv(\"CFG_INT64_VALUE\", \"9223372036854775807\")\n    os.Setenv(\"CFG_FLOAT_VALUE\", \"3.14159\")\n    os.Setenv(\"CFG_BOOL_VALUE\", \"true\")\n    os.Setenv(\"CFG_DURATION\", \"1h30m\")\n    os.Setenv(\"CFG_STRING_SLICE\", \"apple,banana,cherry\")\n    os.Setenv(\"CFG_INT_SLICE\", \"1,2,3,5,8,13\")\n    os.Setenv(\"CFG_STRING_MAP\", \"env:prod,region:us-east,zone:1a\")\n    os.Setenv(\"CFG_INT_MAP\", \"cpu:4,memory:16,disk:500\")\n    os.Setenv(\"CFG_OPTIONAL_STR\", \"present\")\n\n    var config ComplexConfig\n    err := envconfig.Process(\"cfg\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"String: %s\\n\", config.StringValue)\n    fmt.Printf(\"Int: %d\\n\", config.IntValue)\n    fmt.Printf(\"Int64: %d\\n\", config.Int64Value)\n    fmt.Printf(\"Float: %.5f\\n\", config.FloatValue)\n    fmt.Printf(\"Bool: %v\\n\", config.BoolValue)\n    fmt.Printf(\"Duration: %s\\n\", config.Duration)\n    fmt.Printf(\"String Slice: %v\\n\", config.StringSlice)\n    fmt.Printf(\"Int Slice: %v\\n\", config.IntSlice)\n    fmt.Printf(\"String Map: %v\\n\", config.StringMap)\n    fmt.Printf(\"Int Map: %v\\n\", config.IntMap)\n    fmt.Printf(\"Optional: %s\\n\", *config.OptionalStr)\n\n    // Output:\n    // String: hello\n    // Int: 42\n    // Int64: 9223372036854775807\n    // Float: 3.14159\n    // Bool: true\n    // Duration: 1h30m0s\n    // String Slice: [apple banana cherry]\n    // Int Slice: [1 2 3 5 8 13]\n    // String Map: map[env:prod region:us-east zone:1a]\n    // Int Map: map[cpu:4 disk:500 memory:16]\n    // Optional: present\n}\n```\n\n## Go: Struct Tags for Environment Variable Mapping\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype AppConfig struct {\n    // Custom environment variable name\n    ServiceName string `envconfig:\"SERVICE_HOST\"`\n\n    // Split camelCase automatically\n    MaxConnectionPoolSize int `split_words:\"true\"`\n\n    // Default value if not set\n    LogLevel string `default:\"info\"`\n\n    // Required field - error if missing\n    APIKey string `required:\"true\"`\n\n    // Ignored field - won't be populated\n    InternalField string `ignored:\"true\"`\n\n    // Multiple tags combined\n    RetryAttempts int `default:\"3\" desc:\"Number of retry attempts\"`\n}\n\nfunc main() {\n    os.Setenv(\"SERVICE_HOST\", \"api.example.com\")\n    os.Setenv(\"APP_MAX_CONNECTION_POOL_SIZE\", \"50\")\n    os.Setenv(\"APP_API_KEY\", \"sk_live_abc123xyz789\")\n\n    var config AppConfig\n    err := envconfig.Process(\"app\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"Service: %s\\n\", config.ServiceName)\n    fmt.Printf(\"Pool Size: %d\\n\", config.MaxConnectionPoolSize)\n    fmt.Printf(\"Log Level: %s\\n\", config.LogLevel)\n    fmt.Printf(\"API Key: %s\\n\", config.APIKey)\n    fmt.Printf(\"Retry Attempts: %d\\n\", config.RetryAttempts)\n\n    // Output:\n    // Service: api.example.com\n    // Pool Size: 50\n    // Log Level: info\n    // API Key: sk_live_abc123xyz789\n    // Retry Attempts: 3\n}\n```\n\n## Process configuration struct using envconfig in Go\n\n```Go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"log\"\n\t\"time\"\n\n\t\"github.com/kelseyhightower/envconfig\"\n)\n\ntype Specification struct {\n\tDebug       bool\n\tPort        int\n\tUser        string\n\tUsers       []string\n\tRate        float32\n\tTimeout     time.Duration\n\tColorCodes  map[string]int\n}\n\nfunc main() {\n\tvar s Specification\n\terr := envconfig.Process(\"myapp\", &s)\n\tif err != nil {\n\t\tlog.Fatal(err.Error())\n\t}\n\tformat := \"Debug: %v\\nPort: %d\\nUser: %s\\nRate: %f\\nTimeout: %s\\n\"\n\t_, err = fmt.Printf(format, s.Debug, s.Port, s.User, s.Rate, s.Timeout)\n\tif err != nil {\n\t\tlog.Fatal(err.Error())\n\t}\n\n\tfmt.Println(\"Users:\")\n\tfor _, u := range s.Users {\n\t\tfmt.Printf(\"  %s\\n\", u)\n\t}\n\n\tfmt.Println(\"Color codes:\")\n\tfor k, v := range s.ColorCodes {\n\t\tfmt.Printf(\"  %s: %d\\n\", k, v)\n\t}\n}\n```\n\n## Parse Environment Variables into Struct (Go)\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os\"\n    \"time\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype Config struct {\n    Debug       bool          `required:\"true\"`\n    Port        int           `default:\"8080\"`\n    Host        string        `default:\"localhost\"`\n    Timeout     time.Duration `default:\"30s\"`\n    AdminUsers  []string\n    RateLimits  map[string]int\n}\n\nfunc main() {\n    // Set environment variables\n    os.Setenv(\"MYAPP_DEBUG\", \"true\")\n    os.Setenv(\"MYAPP_PORT\", \"3000\")\n    os.Setenv(\"MYAPP_HOST\", \"0.0.0.0\")\n    os.Setenv(\"MYAPP_TIMEOUT\", \"5m\")\n    os.Setenv(\"MYAPP_ADMINUSERS\", \"alice,bob,charlie\")\n    os.Setenv(\"MYAPP_RATELIMITS\", \"api:1000,upload:100\")\n\n    var config Config\n    err := envconfig.Process(\"myapp\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"Debug: %v\\n\", config.Debug)\n    fmt.Printf(\"Port: %d\\n\", config.Port)\n    fmt.Printf(\"Host: %s\\n\", config.Host)\n    fmt.Printf(\"Timeout: %s\\n\", config.Timeout)\n    fmt.Printf(\"AdminUsers: %v\\n\", config.AdminUsers)\n    fmt.Printf(\"RateLimits: %v\\n\", config.RateLimits)\n\n    // Output:\n    // Debug: true\n    // Port: 3000\n    // Host: 0.0.0.0\n    // Timeout: 5m0s\n    // AdminUsers: [alice bob charlie]\n    // RateLimits: map[api:1000 upload:100]\n}\n```\n\n## Define struct with envconfig tags in Go\n\n```Go\ntype Specification struct {\n\tManualOverride1 string `envconfig:\"manual_override_1\"`\n\tDefaultVar      string `default:\"foobar\"`\n\tRequiredVar     string `required:\"true\"`\n\tIgnoredVar      string `ignored:\"true\"`\n\tAutoSplitVar    string `split_words:\"true\"`\n\tRequiredAndAutoSplitVar    string `required:\"true\" split_words:\"true\"`\n}\n```\n\n## Implement custom SMS provider weight decoder with Go and set SMS_PROVIDER_WITH_WEIGHT in Bash\n\n```Bash\nexport SMS_PROVIDER_WITH_WEIGHT= `IND=[{\"name\":\"SMSProvider1\",\"weight\":70},{\"name\":\"SMSProvider2\",\"weight\":30}];US=[{\"name\":\"SMSProvider1\",\"weight\":100}]`\n```\n\n## Implement custom SMS provider weight decoder with Go and set SMS_PROVIDER_WITH_WEIGHT in Bash\n\n```Go\ntype providerDetails struct {\n\tName   string\n\tWeight int\n}\n\ntype SMSProviderDecoder map[string][]providerDetails\n\nfunc (sd *SMSProviderDecoder) Decode(value string) error {\n\tsmsProvider := map[string][]providerDetails{}\n\tpairs := strings.Split(value, \";\")\n\tfor _, pair := range pairs {\n\t\tproviderdata := []providerDetails{}\n\t\tkvpair := strings.Split(pair, \"=\")\n\t\tif len(kvpair) != 2 {\n\t\t\treturn fmt.Errorf(\"invalid map item: %q\", pair)\n\t\t}\n\t\terr := json.Unmarshal([]byte(kvpair[1]), &providerdata)\n\t\tif err != nil {\n\t\t\treturn fmt.Errorf(\"invalid map json: %w\", err)\n\t\t}\n\t\tsmsProvider[kvpair[0]] = providerdata\n\n\t}\n\t*sd = SMSProviderDecoder(smsProvider)\n\treturn nil\n}\n\ntype SMSProviderConfig struct {\n\tProviderWithWeight SMSProviderDecoder `envconfig:\"SMS_PROVIDER_WITH_WEIGHT\"`\n}\n```\n\n## Go: Custom Decoder for Complex Types\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net\"\n    \"os\"\n    \"strings\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\n// IPAddress with custom decoder\ntype IPAddress net.IP\n\nfunc (ip *IPAddress) Decode(value string) error {\n    parsed := net.ParseIP(value)\n    if parsed == nil {\n        return fmt.Errorf(\"invalid IP address: %s\", value)\n    }\n    *ip = IPAddress(parsed)\n    return nil\n}\n\n// CIDR with custom decoder\ntype CIDR struct {\n    IP      net.IP\n    Network *net.IPNet\n}\n\nfunc (c *CIDR) Decode(value string) error {\n    ip, network, err := net.ParseCIDR(value)\n    if err != nil {\n        return fmt.Errorf(\"invalid CIDR: %s\", value)\n    }\n    c.IP = ip\n    c.Network = network\n    return nil\n}\n\n// AllowList with custom decoder\ntype AllowList []string\n\nfunc (al *AllowList) Decode(value string) error {\n    items := strings.Split(value, \",\")\n    for i, item := range items {\n        items[i] = strings.TrimSpace(item)\n    }\n    *al = AllowList(items)\n    return nil\n}\n\ntype NetworkConfig struct {\n    ServerIP    IPAddress  `envconfig:\"SERVER_IP\"`\n    SubnetCIDR  CIDR       `envconfig:\"SUBNET\"`\n    AllowedIPs  AllowList  `envconfig:\"ALLOWED_IPS\"`\n}\n\nfunc main() {\n    os.Setenv(\"SERVER_IP\", \"192.168.1.100\")\n    os.Setenv(\"SUBNET\", \"10.0.0.0/24\")\n    os.Setenv(\"ALLOWED_IPS\", \"192.168.1.1, 192.168.1.2, 192.168.1.3\")\n\n    var config NetworkConfig\n    err := envconfig.Process(\"\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"Server IP: %s\\n\", net.IP(config.ServerIP).String())\n    fmt.Printf(\"Subnet: %s\\n\", config.SubnetCIDR.Network.String())\n    fmt.Printf(\"Allowed IPs: %v\\n\", []string(config.AllowedIPs))\n\n    // Output:\n    // Server IP: 192.168.1.100\n    // Subnet: 10.0.0.0/24\n    // Allowed IPs: [192.168.1.1 192.168.1.2 192.168.1.3]\n}\n```\n\n## Load Hierarchical Config with Nested Structs in Go\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os\"\n    \"time\"\n\n    \"github.com/kelseyhightower/envconfig\"\n)\n\ntype DatabaseConfig struct {\n    Host            string `default:\"localhost\"`\n    Port            int    `default:\"5432\"`\n    MaxConnections  int    `split_words:\"true\" default:\"10\"`\n}\n\ntype CacheConfig struct {\n    Host    string        `default:\"localhost\"`\n    Port    int           `default:\"6379\"`\n    TTL     time.Duration `default:\"1h\"`\n}\n\ntype AppConfig struct {\n    Name     string `default:\"myapp\"`\n    Version  string `default:\"1.0.0\"`\n\n    // Nested with prefix: APP_DB_*\n    DB       DatabaseConfig `envconfig:\"db\"`\n\n    // Nested with prefix: APP_CACHE_*\n    Cache    CacheConfig `envconfig:\"cache\"`\n\n    // Anonymous embedded struct (no additional prefix)\n    ServerConfig\n}\n\ntype ServerConfig struct {\n    Port    int    `default:\"8080\"`\n    Timeout time.Duration `default:\"30s\"`\n}\n\nfunc main() {\n    os.Setenv(\"APP_NAME\", \"production-api\")\n    os.Setenv(\"APP_DB_HOST\", \"postgres.prod.example.com\")\n    os.Setenv(\"APP_DB_PORT\", \"5433\")\n    os.Setenv(\"APP_DB_MAX_CONNECTIONS\", \"50\")\n    os.Setenv(\"APP_CACHE_HOST\", \"redis.prod.example.com\")\n    os.Setenv(\"APP_CACHE_TTL\", \"2h\")\n    os.Setenv(\"APP_PORT\", \"3000\")\n\n    var config AppConfig\n    err := envconfig.Process(\"app\", &config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Printf(\"App: %s v%s\\n\", config.Name, config.Version)\n    fmt.Printf(\"Server Port: %d\\n\", config.Port)\n    fmt.Printf(\"Database: %s:%d (max %d connections)\\n\",\n        config.DB.Host, config.DB.Port, config.DB.MaxConnections)\n    fmt.Printf(\"Cache: %s:%d (TTL: %s)\\n\",\n        config.Cache.Host, config.Cache.Port, config.Cache.TTL)\n\n    // Output:\n    // App: production-api v1.0.0\n    // Server Port: 3000\n    // Database: postgres.prod.example.com:5433 (max 50 connections)\n    // Cache: redis.prod.example.com:6379 (TTL: 2h0m0s)\n}\n```",
    "library": "expert_config_generator",
    "topic": "common-mistakes",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:26:40.004196"
}