{
  "library": "last",
  "topic": "best-practices",
  "documentation": {
    "content": "## Contained\n\n```APIDOC\n## Contained\n\n### Description\nInvokes the command on all child items in a targeted container. Optional condition arguments can further restrict the set of objects.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nContained <command> [condition]\n\n### Parameters\n- **command** (string) - Required - The command to execute on the child items.\n- **condition** (string) - Optional - A condition to further restrict the set of objects.\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## Facet\n\n```APIDOC\n## Facet\n\n### Description\nInvokes the command on all appropriate objects within your facet's map bounds. Optional condition arguments can further restrict the set of objects.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nFacet <command> [condition]\n\n### Parameters\n- **command** (string) - Required - The command to execute on the objects.\n- **condition** (string) - Optional - A condition to further restrict the set of objects.\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## WriteProfiles\n\n```APIDOC\n## WriteProfiles\n\n### Description\nGenerates a log files containing performance diagnostic information.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nWriteProfiles\n\n### Parameters\nNone\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## C#: Managing Multiple Abilities with Cooldowns\n\n```csharp\n// File: Scripts/Custom/Custom Abilities/CustomAbility.cs\n// Available abilities: FlameStrikeTargeted, FlameStrikeAoe, Charge, Firebolt,\n// Ambush, Geyser, IcePrison, WalkingBomb, MeteorStrike, MeteorShower,\n// Thunderstorm, ThrowBoulder, Zap, ToxicRain, ToxicSpores, ImpaleAoe\n\nnamespace Server.Mobiles\n{\n    // Example: Using multiple abilities with cooldowns\n    public class IceMage : BaseCreature\n    {\n        private DateTime m_NextIcePrison;\n        private DateTime m_NextGeyser;\n\n        public override void OnThink()\n        {\n            base.OnThink();\n\n            if (Combatant == null || !Alive)\n                return;\n\n            // Ice Prison ability (30 second cooldown)\n            if (DateTime.UtcNow >= m_NextIcePrison && Utility.RandomDouble() < 0.15)\n            {\n                IcePrison ip = new IcePrison();\n                ip.SetDuration(5); // 5 second freeze\n                CustomAbility.CheckTrigger(this, ip);\n                m_NextIcePrison = DateTime.UtcNow + TimeSpan.FromSeconds(30);\n            }\n\n            // Geyser ability (15 second cooldown)\n            if (DateTime.UtcNow >= m_NextGeyser && Utility.RandomDouble() < 0.2)\n            {\n                Geyser geyser = new Geyser();\n                geyser.SetDamage(20, 30);\n                geyser.SetKnockback(5); // Knockback distance\n                CustomAbility.CheckTrigger(this, geyser);\n                m_NextGeyser = DateTime.UtcNow + TimeSpan.FromSeconds(15);\n            }\n        }\n    }\n}\n```\n\n## UnfreezeWorld\n\n```APIDOC\n## UnfreezeWorld\n\n### Description\nMakes every static item on all maps dynamic.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nUnfreezeWorld\n\n### Parameters\nNone\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## Create Items based on Design - C#\n\n```csharp\nusing System;\nusing Server.Targeting;\nusing Server.Items;\nusing UOArchitectInterface;\nusing System.Collections;\n\nnamespace Server.Engines.UOArchitect\n{\n\tpublic class BuildDesignTarget : Target\n\t{\n\t\tprivate BuildDesignRequest m_Request;\n\n\t\tpublic BuildDesignTarget(BuildDesignRequest request) : base( -1, true, TargetFlags.None )\n\t\t{\n\t\t\tm_Request = request;\n\t\t}\n\n\t\tprotected override void OnTargetCancel(Mobile from, TargetCancelType cancelType)\n\t\t{\n\t\t\tbase.OnTargetCancel(from, cancelType);\n\t\t\tm_Request.SendResponse(null);\n\t\t}\n\n\t\tprotected override void OnTarget( Mobile from, object targeted )\n\t\t{\n\t\t\tif(m_Request.Items.Count == 0)\n\t\t\t\tm_Request.SendResponse(null);\n\n\t\t\t// Used to store the serials of the created items\n\t\t\tArrayList itemSerials = new ArrayList(m_Request.Items.Count);\n\n\t\t\tIPoint3D p = targeted as IPoint3D;\n\n\t\t\tif ( p != null )\n\t\t\t{\n\t\t\t\tif ( p is Item )\n\t\t\t\t\tp = ((Item)p).GetWorldLocation();\n\n\t\t\t\tfor(int i=0; i < m_Request.Items.Count; ++i)\n\t\t\t\t{\n\t\t\t\t\tDesignItem designItem = m_Request.Items[i];\n\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tPoint3D location = new Point3D(p.X + designItem.X, p.Y + designItem.Y, p.Z + designItem.Z);\n\t\t\t\t\t\t\n\t\t\t\t\t\tItem item = CreateItem(designItem.ItemID); \n\t\t\t\t\t\titem.MoveToWorld(location, from.Map);\n\t\t\t\t\t\titem.Hue = designItem.Hue;\n\t\t\t\t\t\titemSerials.Add(item.Serial.Value);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(Exception e)\n\t\t\t\t\t{\n\t\t\t\t\t\tConsole.WriteLine(\"Unable to import item: \" + e.Message);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tint[] serials = (int[])itemSerials.ToArray(typeof(int));\n\n\t\t\t// send the serial list back to the client\n\t\t\tm_Request.SendResponse(new BuildResponse(serials));\n\t\t}\n\n\t\t// Create the appropriate item class - Defaults to a Static Item\n\t\tprivate Item CreateItem(int ItemID)\n\t\t{\n\t\t\tItem item = null;\n\n\t\t\tswitch(ItemID)\n\t\t\t{\n\t\t\t\t\t// Don't import nodraw, node crystals, odd items, etc. \n\t\t\t\t\t// Add any unwanted items here. \n\t\t\t\t\t// TODO: Boat parts: planks, tillerman, etc. \n\t\t\t\tcase 0x0001: \n\t\t\t\tcase 0x1F19: \n\t\t\t\tcase 0x0FB7: \n\t\t\t\t\tbreak; \n\t\t\t\t\n\t\t\t\t/* \n\t\t\t\t* Put all usable items here, for example, forges, anvils, \n\t\t\t\t* training dummies, lights, containers, messageboards, etc. \n\t\t\t\t* We'll need to wait until some of them are scripted. \n\t\t\t\t* \n\t\t\t\t* The following are some examples, I intend to finish things \n\t\t\t\t* up as quickly as I can. \n\t\t\t\t*/ \n\t\t\t\tcase 0x0FB1:  //forge \n\t\t\t\t\titem = new SmallForgeAddon();\n\t\t\t\t\tbreak; \n\t\t\t\tcase 0x0FAF:  //anvil east \n\t\t\t\t\titem = new AnvilEastAddon(); \n\t\t\t\t\tbreak; \n\t\t\t\tcase 0x0FB0:  //anvil south \n\t\t\t\t\titem = new AnvilSouthAddon(); \n\t\t\t\t\tbreak; \n\n\t\t\t\t\t// TODO: Gates \n\t\t\t\t   \n\t\t\t\t\t/* \n\t\t\t\t\t* Now create all of the doors according to graphic. \n\t\t\t\t\t* NOTE: Some doors seem to open the wrong way, but \n\t\t\t\t\t*       there's no way to determine correct CCW/CW \n\t\t\t\t\t*       from the POL file. \n\t\t\t\t\t*/ \n\n\t\t\t\t\t// Metal Doors 2 \n\t\t\t\tcase 0x0675: \n\t\t\t\t\titem = new MetalDoor2( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0677: \n\t\t\t\t\titem = new MetalDoor2( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x067D: \n\t\t\t\t\titem = new MetalDoor2( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x067F: \n\t\t\t\t\titem = new MetalDoor2( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n    \n\t\t\t\t\t// Barred Metal Doors \n\t\t\t\tcase 0x0685: \n\t\t\t\t\titem = new BarredMetalDoor( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0687: \n\t\t\t\t\titem = new BarredMetalDoor( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x068D: \n\t\t\t\t\titem = new BarredMetalDoor( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x068F: \n\t\t\t\t\titem = new BarredMetalDoor( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n    \n\t\t\t\t\t// Rattan Doors \n\t\t\t\tcase 0x0695: \n\t\t\t\t\titem = new RattanDoor( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0697: \n\t\t\t\t\titem = new RattanDoor( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x069D: \n\t\t\t\t\titem = new RattanDoor( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x069F: \n\t\t\t\t\titem = new RattanDoor( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n                \n\t\t\t\t\t// Dark Wood Doors \n\t\t\t\tcase 0x06A5: \n\t\t\t\t\titem = new DarkWoodDoor( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06A7: \n\t\t\t\t\titem = new DarkWoodDoor( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06AD: \n\t\t\t\t\titem = new DarkWoodDoor( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06AF: \n\t\t\t\t\titem = new DarkWoodDoor( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n                   \n\t\t\t\t\t// Medium Wood Doors \n\t\t\t\tcase 0x06B5: \n\t\t\t\t\titem = new MediumWoodDoor( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06B7: \n\t\t\t\t\titem = new MediumWoodDoor( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06BD: \n\t\t\t\t\titem = new MediumWoodDoor( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06BF: \n\t\t\t\t\titem = new MediumWoodDoor( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n    \n\t\t\t\t\t// Metal Doors \n\t\t\t\tcase 0x06C5: \n\t\t\t\t\titem = new MetalDoor( DoorFacing.WestCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06C7: \n\t\t\t\t\titem = new MetalDoor( DoorFacing.EastCCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06CD: \n\t\t\t\t\titem = new MetalDoor( DoorFacing.SouthCW ); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06CF: \n\t\t\t\t\titem = new MetalDoor( DoorFacing.NorthCCW ); \n\t\t\t\t\tbreak;\n    \ndefault:\n\t\t\t\t\titem = new Static( ItemID );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t}\n}\n\n```\n\n## TraceInternal\n\n```APIDOC\n## TraceInternal\n\n### Description\nGenerates a log file describing all items in the 'internal' map.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nTraceInternal\n\n### Parameters\nNone\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## DesignInsert\n\n```APIDOC\n## DesignInsert\n\n### Description\nInserts multiple targeted items into a customizable house's design.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nDesignInsert [allItems=false]\n\n### Parameters\n- **allItems** (boolean) - Optional - Whether to insert all items.\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n\n## Add Item Variations\n\n```APIDOC\n## POST /items/add\n\n### Description\nAdds various items to the game, with options to specify quantity and additional attributes.\n\n### Method\nPOST\n\n### Endpoint\n/items/add\n\n### Parameters\n#### Request Body\n- **itemName** (string) - Required - The name of the item to add.\n- **amount** (integer) - Optional - The quantity of the item to add.\n- **amountFrom** (integer) - Optional - The starting amount for a range.\n- **amountTo** (integer) - Optional - The ending amount for a range.\n- **spawnName** (string) - Optional - The name of the spawn for ProximitySpawner.\n- **minDelay** (string) - Optional - The minimum delay for ProximitySpawner.\n- **maxDelay** (string) - Optional - The maximum delay for ProximitySpawner.\n- **team** (string) - Optional - The team associated with ProximitySpawner.\n- **homeRange** (integer) - Optional - The home range for ProximitySpawner.\n- **triggerRange** (integer) - Optional - The trigger range for ProximitySpawner.\n- **spawnMessage** (string) - Optional - The message displayed when spawning.\n- **instantFlag** (boolean) - Optional - Whether spawning is instant.\n- **facing** (DoorFacing) - Optional - The facing direction for RattanDoor.\n- **itemID** (string) - Optional - The item ID for RaisableItem.\n- **maxElevation** (integer) - Optional - The maximum elevation for RaisableItem.\n- **closeDelay** (string) - Optional - The close delay for RaisableItem.\n- **moveSound** (string) - Optional - The move sound for RaisableItem.\n- **stopSound** (string) - Optional - The stop sound for RaisableItem.\n- **pageCount** (integer) - Optional - The page count for RedBook.\n- **writable** (boolean) - Optional - Whether RedBook is writable.\n- **title** (string) - Optional - The title for RedBook.\n- **author** (string) - Optional - The author for RedBook.\n- **fill** (string) - Optional - The fill type for RedVelvetGiftBox.\n- **skill** (RepairSkillType) - Optional - The skill type for RepairDeed.\n- **level** (integer) - Optional - The level for RepairDeed.\n- **recipeID** (string) - Optional - The recipe ID for RecipeScroll.\n- **account** (string) - Optional - The account associated with RedSoulstone.\n\n### Request Example\n```json\n{\n  \"itemName\": \"ProtectionScroll\",\n  \"amount\": 10\n}\n```\n```json\n{\n  \"itemName\": \"ProximitySpawner\",\n  \"amount\": 5,\n  \"minDelay\": \"00:01:00\",\n  \"maxDelay\": \"00:05:00\",\n  \"spawnName\": \"Goblin\"\n}\n```\n```json\n{\n  \"itemName\": \"RattanDoor\",\n  \"facing\": \"WestCW\"\n}\n```\n```json\n{\n  \"itemName\": \"RedBook\",\n  \"pageCount\": 100,\n  \"writable\": true,\n  \"title\": \"My Awesome Book\",\n  \"author\": \"AI Assistant\"\n}\n```\n```json\n{\n  \"itemName\": \"RepairDeed\",\n  \"skill\": \"Smithing\",\n  \"level\": 100\n}\n```\n\n### Response\n#### Success Response (200)\n- **message** (string) - Confirmation message.\n\n#### Response Example\n```json\n{\n  \"message\": \"Item added successfully.\"\n}\n```\n```\n\n## BringToPack\n\n```APIDOC\n## BringToPack\n\n### Description\nBrings a targeted item to your backpack.\n\n### Method\nN/A (Game Master Command)\n\n### Endpoint\nBringToPack\n\n### Parameters\nNone\n\n### Request Example\nN/A\n\n### Response\nN/A\n\n```\n",
    "library": "last",
    "topic": "best-practices",
    "source": "api"
  },
  "source": "api",
  "saved_at": "2026-02-05T13:42:28.717279"
}