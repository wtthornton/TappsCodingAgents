{
  "library": "scorer_registry",
  "topic": "best-practices",
  "documentation": {
    "content": "## Platform-Specific Overrides for Package Assets\n\n```yaml\npackages:\n  - type: github_release\n    repo_owner: sharkdp\n    repo_name: bat\n    description: A cat(1) clone with wings\n    version_constraint: \"true\"\n    asset: bat-{{.Version}}-{{.Arch}}-{{.OS}}.{{.Format}}\n    format: tar.gz\n    windows_arm_emulation: true\n    files:\n      - name: bat\n        src: \"{{.AssetWithoutExt}}/bat\"\n    replacements:\n      amd64: x86_64\n      arm64: aarch64\n      darwin: apple-darwin\n      linux: unknown-linux-musl\n      windows: pc-windows-msvc\n    overrides:\n      - goos: windows\n        format: zip\n```\n\n## Version Constraint Expressions in GitHub Releases\n\n```yaml\npackages:\n  - type: github_release\n    repo_owner: jqlang\n    repo_name: jq\n    version_prefix: jq-\n    version_constraint: \"false\"\n    version_overrides:\n      # No assets for very old versions\n      - version_constraint: semver(\"<= 1.2\")\n        no_asset: true\n      # Specific version with unique asset pattern\n      - version_constraint: Version == \"jq-1.5rc1\"\n        asset: jq-{{.OS}}-{{.Arch}}-static\n        format: raw\n        supported_envs:\n          - linux/amd64\n          - windows\n      # Range with semver comparison\n      - version_constraint: semver(\"<= 1.6\")\n        asset: jq-{{.OS}}\n        format: raw\n        replacements:\n          linux: linux64\n          darwin: osx\n          windows: win64\n      # Latest versions with attestations\n      - version_constraint: \"true\"\n        asset: jq-{{.OS}}-{{.Arch}}\n        format: raw\n        checksum:\n          type: github_release\n          asset: sha256sum.txt\n          algorithm: sha256\n        github_artifact_attestations:\n          signer_workflow: jqlang/jq/.github/workflows/ci.yml\n```\n\n## Scaffolding New Packages with cmdx\n\n```bash\n# Scaffold a new package from a GitHub repository\ncmdx scaffold cli/cli\n\n# Scaffold with specific commands to test\ncmdx scaffold -cmd \"gh,gh version\" cli/cli\n\n# Scaffold with version limit (only test last N versions)\ncmdx scaffold -l 5 cli/cli\n\n# Scaffold with custom configuration file\ncmdx scaffold -c custom-scaffold.yaml cli/cli\n\n# Directory structure created:\n# pkgs/\n#   cli/\n#     cli/\n#       pkg.yaml       # Test configuration\n#       registry.yaml  # Package definition\n```\n\n## Referencing Packages in aqua.yaml\n\n```yaml\n---\n# aqua - Declarative CLI Version Manager\n# https://aquaproj.github.io/\nchecksum:\n  enabled: true\nregistries:\n  - type: standard\n    ref: v4.275.0  # Pin registry version for reproducibility\npackages:\n  - name: cli/cli@v2.85.0\n  - name: jqlang/jq@jq-1.8.1\n  - name: hashicorp/terraform@v1.9.0\n  - name: BurntSushi/ripgrep@14.1.0\n  - name: sharkdp/bat@v0.24.0\n```\n\n## GitHub Release Package Definition in YAML\n\n```yaml\n# yaml-language-server: $schema=https://raw.githubusercontent.com/aquaproj/aqua/main/json-schema/registry.json\npackages:\n  - type: github_release\n    repo_owner: cli\n    repo_name: cli\n    description: GitHub's official command line tool\n    files:\n      - name: gh\n        src: gh_{{{{trimV .Version}}}}_{{.OS}}_{{.Arch}}/bin/gh\n    version_constraint: \"false\"\n    version_overrides:\n      - version_constraint: semver(\"<= 2.20.0\")\n        asset: gh_{{{{trimV .Version}}}}_{{.OS}}_{{.Arch}}.{{.Format}}\n        format: tar.gz\n        rosetta2: true\n        windows_arm_emulation: true\n        overrides:\n          - goos: windows\n            format: zip\n            files:\n              - name: gh\n                src: bin/gh.exe\n        replacements:\n          darwin: macOS\n        checksum:\n          type: github_release\n          asset: gh_{{{{trimV .Version}}}_checksums.txt\n          algorithm: sha256\n      - version_constraint: \"true\"\n        asset: gh_{{{{trimV .Version}}}}_{{.OS}}_{{.Arch}}.{{.Format}}\n        format: zip\n        overrides:\n          - goos: linux\n            format: tar.gz\n        checksum:\n          type: github_release\n          asset: gh_{{{{trimV .Version}}}_checksums.txt\n          algorithm: sha256\n        github_artifact_attestations:\n          signer_workflow: cli/cli/.github/workflows/deployment.yml\n\n```\n\n## Testing Packages with cmdx\n\n```bash\n# Test a specific package\ncmdx test cli/cli\n\n# Test with container recreation\ncmdx test -r cli/cli\n\n# Connect to container for debugging\ncmdx connect linux amd64\ncmdx connect darwin arm64\n\n# Remove package from test containers\ncmdx rmp cli/cli\n\n# Manage containers\ncmdx start    # Start test containers\ncmdx stop     # Stop containers\ncmdx rm       # Remove containers\n```\n\n## Define GitHub Release Package Alias (YAML)\n\n```yaml\npackages:\n  - type: github_release\n    repo_owner: jqlang\n    repo_name: jq\n    aliases:\n      - name: stedolan/jq  # Original repository owner\n    description: Command-line JSON processor\n```\n\n## Creating Pull Requests for New Packages with cmdx\n\n```bash\n# Create PR for a new package\ncmdx new cli/cli\n\n# The command will:\n# 1. Check for uncommitted changes\n# 2. Get package name from current branch\n# 3. Create PR using aqua-registry create-pr-new-pkg\n\n# Resolve conflicts in registry.yaml\ncmdx resolve-conflict 123  # PR number\n\n# Summarize changes in a PR\ncmdx summarize 123\n\n# List release assets for a package version\ncmdx ls-assets -r cli/cli v2.85.0\n```\n\n## HTTP Package Definition in YAML\n\n```yaml\n# yaml-language-server: $schema=https://raw.githubusercontent.com/aquaproj/aqua/main/json-schema/registry.json\npackages:\n  - type: http\n    repo_owner: hashicorp\n    repo_name: terraform\n    url: https://releases.hashicorp.com/terraform/{{trimV .Version}}/terraform_{{{{trimV .Version}}}}_{{.OS}}_{{.Arch}}.zip\n    description: Terraform enables you to safely and predictably create, change, and improve infrastructure\n    supported_envs:\n      - linux\n      - darwin\n      - amd64\n    checksum:\n      type: http\n      url: https://releases.hashicorp.com/terraform/{{trimV .Version}}/terraform_{{{{trimV .Version}}}_SHA256SUMS\n      algorithm: sha256\n    version_constraint: semver(\">= 1.0.2\")\n    version_overrides:\n      - version_constraint: \"true\"\n        rosetta2: true\n\n```\n\n## Generating the Main Registry with cmdx\n\n```bash\n# Regenerate registry.yaml from all pkg definitions\ncmdx gr\n\n# Or using aqua exec directly\naqua exec -- aqua-registry gr\n\n# The registry.yaml aggregates all packages:\n# pkgs/*/*/registry.yaml -> registry.yaml\n# pkgs/*/*/*/registry.yaml -> registry.yaml\n```",
    "library": "registry",
    "topic": "best-practices",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-02-03T09:49:37.543368"
}