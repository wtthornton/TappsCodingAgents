{
  "library": "tapps_agents",
  "topic": "state-manager",
  "documentation": {
    "content": "## TappsCodingAgents State Manager\n\n### Overview\nManages workflow and epic state persistence. Key files:\n- `tapps_agents/workflow/state_manager.py` — Workflow step state\n- `tapps_agents/epic/state_manager.py` — Epic/story state\n\n### EpicStateManager API\n```python\nfrom tapps_agents.epic.state_manager import EpicStateManager\n\n# Constructor takes project_root (not state_dir)\nmanager = EpicStateManager(project_root=Path('.'))\n\n# save_state takes state dict (not epic_id)\nmanager.save_state(state)\n\n# update_story_state takes state dict first\nmanager.update_story_state(state, story_id, status='completed')\n```\n\n### State Storage\nState files stored in `.tapps-agents/epic-state/` as JSON.\n\n### Known Issues (2026-02)\n1. Missing timezone import at lines 284, 294 — uses `datetime.timezone.utc` but `timezone` not imported\n2. No atomic writes — state corruption possible on crash\n3. No state schema validation on load\n\n### Best Practices\n- Always use `save_state(state)` with the full state dict\n- State is JSON-serializable; avoid storing non-serializable objects\n- Use write-to-temp-then-rename for crash safety",
    "library": "tapps_agents",
    "topic": "state-manager",
    "source": "audit"
  },
  "source": "audit",
  "saved_at": "2026-02-06T10:00:00.000000"
}
