{
  "library": "output_formatter",
  "topic": null,
  "documentation": {
    "content": "## Optique Parser Primitives and Combinators\n\n```apidoc\nParser Primitives and Combinators:\n\noption(name: string, valueParser?: ValueParser<T>): Parser<T | undefined>\n  - Handles a single command-line option (e.g., --name).\n  - Parameters:\n    - name: The name of the option (e.g., \"--name\", \"-v\").\n    - valueParser: Optional. A parser for the option's value.\n  - Returns: A Parser that yields the option's value or undefined.\n\nargument(name: string, valueParser?: ValueParser<T>): Parser<T>\n  - Handles a positional command-line argument.\n  - Parameters:\n    - name: The name of the argument.\n    - valueParser: Optional. A parser for the argument's value.\n  - Returns: A Parser that yields the argument's value.\n\nobject(parsers: { [key: string]: Parser<any> }): Parser<Record<string, any>>\n  - Groups multiple parsers into a structured result object.\n  - Parameters:\n    - parsers: An object where keys are property names and values are Parsers.\n  - Returns: A Parser that yields an object with parsed values.\n\nor(parsers: Parser<any>[]): Parser<any>\n  - Creates alternatives between different parsers.\n  - Parameters:\n    - parsers: An array of Parsers to try in sequence.\n  - Returns: A Parser that yields the result of the first successful parser.\n\nModifiers (applied to existing parsers):\n\noptional(parser: Parser<T>): Parser<T | undefined>\n  - Makes a parser optional, allowing it to be absent.\n\nmultiple(parser: Parser<T>): Parser<T[]>\n  - Makes a parser repeatable, allowing it to occur multiple times.\n\nmerge(parsers: Parser<any>[]): Parser<any[]>\n  - Combines the results of multiple unrelated parsers into an array.\n```\n\n## Flexible Configuration Parsing with or()\n\n```typescript\nimport { constant, object, option, or } from \"@optique/core/parser\";\nimport { integer, string, url } from \"@optique/core/valueparser\";\n\nconst flexibleConfig = or(\n  // Configuration via individual options\n  object({\n    source: constant(\"options\"),\n    host: option(\"--host\", string()),\n    port: option(\"--port\", integer()),\n    ssl: option(\"--ssl\")\n  }),\n\n  // Configuration via config file\n  object({\n    source: constant(\"file\"),\n    configFile: option(\"-c\", \"--config\", string())\n  }),\n\n  // Configuration via URL\n  object({\n    source: constant(\"url\"),\n    connectionString: option(\"--url\", url())\n  })\n);\n```\n\n## UUID Format Validation Examples (Text)\n\n```text\n# Valid UUID formats\n550e8400-e29b-41d4-a716-446655440000  # Version 1\n123e4567-e89b-12d3-a456-426614174000  # Version 1\n6ba7b810-9dad-11d1-80b4-00c04fd430c8  # Version 1\n6ba7b811-9dad-11d1-80b4-00c04fd430c8  # Version 1\n\n# Invalid formats\n550e8400-e29b-41d4-a716-44665544000   # Too short\n550e8400-e29b-41d4-a716-446655440000x  # Extra character\n550e8400e29b41d4a716446655440000       # Missing hyphens\n```\n\n## Define Command with Structured Description\n\n```typescript\nimport { message } from \"@optique/core/message\";\nimport { command, constant } from \"@optique/core/parser\";\nconst innerParser = constant(1);\n// ---cut-before---\nconst addCommand = command(\"add\", innerParser, {\n  description: message`Add files to the project` // [!code highlight]\n});\n```\n\n## Deployment Tool CLI Parser\n\n```typescript\nimport {\n  type InferValue,\n  argument,\n  command,\n  constant,\n  merge,\n  multiple,\n  object,\n  option,\n  optional,\n  or,\n  withDefault,\n} from \"@optique/core/parser\";\nimport { choice, integer, string, url } from \"@optique/core/valueparser\";\nimport { path, run } from \"@optique/run\";\n\n// Reusable option groups\nconst commonOptions = object(\"Common\", {\n  verbose: optional(option(\"-v\", \"--verbose\")),\n  config: optional(option(\"-c\", \"--config\", path({ mustExist: true }))),\n  dryRun: optional(option(\"--dry-run\"))\n});\n\nconst environmentOptions = object(\"Environment\", {\n  environment: argument(choice([\"dev\", \"staging\", \"prod\"])),\n  region: option(\"-r\", \"--region\", string()),\n  timeout: withDefault(option(\"-t\", \"--timeout\", integer({ min: 0 })), 300)\n});\n\nconst deployOptions = object(\"Deploy\", {\n  image: option(\"-i\", \"--image\", string({ metavar: \"IMAGE:TAG\" })),\n  replicas: withDefault(option(\"--replicas\", integer({ min: 1, max: 50 })), 1),\n  healthCheck: option(\"--health-check\", url()),\n  secrets: multiple(option(\"-s\", \"--secret\", string()))\n});\n\n// Main CLI parser\nconst deploymentTool = object({\n  // Global options available to all commands\n  globalConfig: optional(option(\"--global-config\", path())),\n  quiet: optional(option(\"-q\", \"--quiet\")),\n\n  // Command with rich subcommand structure\n  command: or(\n    // Deploy command: merge multiple option groups\n    command(\"deploy\", merge(\n      object({ action: constant(\"deploy\") }),\n      commonOptions,\n      environmentOptions,\n      deployOptions,\n      object({\n        // Deploy-specific options\n        force: optional(option(\"-f\", \"--force\")),\n        rollback: optional(option(\"--rollback-on-failure\")),\n      })\n    )),\n\n    // Status command: simpler option set\n    command(\"status\", merge(\n      object({ action: constant(\"status\") }),\n      commonOptions,\n      object({\n        environment: argument(choice([\"dev\", \"staging\", \"prod\"])),\n        watch: optional(option(\"-w\", \"--watch\")),\n        format: withDefault(\n          option(\"--format\", choice([\"table\", \"json\", \"yaml\"])),\n          \"table\"\n        )\n      })\n    )),\n\n    // Rollback command: targeted options\n    command(\"rollback\", merge(\n      object({ action: constant(\"rollback\") }),\n      commonOptions,\n      environmentOptions,\n      object({\n        revision: option(\"--revision\", string({ metavar: \"REV\" })),\n        confirm: optional(option(\"--confirm\")),\n      })\n    )),\n\n    // Logs command: streaming options\n    command(\"logs\", merge(\n      object({ action: constant(\"logs\") }),\n      commonOptions,\n      object({\n        environment: argument(choice([\"dev\", \"staging\", \"prod\"])),\n        service: argument(string({ metavar: \"SERVICE\" })),\n        follow: optional(option(\"-f\", \"--follow\")),\n        lines: withDefault(option(\"-n\", \"--lines\", integer({ min: 1 })), 100),\n        since: optional(option(\"--since\", string({ metavar: \"TIME\" })))\n      })\n    ))\n  )\n});\n\n// The complete inferred type - look how rich this is!\ntype DeployConfig = InferValue<typeof deploymentTool>;\n\n```\n\n## Define Argument with Structured Description\n\n```typescript\nimport { message } from \"@optique/core/message\";\nimport { argument } from \"@optique/core/parser\";\nimport { path } from \"@optique/run/valueparser\"\n// ---cut-before---\nconst parser = argument(path(), {\n  description: message`The file where data are read from.`\n});\n```\n\n## Message Components and Embedding\n\n```typescript\nimport { message, optionName, metavar, values } from \"@optique/core/message\";\n\nconst examples = {\n  // Automatic value embedding\n  simpleValue: message`Invalid value ${userInput}`,\n\n  // Explicit option name highlighting\n  optionRef: message`Unknown option ${optionName(\"--invalid\")}`,\n\n  // Metavariable for documentation\n  usage: message`Expected ${metavar(\"FILE\")} argument`,\n\n  // Multiple values\n  choices: message`Choose from ${values([\"red\", \"green\", \"blue\"])}`,\n\n  // Combined components\n  complex: message`Option ${optionName(\"--port\")} expects ${metavar(\"NUMBER\")}, got ${userValue}`\n};\n```\n\n## Pattern Validation Error Example\n\n```bash\n$ myapp --version 1.2\nError: Expected a string matching pattern ^\\d+\\.\\d+\\.\\d+$, but got 1.2.\n```\n\n## Define Verbose Option with Description\n\n```typescript\nimport { message } from \"@optique/core/message\";\nimport { option } from \"@optique/core/parser\";\n// ---cut-before---\nconst parser = option(\"-v\", \"--verbose\", {\n  description: message`Enable verbose output for debugging`\n});\n```\n\n## Optique Natural Parser Composition (Merging Options)\n\n```typescript\nimport { object, option, merge } from \"@optique/core/parser\";\nimport { string } from \"@optique/core/valueparser\";\n\nconst CommonOptions = object({\n  verbose: option(\"--verbose\"),\n  config: option(\"--config\", string())\n});\n\nconst DeployOptions = object({\n  environment: option(\"--env\", string())\n});\n\nconst deployParser = merge(CommonOptions, DeployOptions);\n```",
    "library": "output_compactor",
    "topic": "overview",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:24:50.099037"
}