{
  "library": "security_scanner",
  "topic": "common-mistakes",
  "documentation": {
    "content": "## ESM Usage Example (JavaScript)\n\n```javascript\nimport SpamScanner from 'spamscanner';\n\n// ... usage as shown in the Initialization and Scanning example ...\n```\n\n## Optimizing Training Speed and Enabling Worker Threads in Bash and JavaScript\n\n```bash\n# Use optimized trainer\nnode optimized_trainer.js\n\n# Enable worker threads\nconst USE_WORKERS = true;\n```\n\n## Ensemble Learning with Multiple Classifiers in JavaScript\n\n```javascript\n// Train multiple classifiers\nconst classifiers = await Promise.all([\n  trainNaiveBayes(dataset),\n  trainSVM(dataset),\n  trainRandomForest(dataset)\n]);\n\n// Combine predictions\nconst prediction = combineVotes(classifiers, email);\n```\n\n## Migrate to ES Modules for SpamScanner (JavaScript)\n\n```javascript\n// Old (still works)\nconst SpamScanner = require('spamscanner');\n\n// New (recommended)\nimport SpamScanner from 'spamscanner';\n```\n\n## Concurrent Email Processing with Worker Threads\n\n```javascript\n// Worker threads (advanced)\nconst workers = os.cpus().length;\nconst concurrency = Math.min(workers, 4);\n\nawait pMap(emails, processEmail, { concurrency });\n```\n\n## SpamScanner Usage with CommonJS\n\n```javascript\nconst fs = require('fs');\nconst path = require('path');\nconst SpamScanner = require('spamscanner');\n\nconst scanner = new SpamScanner();\n\n//\n// NOTE: The `source` argument is the full raw email to be scanned\n// and you can pass it as String, Buffer, or valid file path\n//\nconst source = fs.readFileSync(\n  path.join(__dirname, 'test', 'fixtures', 'spam.eml')\n);\n\n// async/await usage\n(async () => {\n  try {\n    const scan = await scanner.scan(source);\n    console.log('scan', scan);\n  } catch (err) {\n    console.error(err);\n  }\n})();\n\n// then/catch usage\nscanner\n  .scan(source)\n  .then(scan => console.log('scan', scan))\n  .catch(console.error);\n```\n\n## Batch Processing and Garbage Collection\n\n```javascript\n// Batch processing\nconst BATCH_SIZE = 100;  // Adjust based on available RAM\n\n// Garbage collection\nif (global.gc && processedEmails % 1000 === 0) {\n  global.gc();\n}\n```\n\n## CommonJS Usage Example (JavaScript)\n\n```javascript\nconst SpamScanner = require('spamscanner');\n\n// ... usage as shown in the Initialization and Scanning example ...\n```\n\n## SpamScanner Usage with ES Modules\n\n```javascript\nimport { readFileSync } from 'node:fs';\nimport { join } from 'node:path';\nimport SpamScanner from 'spamscanner';\n\nconst scanner = new SpamScanner({\n  // v6.0 enhanced configuration options\n  enableMacroDetection: true,\n  enableMalwareUrlCheck: true,\n  enablePerformanceMetrics: true,\n  timeout: 30000 // 30 second timeout protection\n});\n\n//\n// NOTE: The `source` argument is the full raw email to be scanned\n// and you can pass it as String, Buffer, or valid file path\n//\nconst source = readFileSync(\n  join(process.cwd(), 'test', 'fixtures', 'spam.eml')\n);\n\n// async/await usage\ntry {\n  const scan = await scanner.scan(source);\n  console.log('scan', scan);\n\n  // v6.0 performance metrics\n  if (scan.metrics) {\n    console.log('Processing time:', scan.metrics.totalTime, 'ms');\n    console.log('Classification time:', scan.metrics.classificationTime, 'ms');\n  }\n} catch (err) {\n  console.error(err);\n}\n```\n\n## Update SpamScanner Result Handling in v6.0 (JavaScript)\n\n```javascript\nconst result = await scanner.scan(source);\n\n// New v6.0 result properties\nif (result.results.macros.length > 0) {\n  console.log('Macros detected:', result.results.macros);\n}\n\nif (result.results.patterns.length > 0) {\n  console.log('Patterns detected:', result.results.patterns);\n}\n\nif (result.metrics) {\n  console.log('Performance:', result.metrics);\n}\n```",
    "library": "security_scanner",
    "topic": "best-practices",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:26:15.844053"
}