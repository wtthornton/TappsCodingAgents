{
  "library": "expert_config_generator",
  "topic": "best-practices",
  "documentation": {
    "content": "## Configure hapi Server with Confidence\n\n```javascript\nconst Hapi = require('@hapi/hapi');\nconst Confidence = require('@hapipal/confidence');\n\nconst store = new Confidence.Store({\n    server: {\n        host: 'localhost',\n        port: {\n            $param: 'PORT',\n            $coerce: 'number',\n            $default: 3000\n        },\n        debug: {\n            $filter: 'NODE_ENV',\n            $default: {\n                log: ['error'],\n                request: ['error']\n            },\n            production: {\n                request: ['implementation']\n            }\n        }\n    }\n});\n\nconst config = store.get('/', process.env);\n\nconst server = Hapi.server(config);\n```\n\n## Using $env with $default Directive\n\n```json\n{\n    \"mysql\": {\n        \"host\": { \"$env\" : \"MYSQL_HOST\" },\n        \"port\": { \"$env\" : \"MYSQL_PORT\", \"$default\": 3306 },\n        \"user\": { \"$env\" : \"MYSQL_USER\" },\n        \"password\": { \"$env\" : \"MYSQL_PASSWORD\" },\n        \"database\": { \"$env\" : \"MYSQL_DATABASE\" }\n    }\n}\n```\n\n## HapiPal Configuration with Metadata\n\n```json\n{\n    \"key1\": \"abc\",\n    \"key2\": {\n        \"$filter\": \"system.env\",\n        \"production\": 1,\n        \"$default\": 2\n    },\n    \"key3\": {\n        \"$filter\": \"random.a\",\n        \"$range\": [\n            { \"limit\": 10, \"value\": 4 },\n            { \"limit\": 20, \"value\": 5 }\n        ],\n        \"$default\": 6\n    },\n    \"$meta\": {\n        \"anything\": \"really\"\n    }\n}\n```\n\n## HapiPal Configuration with Metadata\n\n```json\n{\n    \"key1\": {\n        \"$value\": \"abc\",\n        \"$meta\": \"whatever\"\n    },\n    \"key2\": {\n        \"$filter\": \"system.env\",\n        \"production\": 1,\n        \"$default\": 2\n    },\n    \"key3\": {\n        \"$filter\": \"random.a\",\n        \"$range\": [\n            { \"limit\": 10, \"value\": 4 },\n            { \"limit\": 20, \"value\": 5 }\n        ],\n        \"$default\": 6\n    },\n    \"$meta\": {\n        \"anything\": \"really\"\n    }\n}\n```\n\n## Setting Environment Variables\n\n```sh\nMYSQL_HOST=xxx.xxx.xxx.xxx\nMYSQL_PORT=3306\nMYSQL_USER=user1\nMYSQL_PASSWORD=some_password\nMYSQL_DATABASE=live_db\n```\n\n## HapiPal Configuration Filtering Example\n\n```json\n{\n    \"key1\": \"abc\",\n    \"key2\": {\n        \"$filter\": \"env\",\n        \"production\": {\n            \"deeper\": {\n                \"$value\": \"value\"\n            }\n        },\n        \"$default\": {\n            \"$filter\": \"platform\",\n            \"android\": 0,\n            \"ios\": 1,\n            \"$default\": 2\n        }\n    },\n    \"key3\": {\n        \"sub1\": 123,\n        \"sub2\": {\n            \"$filter\": \"xfactor\",\n            \"yes\": 6\n        }\n    },\n    \"ab\": {\n        \"$filter\": \"random.a\",\n        \"$range\": [\n            { \"limit\": 10, \"value\": 4 },\n            { \"limit\": 20, \"value\": 5 }\n        ],\n        \"$default\": 6\n    },\n    \"$meta\": {\n        \"description\": \"example file\"\n    }\n}\n```\n\n## Install @hapipal/confidence\n\n```sh\nnpm install @hapipal/confidence\n```\n\n## Using $env Directive for Environment Variables\n\n```json\n{\n    \"mysql\": {\n        \"host\": { \"$env\" : \"MYSQL_HOST\" },\n        \"port\": { \"$env\" : \"MYSQL_PORT\" },\n        \"user\": { \"$env\" : \"MYSQL_USER\" },\n        \"password\": { \"$env\" : \"MYSQL_PASSWORD\" },\n        \"database\": { \"$env\" : \"MYSQL_DATABASE\" }\n    }\n}\n```\n\n## HapiPal Configuration with Shared Values ($base)\n\n```json\n{\n  \"$filter\": \"env\",\n  \"$base\": {\n      \"logLocation\": \"/logs\",\n      \"flags\": [\"a\", \"b\"],\n      \"tags\": {\n          \"$value\": [\"DEBUG\"],\n          \"$replace\": true\n      }\n  },\n  \"production\":  {\n      \"logLevel\": \"error\",\n      \"flags\": [\"c\", \"d\"],\n      \"tags\": [\"INFO\", \"ERROR\"]\n  },\n  \"qa\":  {\n      \"logLevel\": \"info\",\n      \"logLocation\": \"/qa/logs\",\n      \"flags\": [\"e\", \"f\"],\n      \"tags\": [\"DEBUG\"]\n  },\n  \"staging\":  {\n      \"logLevel\": \"debug\"\n  }\n}\n```\n\n## Environment Variable Integration with $env\n\n```json\n{\n    \"key1\": \"abc\",\n    \"key2\": {\n        \"$filter\": { \"$env\": \"NODE_ENV\" },\n        \"production\": {\n            \"host\": { \"$env\" : \"MYSQL_HOST\" },\n            \"port\": {\n                \"$env\" : \"MYSQL_PORT\",\n                \"$coerce\": \"number\",\n                \"$default\": 3306\n            },\n            \"user\": { \"$env\" : \"MYSQL_USER\" },\n            \"password\": { \"$env\" : \"MYSQL_PASSWORD\" },\n            \"database\": { \"$env\" : \"MYSQL_DATABASE\" }\n        },\n        \"$default\": {\n            \"host\": \"127.0.0.1\",\n            \"port\": 3306,\n            \"user\": \"dev\",\n            \"password\": \"password\",\n            \"database\": \"dev_db\"\n        }\n    }\n}\n```\n\n## Confidence Document Nested Structure\n\n```json\n{\n    \"key1\": \"abc\",\n    \"key2\": 2,\n    \"key3\": {\n        \"sub1\": 123\n    }\n}\n```",
    "library": "learning_confidence",
    "topic": "best-practices",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:26:36.184987"
}