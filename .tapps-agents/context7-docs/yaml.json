{
  "library": "yaml",
  "topic": null,
  "documentation": {
    "content": "## PyYAML Loader Options Overview\n\n```python\nimport yaml\n\n# BaseLoader: Loads only the most basic YAML. Scalars are loaded as strings.\n# Example:\n# data_base = yaml.load('key: value', Loader=yaml.BaseLoader)\n\n# SafeLoader: Loads a safe subset of YAML. Recommended for untrusted input.\n# Equivalent to yaml.safe_load()\n# Example:\n# data_safe = yaml.safe_load('key: value')\n\n# FullLoader: Loads the full YAML language, avoiding arbitrary code execution (with caveats).\n# This is the default for yaml.load() in PyYAML 5.1+ (after issuing a warning).\n# WARNING: Exploits found in versions prior to 5.3.1.\n# Example:\n# data_full = yaml.load('key: value', Loader=yaml.FullLoader)\n\n# UnsafeLoader: The original, exploitable loader. Also aliased as yaml.Loader.\n# Use with extreme caution and only on trusted data.\n# Example:\n# data_unsafe = yaml.load('key: value', Loader=yaml.UnsafeLoader)\n\n```\n\n## Streaming YAML Events for Low-Level Processing with PyYAML\n\n```python\nimport yaml\n\nyaml_document = \"\"\"\nusers:\n  - name: Alice\n    role: admin\n  - name: Bob\n    role: user\n\"\"\"\n\n# Scan for tokens\nprint(\"Tokens:\")\nfor token in yaml.scan(yaml_document):\n    print(f\"{token.__class__.__name__}: {token}\")\n\n# Parse for events\nprint(\"\\nEvents:\")\nfor event in yaml.parse(yaml_document):\n    print(f\"{event.__class__.__name__}: {event}\")\n\n# Compose to get representation tree\nnode = yaml.compose(yaml_document)\nprint(f\"\\nRoot node type: {node.__class__.__name__}\")\nprint(f\"Root node tag: {node.tag}\")\n```\n\n## Process Multiple YAML Documents in Streams with PyYAML\n\n```python\nimport yaml\n\n# Create multiple documents\ndocuments = [\n    {'type': 'user', 'id': 1, 'name': 'Alice'},\n    {'type': 'user', 'id': 2, 'name': 'Bob'},\n    {'type': 'config', 'version': '1.0'}\n]\n\n# Dump all documents to a single stream\nyaml_stream = yaml.safe_dump_all(\n    documents,\n    explicit_start=True,\n    explicit_end=False\n)\nprint(\"Multi-document stream:\")\nprint(yaml_stream)\n# Output:\n# ---\n# id: 1\n# name: Alice\n# type: user\n# ---\n# id: 2\n# name: Bob\n# type: user\n# ---\n# type: config\n# version: '1.0'\n\n# Load all documents from stream\nloaded_docs = list(yaml.safe_load_all(yaml_stream))\nprint(f\"\\nLoaded {len(loaded_docs)} documents\")\nfor i, doc in enumerate(loaded_docs, 1):\n    print(f\"Document {i}: {doc}\")\n```\n\n## High-Performance YAML Processing with LibYAML Extension\n\n```python\nimport yaml\n\n# Check if LibYAML is available\nprint(f\"LibYAML available: {yaml.__with_libyaml__}\")\n\nif yaml.__with_libyaml__:\n    # Use CLoader for fast parsing\n    yaml_data = \"\"\"\n    large_list:\n      - item1\n      - item2\n      - item3\n    \"\"\"\n\n    # Fast loading with CLoader\n    data = yaml.load(yaml_data, Loader=yaml.CLoader)\n    print(f\"Loaded with CLoader: {data}\")\n\n    # Fast dumping with CDumper\n    output = yaml.dump(data, Dumper=yaml.CDumper)\n    print(f\"Dumped with CDumper:\\n{output}\")\n\n    # For safe operations with C extension\n    try:\n        from yaml import CSafeLoader, CSafeDumper\n        safe_data = yaml.load(yaml_data, Loader=CSafeLoader)\n        safe_output = yaml.dump(safe_data, Dumper=CSafeDumper)\n        print(\"C-based safe loader/dumper available\")\n    except ImportError:\n        print(\"C-based safe loader/dumper not available\")\nelse:\n    # Fallback to pure Python implementation\n    data = yaml.safe_load(yaml_data)\n    output = yaml.safe_dump(data)\n```\n\n## Install PyYAML with LibYAML Bindings\n\n```bash\npython setup.py --with-libyaml install\n```\n\n## Install PyYAML without LibYAML Bindings\n\n```bash\npython setup.py --without-libyaml install\n```\n\n## Error Handling with Detailed Markers in PyYAML\n\n```python\nimport yaml\nfrom yaml import YAMLError\n\ninvalid_yaml = \"\"\"\nusers:\n  - name: Alice\n    age: 30\n  - name: Bob\n  age: invalid indentation\n\"\"\"\n\ntry:\n    data = yaml.safe_load(invalid_yaml)\nexcept yaml.scanner.ScannerError as e:\n    print(f\"Scanner Error: {e.problem}\")\n    print(f\"Problem location: line {e.problem_mark.line + 1}, column {e.problem_mark.column + 1}\")\n    print(f\"Context:\\n{e.problem_mark.get_snippet()}\")\nexcept yaml.parser.ParserError as e:\n    print(f\"Parser Error: {e.problem}\")\n    print(f\"Location: line {e.problem_mark.line + 1}\")\nexcept YAMLError as e:\n    print(f\"YAML Error: {e}\")\n\n# Handling constructor errors\nyaml_with_bad_tag = \"\"\"\nvalue: !UnknownTag\n  data: test\n\"\"\"\n\ntry:\n    data = yaml.safe_load(yaml_with_bad_tag)\nexcept yaml.constructor.ConstructorError as e:\n    print(f\"Constructor Error: {e.problem}\")\n    if e.problem_mark:\n        print(f\"At line {e.problem_mark.line + 1}, column {e.problem_mark.column + 1}\")\n```\n\n## Control YAML Output Formatting with PyYAML\n\n```python\nimport yaml\n\ndata = {\n    'database': {\n        'connections': [\n            {'host': 'db1.local', 'port': 5432},\n            {'host': 'db2.local', 'port': 5432},\n            {'host': 'db3.local', 'port': 5432}\n        ]\n    },\n    'cache': {'host': 'redis.local', 'port': 6379}\n}\n\n# Block style (default)\nprint(\"Block style:\")\nprint(yaml.dump(data, default_flow_style=False, indent=2))\n\n# Flow style (inline)\nprint(\"\\nFlow style:\")\nprint(yaml.dump(data, default_flow_style=True))\n# Output: {cache: {host: redis.local, port: 6379}, database: {connections: [{host: db1.local, port: 5432}, ...]}}\n\n# Canonical YAML\nprint(\"\\nCanonical:\")\nprint(yaml.dump(data, canonical=True))\n\n# Custom width and indentation\nprint(\"\\nCustom formatting:\")\nyaml_formatted = yaml.dump(\n    data,\n    default_flow_style=False,\n    indent=4,\n    width=50,\n    allow_unicode=True,\n    explicit_start=True,\n    explicit_end=True,\n    sort_keys=True\n)\nprint(yaml_formatted)\n```\n\n## Run PyYAML Tests\n\n```bash\npython setup.py test\n```\n\n## Custom Object Serialization to YAML with PyYAML Representers\n\n```python\nimport yaml\n\nclass Database:\n    def __init__(self, host, port, name):\n        self.host = host\n        self.port = port\n        self.name = name\n\n# Define a representer for the Database class\ndef database_representer(dumper, data):\n    dict_representation = {\n        'host': data.host,\n        'port': data.port,\n        'database': data.name\n    }\n    return dumper.represent_mapping('!Database', dict_representation)\n\n# Register the representer\nyaml.add_representer(Database, database_representer, Dumper=yaml.SafeDumper)\n\n# Create and serialize custom objects\ndb_config = {\n    'primary': Database('db1.example.com', 5432, 'production'),\n    'replica': Database('db2.example.com', 5432, 'production_replica')\n}\n\nyaml_output = yaml.safe_dump(db_config, default_flow_style=False)\nprint(yaml_output)\n```",
    "library": "pyyaml",
    "topic": "overview",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T17:59:05.918666"
}