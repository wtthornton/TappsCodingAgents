{
  "library": "observer",
  "topic": "usage",
  "documentation": {
    "content": "## Picking Columns on Output in Terraform OPAL (Bad Example)\n\n```Text Terraform\ninputs = {\n  \"datastream\" = var.datastream.dataset.oid\n}\n\nstage {\n  input    = \"datastream\"\n  pipeline = <<-EOF\n    filter OBSERVATION_KIND = \"elastic\"\n    filter string(FIELDS.agent.type) = \"metricbeat\"\n    make_col\n      hostname:string(FIELDS.host.hostname),\n      host_id:string(FIELDS.host.id)\n  EOF\n}\n```\n\n## Bad OPAL Field Naming Example\n\n```OPAL\nmake_col\n  sha:string(data.CodeSha256),\n  customer_id:string(data.customerID)\n\n__\n\n```\n\n## Resolve `observation_too_large` error\n\n```json\n{\n  \"error_type\": \"observation_too_large\",\n  \"http_response_code\": 413,\n  \"message\": \"observation of size 5233950 over limit of 4194304\",\n  \"source_datastream_id\": 41023194,\n  \"source_datastream_token_id\": \"ds1aTyFI2f8V5IkqXiiY\",\n  \"source_http_request\": {\n    \"headers\": {\n      \"content-encoding\": \"gzip\",\n      \"content-type\": \"application/x-protobuf\"\n    },\n    \"id\": \"204345502211d4eea054e5d09fbc92ca\",\n    \"path\": \"/v1/otel/v1/traces\",\n    \"start_time\": 1673292866920775400\n  }\n}\n```\n\n## Picking Columns on Output in Terraform OPAL (Good Example)\n\n```Text Terraform\ninputs = {\n  \"datastream\" = var.datastream.dataset.oid\n}\n\nstage {\n  input    = \"datastream\"\n  pipeline = <<-EOF\n    filter OBSERVATION_KIND = \"elastic\"\n    filter string(FIELDS.agent.type) = \"metricbeat\"\n    pick_col\n      BUNDLE_TIMESTAMP,\n      hostname:string(FIELDS.host.hostname),\n      host_id:string(FIELDS.host.id)\n  EOF\n}\n```\n\n## Create and Visualize Error Rate Over Time with Opal\n\n```Opal\nmake_col error: if(status!=200, 1, 0)\ntimechart 1m, error: sum(error), total: count(), group_by(cluster)\nmake_metric error, total, tags(cluster)\n```\n\n## Search for Single Keyword in Unified Search Syntax\n\n```text\nfilter log ~ error\n```\n\n## OPAL Inexact String Matching with Tilde Operator\n\n```opal\n// keep rows where \"log\" field contains \"hello\", case-insensitive\n  filter log ~ hello\n  \n  // keep rows where any field contains \"hello\", case-insensitive\n  filter * ~ hello\n```\n\n## Column Selection using OPAL's pick_col verb\n\n```OPAL\n// Example usage of pick_col verb\n// (Specific code not provided in the source text, conceptual explanation given)\n// pick_col column1, column2 as \"New Name\"\n// To reference fields with non-alphanumeric characters: @.\"emoji_thermometer\"\n\n```\n\n## Create column with null string value\n\n```OPAL\nmake_col foo:string_null()\n```\n\n## Deduplicate Rows with Specific Columns - Opal\n\n```opal\ndedup vf, message\n```",
    "library": "observer",
    "topic": "common-mistakes",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T16:10:19.950033"
}