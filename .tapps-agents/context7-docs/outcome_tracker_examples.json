{
  "library": "outcome_tracker",
  "topic": "examples",
  "documentation": {
    "content": "## Example Usage of createTracker Function\n\n```tsx\nconst [{ Provider, DOMEvent, Click, Impression, PageView, SetContext }, useTracker] = createTracker({\n  init,\n  send,\n  DOMEvents,\n  impression: {\n    onImpression,\n    options,\n  },\n  pageView: {\n    onPageView,\n  },\n  batch,\n  schemas,\n});\n```\n\n## Schema Validation with Zod in `event-tracker`\n\n```tsx\nimport { z } from \"zod\";\nimport { createTracker } from \"@offlegacy/event-tracker\";\n\ninterface Context {\n  // ...\n}\n\ninterface Params {\n  // ...\n}\n\n// Define Schemas\nconst schemas = {\n  page_view: z.object({\n    title: z.string(),\n  }),\n  click_button: z.object({\n    target: z.string(),\n  }),\n};\n\n// Configure Tracker\nconst [Track] = createTracker<Context, Params, typeof schemas>({\n  // other configurations...\n\n  schema: {\n    schemas: {\n      page_view,\n      click_button,\n    },\n    onSchemaError: (error) => {\n      console.error(\"Schema validation error:\", error);\n    },\n    abortOnError: true,\n  },\n});\n\n// Use the schemas\n<Track.PageView schema=\"page_view\" params={{ title: \"Home Page\" }} />;\n<Track.Click schema=\"click_button\" params={{ target: \"submit-button\" }} />;\n```\n\n## Traditional Event Tracking in React\n\n```tsx\n// Traditional event tracking\n\nconst Page = () => {\n  const { user, userId } = useUser();\n\n  return (\n    <div>\n      <p>User: {user.name}</p>\n      <Counter userId={userId} />\n    </div>\n  );\n};\n\nconst Counter = ({ userId }: { userId: string }) => {\n  // Receives 'userId' as a prop just for event tracking purposes.\n\n  const [count, setCount] = useState(0);\n  const { track } = useTrackEvent();\n\n  const handleIncrement = () => {\n    setCount(count + 1);\n\n    track({\n      event: \"click\",\n      params: {\n        type: \"count\",\n        value: count + 1,\n        userId,\n      },\n    });\n  };\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={handleIncrement}>Increment</button>\n    </div>\n  );\n};\n```\n\n## Declarative Event Tracking with `event-tracker`\n\n```tsx\nconst Page = () => {\n  const { user, userId } = useUser();\n\n  return (\n    <Track.Provider initialContext={{ userId }}>\n      <div>\n        <p>User: {user.name}</p>\n        <Counter />\n      </div>\n    </Track.Provider>\n  );\n};\n\nconst Counter = () => {\n  const [count, setCount] = useState(0);\n\n  const handleIncrement = () => {\n    setCount(count + 1);\n  };\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <Track.Click params={{ value: count + 1, type: \"count\" }}>\n        <button onClick={handleIncrement}>Increment</button>\n      </Track.Click>\n    </div>\n  );\n};\n```\n\n## Reliable Batch Delivery on Browser Closure using sendBeacon\n\n```TypeScript\nonFlush: (batch, isBrowserClosing) => {\n  if (isBrowserClosing) {\n    navigator.sendBeacon(\"/analytics/collect/batch\", JSON.stringify(batch));\n    return;\n  }\n\n  // Normal operation\n  fetch(\"/analytics/collect/batch\", {\n    method: \"POST\",\n    body: JSON.stringify(batch)\n  });\n};\n```\n\n## Full Event Batching Example Flow with Tracker Components\n\n```TypeScript\nconst [Track, useTracker] = createTracker({\n  DOMEvents: {\n    onClick: (clickParams, context) => {\n      // Return value is what gets batched\n      return {\n        ...clickParams,\n        ...context,\n        event_type: \"click\",\n        timestamp: new Date().getTime()\n      };\n    }\n  },\n  batch: {\n    enable: true,\n    interval: 2000,\n    thresholdSize: 100,\n    onFlush: (batch, isBrowserClosing) => {\n      // Process the batch\n    }\n  }\n});\n\nfunction App() {\n  return (\n    <Track.Provider initialContext={{ deviceId: \"device-123\" }}>\n      <Track.Click params={{ buttonId: \"submit\" }}>\n        <button>Submit</button>\n      </Track.Click>\n    </Track.Provider>\n  );\n}\n```\n\n## Configure Event Tracker with Zod Schemas\n\n```tsx\nimport { createTracker } from \"@offlegacy/event-tracker\";\n\ntype schemas = {\n  page_view;\n  clic_button;\n};\n\nconst [Track] = createTracker<{}, {}, typeof schemas>({\n  schema: {\n    schemas,\n    onSchemaError: (error) => {\n      console.error(\"Schema validation error:\", error);\n    },\n    abortOnError: true,\n  },\n  // other configurations...\n});\n```\n\n## API Reference for Event Batching Configuration Options\n\n```APIDOC\nenable: boolean (default: false)\n  Enables/disables batching\ninterval: number (default: 3000)\n  Time in milliseconds between batch flushes\nthresholdSize: number (default: 25)\n  Maximum number of events in a batch before forcing a flush\nonFlush: (batch: Batch[], isBrowserClosing: boolean) => void | Promise<void>\n  Required when batching is enabled\n  Function called to process the batch\n  isBrowserClosing indicates if the flush was triggered by browser closure\nonError: (error: Error) => void | Promise<void>\n  Optional error handler for batch processing failures\n```\n\n## Initialize and Use Impression Tracker in React\n\n```tsx\nimport { createTracker } from \"@offlegacy/event-tracker\";\n\nconst [Track] = createTracker({\n  impression: {\n    onImpression: (params, context) => {\n      // Handle impression event\n    },\n    options: {\n      threshold: 0.5,\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <Track.Provider initialContext={{}}>\n      <Track.Impression params={{ elementId: \"hero\" }} options={{ threshold: 0.8 }}>\n        <div>Tracked content</div>\n      </Track.Impression>\n    </Track.Provider>\n  );\n}\n```\n\n## Define Git Commit Message Format\n\n```Markdown\n<type>[optional package scope]: <description>\n\n[optional body]\n\n[optional footer(s)]\n```",
    "library": "outcome_tracker",
    "topic": "common-mistakes",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:24:37.611563"
}