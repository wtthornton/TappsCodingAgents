{
  "library": "tomli",
  "topic": "usage",
  "documentation": {
    "content": "## TimelineContext Usage Example\n\n```APIDOC\n## TimelineContext Usage Example\n\n### Description\nThis example illustrates the practical implementation of TimelineContext, including state management for rows, items, timeframe, and handling resize events.\n\n### Component Setup\n```tsx\nimport React, { useState, useCallback } from 'react';\nimport { TimelineContext } from 'your-timeline-library'; // Replace with actual import path\nimport { Timeline } from './Timeline'; // Assuming Timeline component is in Timeline.tsx\nimport { DEFAULT_TIMEFRAME, ResizeEndEvent } from 'your-timeline-library/types'; // Replace with actual import path\n\nfunction App() {\n  const [rows, setRows] = useState(/* initial rows */);\n  const [items, setItems] = useState(/* initial items */);\n  const [timeframe, setTimeframe] = useState(DEFAULT_TIMEFRAME);\n\n  const onResizeEnd = useCallback((event: ResizeEndEvent) => {\n    const updatedRelevance = event.active.data.current.getRelevanceFromResizeEvent?.(event);\n\n    if (!updatedRelevance) return;\n\n    const activeItemId = event.active.id;\n\n    setItems((prev) => prev.map((item) => {\n      if (item.id !== activeItemId) return item;\n      return {\n        ...item,\n        relevance: updatedRelevance,\n      };\n    }));\n  }, []);\n\n  return (\n    <TimelineContext\n      onResizeEnd={onResizeEnd}\n      timeframe={timeframe}\n      onTimeframeChanged={setTimeframe}\n    >\n      <Timeline rows={rows} items={items} />\n    </TimelineContext>\n  );\n}\n```\n```\n\n## TimelineContext Usage Example\n\n```tsx\nfunction App(){\n  const [rows, setRows] = useRows()\n  const [items, setItems] = useItems()\n  const [timeframe, setTimeframe] = useState(DEFAULT_TIMEFRAME)\n  \n  const onResizeEnd = useCallback((event: ResizeEndEvent) => {\n      const updatedRelevance = \n        event.active.data.current.getRelevanceFromResizeEvent?.(event)\n  \n      if (!updatedRelevance) return\n  \n      const activeItemId = event.active.id\n  \n// Only update the changed item. This will cause only the changed items to re-render\n      setItems((prev) => prev.map((item) => {\n          if (item.id !== activeItemId) return item\n  \n          return {\n            ...item,\n            relevance: updatedRelevance,\n          }\n      }))\n    }, [])\n  \n  return (\n    <TimelineContext\n      onResizeEnd={onResizeEnd}\n      timeframe={timeframe}\n      onTimeframeChanged={setTimeframe}\n    >\n      <Timeline rows={rows} items={items} />\n    </TimelineContext>\n  )\n}\n```\n\n## Using useItem Hook in dnd-timeline\n\n```javascript\nimport { useItem } from \"dnd-timeline\";\n\n// Inside a React component:\nconst { itemProps } = useItem({\n  id: \"item-1\",\n  // ... other item configurations\n});\n\n// Apply itemProps to your timeline item element:\n<div {...itemProps}>Your Timeline Item</div>\n```\n\n## Declare a Timeline Item with useItem\n\n```tsx\nuseItem({\n  id: props.id,\n  relevance: props.relevance,\n  data: { type: 'timeline-item' },\n})\n```\n\n## Timeline Usage of Row Component (TypeScript)\n\n```tsx\nconst { setTimelineRef, style } = useTimelineContext()\n\nreturn (\n  <div ref={setTimelineRef} style={style}>\n    {rows.map((row) => \n      <Row id={row.id} sidebar={<Sidebar row={row} />}>\n        // render row items...\n      </Row>\n    )}\n  </div>\n)\n```\n\n## Item Component Usage within a Row (TypeScript/React)\n\n```tsx\n<Row id={row.id}>\n  {groupedItems[row.id].map((item) => \n    <Item id={item.id} span={item.span}>\n      // item content...\n    </Item>\n  )}\n</Row>\n```\n\n## Timeline Usage with Row Components (TypeScript/React)\n\n```tsx\nconst { setTimelineRef, style } = useTimelineContext()\n\nreturn (\n  <div ref={setTimelineRef} style={style}>\n    {rows.map((row) => \n      <Row id={row.id} sidebar={<Sidebar row={row} />}> \n        // render row items...\n      </Row>\n    )}\n  </div>\n)\n```\n\n## Use Item with Resize Callback\n\n```tsx\nconst onResizeMove = useCallback(() => {\n  const updatedSpan = event.active.data.current.getSpanFromResizeEvent?.(event)\n\n  // update some local state with the updated-span\n}, [])\n\nuseItem({\n  id: props.id,\n  span: props.span,\n  onResizeMove,\n})\n```\n\n## Implement onResizeMove Callback\n\n```tsx\nconst onResizeMove = useCallback(() => {\n  const updatedRelevance = event.active.data.current.getRelevanceFromResizeEvent?.(event)\n\n  // update some local state with the updated-relevance\n}, [])\n\nuseItem({\n  id: props.id,\n  relevance: props.relevance,\n  onResizeMove,\n})\n```\n\n## useTimelineContext API\n\n```APIDOC\n## useTimelineContext\n\n### Description\nThis hook provides access to the timeline's state and a set of useful helper functions for manipulating and interpreting timeline data.\n\n### API Endpoints\n\n#### `style`\n\n##### Description\nA set of mandatory style properties that must be applied to the timeline container element.\n\n##### Type\n`CSSProperties`\n\n\n#### `timelineRef`\n\n##### Description\nThe timeline container element's ref.\n\n##### Type\n`React.MutableRefObject<HTMLElement | null>`\n\n\n#### `setTimelineRef`\n\n##### Description\nA ref setter that must be passed to the timeline's container element.\n\n##### Type\n`(element: HTMLElement | null) => void`\n\n\n#### `millisecondsToPixels`\n\n##### Description\nA helper function that receives milliseconds and returns the pixel representation in relation to the timeline's container element. Useful for inferring element sizes and positions based on duration.\n\n##### Type\n`(milliseconds: number) => number`\n\n\n#### `pixelsToMilliseconds`\n\n##### Description\nA helper function that receives pixels and returns the equivalent duration in milliseconds, in relation to the timeline's container element. Useful for converting size and position to time values.\n\n##### Type\n`(pixels: number) => number`\n\n\n#### `getDateFromScreenX`\n\n##### Description\nA helper function that takes an x position on the client's screen and returns a date representation of that position, in relation to the timeline's container element. Useful for inferring time values from mouse events.\n\n##### Type\n`(screenX: number) => Date`\n\n\n#### `getRelevanceFromDragEvent`\n\n##### Description\nA function that extracts relevance from a drag event (DragStartEvent, DragEndEvent, DragCancelEvent, DragMoveEvent). Injected into dnd-kit's events to infer the dragged item's relevance.\n\n##### Type\n`(event: DragEvent) => Relevance | null`\n\n##### Example\n<pre class=\"language-tsx\"><code class=\"lang-tsx\">const onDragEnd = (event: DragEndEvent) => {\n  const updatedRelevance = event.active.data.current.getRelevanceFromDragEvent?.(event);\n  // update your state using the updated relevance.\n}</code></pre>\n\n\n#### `getRelevanceFromResizeEvent`\n\n##### Description\nA function that extracts relevance from a resize event (ResizeStartEvent, ResizeMoveEvent, ResizeEndEvent). Injected into dnd-timeline's resize events to infer the dragged item's relevance.\n\n##### Type\n`(event: ResizeEvent) => Relevance | null`\n\n##### Example\n<pre class=\"language-tsx\"><code class=\"lang-tsx\">const onResizeEnd = (event: ResizeEndEvent) => {\n  const updatedRelevance = event.active.data.current.getRelevanceFromResizeEvent?.(event);\n  // update your state using the updated relevance.\n}</code></pre>\n\n```",
    "library": "timeline",
    "topic": "usage",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:26:32.754596"
}