{
  "library": "gzip",
  "topic": "best-practices",
  "documentation": {
    "content": "## Combined Compression and Decompression with GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\n// Create multiple compressed streams\nlet firstPart = Data(\"Hello, \".utf8)\nlet secondPart = Data(\"World!\".utf8)\n\nlet firstCompressed = try firstPart.gzipped()\nlet secondCompressed = try secondPart.gzipped()\n\n// Concatenate compressed data\nvar combinedCompressed = Data()\ncombinedCompressed.append(firstCompressed)\ncombinedCompressed.append(secondCompressed)\n\nprint(\"Combined data is gzipped: (combinedCompressed.isGzipped)\")  // true\n\n// Decompress combined streams in one operation\nlet decompressedCombined = try combinedCompressed.gunzipped()\nlet resultString = String(data: decompressedCombined, encoding: .utf8)\n\nprint(\"Result: (resultString ?? \"nil\")\")  // \"Hello, World!\"\n\n// Practical example with multiple file segments\nlet segments = [\"First segment. \", \"Second segment. \", \"Third segment.\"]\nvar combinedData = Data()\n\nfor segment in segments {\n    let segmentData = Data(segment.utf8)\n    let compressed = try segmentData.gzipped()\n    combinedData.append(compressed)\n}\n\nlet finalResult = try combinedData.gunzipped()\nprint(\"All segments: (String(data: finalResult, encoding: .utf8) ?? \"\")\")\n// \"First segment. Second segment. Third segment.\"\n\n```\n\n## Error Handling\n\n```APIDOC\n## GzipError\n\n### Description\nRepresents errors that can occur during gzip compression or decompression operations.\n\n### Properties\n- **kind** (GzipError.Kind) - The specific type of error that occurred.\n- **message** (String) - A descriptive message about the error.\n\n### GzipError.Kind Enum\n- **data**: The input data was corrupted or not in gzip format.\n- **memory**: Not enough memory available.\n- **buffer**: Output buffer issue.\n- **stream**: Stream structure inconsistent.\n- **version**: Zlib version mismatch.\n- **unknown**(Int): An unknown error with a specific code.\n\n### Example Usage\n```swift\nimport Gzip\nimport Foundation\n\nlet invalidData = Data(\"This is not compressed\".utf8)\n\ndo {\n    let result = try invalidData.gunzipped()\n} catch let error as GzipError {\n    print(\"Error kind: (error.kind)\")\n    print(\"Error message: (error.message)\")\n    \n    switch error.kind {\n    case .data:\n        print(\"The input data was corrupted or not in gzip format\")\n    // ... other cases\n    default:\n        break\n    }\n}\n```\n```\n\n## Error Handling for Gzip Operations in Swift with GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\n// Attempting to decompress non-gzipped data\nlet invalidData = Data(\"This is not compressed\".utf8)\n\ndo {\n    let result = try invalidData.gunzipped()\n    print(\"Success: \\(result)\")\n} catch let error as GzipError {\n    print(\"Error kind: \\(error.kind)\")  // .data\n    print(\"Error message: \\(error.message)\")  // \"incorrect header check\"\n    print(\"Localized description: \\(error.localizedDescription)\")\n\n    switch error.kind {\n    case .data:\n        print(\"The input data was corrupted or not in gzip format\")\n    case .memory:\n        print(\"Not enough memory available\")\n    case .buffer:\n        print(\"Output buffer issue\")\n    case .stream:\n        print(\"Stream structure inconsistent\")\n    case .version:\n        print(\"Zlib version mismatch\")\n    case .unknown(let code):\n        print(\"Unknown error with code: \\(code)\")\n    }\n}\n\n// Zero-length data handling (no error)\nlet emptyData = Data()\nlet compressedEmpty = try emptyData.gzipped()  // Returns empty Data\nlet decompressedEmpty = try emptyData.gunzipped()  // Returns empty Data\nprint(\"Empty data is valid: \\(compressedEmpty.count == 0)\")  // true\n```\n\n## Compression Level Options in GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\nlet largeText = String(repeating: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. \", count: 1000)\nlet data = Data(largeText.utf8)\n\n// No compression (fastest, largest size)\nlet noCompression = try data.gzipped(level: .noCompression)\n\n// Best speed (fast compression, moderate size)\nlet bestSpeed = try data.gzipped(level: .bestSpeed)\n\n// Default compression (balanced)\nlet defaultCompression = try data.gzipped(level: .defaultCompression)\n\n// Best compression (slowest, smallest size)\nlet bestCompression = try data.gzipped(level: .bestCompression)\n\n// Custom compression level (0-9)\nlet customLevel = CompressionLevel(rawValue: 6)\nlet customCompression = try data.gzipped(level: customLevel)\n\nprint(\"Original: (data.count) bytes\")\nprint(\"No compression: (noCompression.count) bytes\")\nprint(\"Best speed: (bestSpeed.count) bytes\")\nprint(\"Default: (defaultCompression.count) bytes\")\nprint(\"Best compression: (bestCompression.count) bytes\")\nprint(\"Custom (level 6): (customCompression.count) bytes\")\n\n// All can be decompressed to original data\nlet restored = try bestCompression.gunzipped()\nprint(\"Restored matches original: (restored == data)\")  // true\n\n```\n\n## Advanced Window Bits Configuration with GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\nlet data = Data(\"Advanced compression example\".utf8)\n\n// Standard gzip with header and trailer (default: maxWindowBits + 16)\nlet standardGzip = try data.gzipped(level: .defaultCompression, wBits: Gzip.maxWindowBits + 16)\n\n// Raw deflate without header and trailer\nlet rawDeflate = try data.gzipped(level: .defaultCompression, wBits: -Gzip.maxWindowBits)\n\n// Zlib format with header and trailer\nlet zlibFormat = try data.gzipped(level: .defaultCompression, wBits: Gzip.maxWindowBits)\n\nprint(\"Standard gzip size: \\(standardGzip.count)\")\nprint(\"Raw deflate size: \\(rawDeflate.count)\")\nprint(\"Zlib format size: \\(zlibFormat.count)\")\n\n// Decompress raw deflate data (no header/trailer)\nlet base64Encoded = \"7ZOxCsIwEIbf5ea0JNerqdmdFeygFYciHYK0lTZOIe9u9AXMTTpkOQh8hLv/7vNwmFfr7DyBuXho7Disrh8fYAAlYiF1oWSr0EgyhCWRrpsaOxCwm9xihxWMB/UuR9e7Z3zCfmqX/naPyAmMFHD+1C7WIKBKRykdrdPRTTqqJINlZKAYkylOv006i4zZEBksY8HIyKFi5EuMf0kzroxzZowcdHIPIYjvjjbRUSTKjmZHs6N/6WhVStS01VnRrGhW9BeKXsML\"\nif let encodedData = Data(base64Encoded: base64Encoded) {\n    // Decompress with negative wBits for raw stream\n    let decompressed = try encodedData.gunzipped(wBits: -Gzip.maxWindowBits)\n    if let jsonString = String(data: decompressed, encoding: .utf8) {\n        print(\"Decompressed JSON: (jsonString)\")\n    }\n}\n\n// Auto-detect format (wBits: maxWindowBits + 32)\nlet autoDetect = try standardGzip.gunzipped(wBits: Gzip.maxWindowBits + 32)\n\n```\n\n## Basic Gzip Compression\n\n```APIDOC\n## Data.gzipped()\n\n### Description\nCompresses a `Data` object into gzip format using default compression settings.\n\n### Method\n`Data.gzipped()`\n\n### Endpoint\nN/A (Extension method on Data type)\n\n### Parameters\nNone\n\n### Request Example\n```swift\nimport Gzip\nimport Foundation\n\nlet originalData = Data(\"Hello, World!\".utf8)\nlet compressedData = try originalData.gzipped()\n```\n\n### Response\n#### Success Response (200)\n- **compressedData** (Data) - The gzipped representation of the original data.\n\n#### Response Example\n```json\n{\n  \"compressedData\": \"<binary data>\"\n}\n```\n\n## Data.gzipped(level: Gzip.CompressionLevel)\n\n### Description\nCompresses a `Data` object into gzip format with a specified compression level.\n\n### Method\n`Data.gzipped(level: Gzip.CompressionLevel)`\n\n### Endpoint\nN/A (Extension method on Data type)\n\n### Parameters\n- **level** (Gzip.CompressionLevel) - Required - The compression level to use (e.g., `.bestSpeed`, `.bestCompression`, `.defaultCompression`).\n\n### Request Example\n```swift\nimport Gzip\nimport Foundation\n\nlet textData = Data(String(repeating: \"Lorem ipsum\", count: 10).utf8)\nlet optimizedData = try textData.gzipped(level: .bestCompression)\n```\n\n### Response\n#### Success Response (200)\n- **optimizedData** (Data) - The gzipped representation of the original data at the specified compression level.\n\n#### Response Example\n```json\n{\n  \"optimizedData\": \"<binary data>\"\n}\n```\n```\n\n## Gzip Decompression\n\n```APIDOC\n## Data.isGzipped\n\n### Description\nChecks if a `Data` object is likely in gzip format.\n\n### Method\n`Data.isGzipped`\n\n### Endpoint\nN/A (Extension property on Data type)\n\n### Parameters\nNone\n\n### Request Example\n```swift\nimport Gzip\nimport Foundation\n\nlet compressedData: Data\n// ... assume compressedData is populated\n\nif compressedData.isGzipped {\n    print(\"Data is gzipped.\")\n}\n```\n\n### Response\n#### Success Response (200)\n- **isGzipped** (Bool) - `true` if the data appears to be gzipped, `false` otherwise.\n\n#### Response Example\n```json\n{\n  \"isGzipped\": true\n}\n```\n\n## Data.gunzipped()\n\n### Description\nDecompresses a gzip-compressed `Data` object back to its original form.\n\n### Method\n`Data.gunzipped()`\n\n### Endpoint\nN/A (Extension method on Data type)\n\n### Parameters\nNone\n\n### Request Example\n```swift\nimport Gzip\nimport Foundation\n\nlet originalText = \"Hello\"\nlet originalData = Data(originalText.utf8)\nlet compressedData = try originalData.gzipped()\n\nif compressedData.isGzipped {\n    let decompressedData = try compressedData.gunzipped()\n    let decompressedText = String(data: decompressedData, encoding: .utf8)\n    print(decompressedText)\n}\n```\n\n### Response\n#### Success Response (200)\n- **decompressedData** (Data) - The decompressed original data.\n\n#### Response Example\n```json\n{\n  \"decompressedData\": \"<binary data>\"\n}\n```\n```\n\n## Gzip Data Compression and Decompression in Swift\n\n```swift\nimport Gzip\n\n// gzip\nlet compressedData: Data = try! data.gzipped()\nlet optimizedData: Data = try! data.gzipped(level: .bestCompression)\n\n// gunzip\nlet decompressedData: Data\nif data.isGzipped {\n    decompressedData = try! data.gunzipped()\n} else {\n    decompressedData = data\n}\n```\n\n## Basic Gzip Compression in Swift with GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\n// Basic compression with default settings\nlet originalData = Data(\"Hello, World! This is a test string for compression.\".utf8)\nlet compressedData = try originalData.gzipped()\n\nprint(\"Original size: \\(originalData.count) bytes\")\nprint(\"Compressed size: \\(compressedData.count) bytes\")\nprint(\"Is gzipped: \\(compressedData.isGzipped)\")  // true\n\n// Compression with best compression level\nlet textData = Data(String(repeating: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. \", count: 100).utf8)\nlet optimizedData = try textData.gzipped(level: .bestCompression)\n\n// Compression with best speed\nlet fastCompressedData = try textData.gzipped(level: .bestSpeed)\n\nprint(\"Best compression: \\(optimizedData.count) bytes\")\nprint(\"Best speed: \\(fastCompressedData.count) bytes\")\n```\n\n## Gzip Decompression in Swift with GzipSwift\n\n```swift\nimport Gzip\nimport Foundation\n\nlet originalText = \"The quick brown fox jumps over the lazy dog\"\nlet originalData = Data(originalText.utf8)\n\n// Compress the data\nlet compressedData = try originalData.gzipped()\n\n// Check if data is gzipped before decompressing\nif compressedData.isGzipped {\n    let decompressedData = try compressedData.gunzipped()\n    let decompressedText = String(data: decompressedData, encoding: .utf8)\n    print(\"Decompressed: \\(decompressedText ?? \"nil\")\")  // \"The quick brown fox jumps over the lazy dog\"\n}\n\n// Safe decompression pattern\nlet unknownData = Data([0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00])\nlet safeData:\nif unknownData.isGzipped {\n    safeData = try unknownData.gunzipped()\n} else {\n    safeData = unknownData\n}\n```",
    "library": "gzip",
    "topic": "overview",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:30:48.799200"
}