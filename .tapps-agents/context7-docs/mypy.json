{
  "library": "mypy",
  "topic": null,
  "documentation": {
    "content": "## Package Structure with Stub Files and py.typed\n\n```text\nsetup.py\npackage_b/\n    __init__.py\n    lib.py\n    lib.pyi\n    py.typed\n\n```\n\n## Package Structure with Stub Files and py.typed\n\n```python\nfrom setuptools import setup\n\nsetup(\n    name=\"SuperPackageB\",\n    author=\"Me\",\n    version=\"0.1\",\n    package_data={\"package_b\": [\"py.typed\", \"lib.pyi\"]},\n    packages=[\"package_b\"]\n)\n\n```\n\n## Enabling Experimental Features\n\n```APIDOC\n## --enable-incomplete-feature\n\n### Description\nEnables incomplete/experimental features for early preview. Features may require multiple releases to stabilize, and their eventual default enablement is not guaranteed.\n\n### Method\nN/A (Command-line flag)\n\n### Endpoint\nN/A\n\n### Parameters\n#### Path Parameters\nN/A\n\n#### Query Parameters\nN/A\n\n#### Request Body\nN/A\n\n### Request Example\n```bash\n--enable-incomplete-feature PreciseTupleTypes,InlineTypedDict,TypeForm\n```\n\n### Response\n#### Success Response (N/A)\nN/A\n\n#### Response Example\nN/A\n```\n\n## Python Package Structure with Stub Files and py.typed\n\n```directory\nsetup.py\npackage_b/\n    __init__.py\n    lib.py\n    lib.pyi\n    py.typed\n```\n\n## setup.py for PEP 561 Package with Inline Types\n\n```python\nfrom setuptools import setup\n\nsetup(\n    name=\"SuperPackageA\",\n    author=\"Me\",\n    version=\"0.1\",\n    package_data={\"package_a\": [\"py.typed\"]},\n    packages=[\"package_a\"]\n)\n```\n\n## Package Structure with py.typed\n\n```text\nsetup.py\npackage_a/\n    __init__.py\n    lib.py\n    py.typed\n\n```\n\n## Package Structure with py.typed\n\n```python\nfrom setuptools import setup\n\nsetup(\n    name=\"SuperPackageA\",\n    author=\"Me\",\n    version=\"0.1\",\n    package_data={\"package_a\": [\"py.typed\"]},\n    packages=[\"package_a\"]\n)\n\n```\n\n## Find Occurrences\n\n```APIDOC\n## --find-occurrences\n\n### Description\nPrints all usages of a class member based on static type information. This feature is experimental.\n\n### Method\nN/A (Command-line flag)\n\n### Endpoint\nN/A\n\n### Parameters\n#### Path Parameters\n- **CLASS.MEMBER** (string) - Required - The class member to find occurrences for (e.g., `MyClass.my_method`).\n\n#### Query Parameters\nN/A\n\n#### Request Body\nN/A\n\n### Request Example\n```bash\n--find-occurrences MyClass.my_method\n```\n\n### Response\n#### Success Response (N/A)\nN/A\n\n#### Response Example\nN/A\n```\n\n## Stub-Only Package Structure\n\n```text\nsetup.py\npackage_c-stubs/\n    __init__.pyi\n    lib.pyi\n\n```\n\n## Stub-Only Package Structure\n\n```python\nfrom setuptools import setup\n\nsetup(\n    name=\"SuperPackageC\",\n    author=\"Me\",\n    version=\"0.1\",\n    package_data={\"package_c-stubs\": [\"__init__.pyi\", \"lib.pyi\"]},\n    packages=[\"package_c-stubs\"]\n)\n\n```\n\n## Mypy Exclude Configuration (INI and TOML)\n\n```ini\n[mypy]\nexclude = (?x)(\n    ^one\\.py$    # files named \"one.py\"\n    | two\\.pyi$  # or files ending with \"two.pyi\"\n    | ^three\\.   # or files starting with \"three.\"\n  )\n\n```\n\n## Mypy Exclude Configuration (INI and TOML)\n\n```toml\n[tool.mypy]\nexclude = [\n    \"^one\\\\.py$\",  # TOML's double-quoted strings require escaping backslashes\n    'two\\.pyi$',  # but TOML's single-quoted strings do not\n    '^three\\.',\n]\n\n```\n\n## Mypy Exclude Configuration (INI and TOML)\n\n```toml\n[tool.mypy]\nexclude = '''(?x)(\n    ^one\\.py$    # files named \"one.py\"\n    | two\\.pyi$  # or files ending with \"two.pyi\"\n    | ^three\\.   # or files starting with \"three.\"\n)'''  # TOML's single-quoted strings do not require escaping backslashes\n\n```\n\n## Propagating Type Narrowing to Nested Functions\n\n```python\ndef outer(x: str | None = None) -> None:\n    if x is None:\n        x = calculate_default()\n    reveal_type(x)  # \"str\" (narrowed)\n\n    def nested() -> None:\n        reveal_type(x)  # Now \"str\" (used to be \"str | None\")\n\n    nested()\n```\n\n## Python Code Snippet for Union Type Attribute Inspection\n\n```python\nfrom typing import Union\n\nclass A:\n    x: int\n    z: int\nclass B:\n    y: int\n    z: int\nvar: Union[A, B]\nvar\n\n```\n\nContext7 cache for mypy: cached at 2026-01-24T20:14:41.359134+00:00Z; consider refreshing if docs changed.",
    "library": "mypy",
    "topic": "overview",
    "source": "cache"
  },
  "source": "cache",
  "saved_at": "2026-01-24T12:14:41.476369"
}