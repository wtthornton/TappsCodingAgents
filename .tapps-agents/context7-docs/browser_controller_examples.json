{
  "library": "browser_controller",
  "topic": "examples",
  "documentation": {
    "content": "## Restic Stdin Configuration Examples (TOML, YAML, HCL)\n\n```toml\nversion = \"1\"\n\n[stdin]\n  repository = \"local:/backup/restic\"\n  password-file = \"key\"\n\n  [stdin.backup]\n    stdin = true\n    stdin-filename = \"stdin-test\"\n    tag = [ 'stdin' ]\n  \n[mysql]\n  inherit = \"stdin\"\n\n  [mysql.backup]\n    stdin-command = [ 'mysqldump --all-databases --order-by-primary' ]\n    stdin-filename = \"dump.sql\"\n    tag = [ 'mysql' ]\n\n```\n\n## Restic Stdin Configuration Examples (TOML, YAML, HCL)\n\n```yaml\nversion: \"1\"\n\nstdin:\n  repository: \"local:/backup/restic\"\n  password-file: key\n  backup:\n    stdin: true\n    stdin-filename: stdin-test\n    tag:\n      - stdin\n\nmysql:\n  inherit: stdin\n  backup:\n    stdin-command: \"mysqldump --all-databases --order-by-primary\"\n    stdin-filename: \"dump.sql\"\n    tag:\n      - mysql\n\n```\n\n## Restic Stdin Configuration Examples (TOML, YAML, HCL)\n\n```hcl\n# sending stream through stdin\nstdin {\n    repository = \"local:/backup/restic\"\n    password-file = \"key\"\n\n    backup = {\n        stdin = true\n        stdin-filename = \"stdin-test\"\n        tag = [ \"stdin\" ]\n    }\n}\n\nmysql {\n  inherit = \"stdin\"\n\n  backup = {\n    stdin-command = [ \"mysqldump --all-databases --order-by-primary\" ]\n    stdin-filename = \"dump.sql\"\n    tag = [ \"mysql\" ]\n  }\n}\n\n```\n\n## Resticprofile Configuration Examples (TOML, YAML, HCL, JSON)\n\n```toml\nversion = \"1\"\n\n[default]\n  password-file = \"key\"\n  repository = \"/tmp/backup\"\n\n[test1]\n  inherit = \"default\"\n\n  [test1.backup]\n    source = \"./\"\n    schedule = \"*:00,15,30,45\"\n    schedule-permission = \"user\"\n    schedule-lock-wait = \"15m\"\n\n  [test1.check]\n    schedule = \"*-*-1\"\n    schedule-permission = \"user\"\n    schedule-lock-wait = \"15m\"\n\n```\n\n## Resticprofile Configuration Examples (TOML, YAML, HCL, JSON)\n\n```yaml\nversion: \"1\"\n\ndefault:\n  password-file: key\n  repository: /tmp/backup\n\ntest1:\n  inherit: default\n  backup:\n    source: ./ \n    schedule: \"*:00,15,30,45\"\n    schedule-permission: user\n    schedule-lock-wait: 15m\n  check:\n    schedule: \"*-*-1\"\n    schedule-permission: user\n    schedule-lock-wait: 15m\n\n```\n\n## Resticprofile Configuration Examples (TOML, YAML, HCL, JSON)\n\n```hcl\n\"default\" = {\n  \"password-file\" = \"key\"\n  \"repository\" = \"/tmp/backup\"\n}\n\n\"test1\" = {\n  \"inherit\" = \"default\"\n\n  \"backup\" = {\n    \"source\" = \"./\"\n    \"schedule\" = \"*:00,15,30,45\"\n    \"schedule-permission\" = \"user\"\n    \"schedule-lock-wait\" = \"15m\"\n  }\n\n  \"check\" = {\n    \"schedule\" = \"*-*-1\"\n    \"schedule-permission\" = \"user\"\n    \"schedule-lock-wait\" = \"15m\"\n  }\n}\n\n```\n\n## Resticprofile Configuration Examples (TOML, YAML, HCL, JSON)\n\n```json\n{\n  \"version\": \"1\",\n  \"default\": {\n    \"password-file\": \"key\",\n    \"repository\": \"/tmp/backup\"\n  },\n  \"test1\": {\n    \"inherit\": \"default\",\n    \"backup\": {\n      \"source\": \"./\",\n      \"schedule\": \"*:00,15,30,45\",\n      \"schedule-permission\": \"user\",\n      \"schedule-lock-wait\": \"15m\"\n    },\n    \"check\": {\n      \"schedule\": \"*-*-1\",\n      \"schedule-permission\": \"user\",\n      \"schedule-lock-wait\": \"15m\"\n    }\n  }\n}\n\n```\n\n## Example Resticprofile Prometheus Metrics Output\n\n```prometheus\n# HELP restic_build_info restic build information.\n# TYPE restic_build_info gauge\nrestic_build_info{profile=\"prom\",version=\"0.18.0\"} 1\n# HELP resticprofile_backup_added_bytes Total number of bytes added to the repository.\n# TYPE resticprofile_backup_added_bytes gauge\nresticprofile_backup_added_bytes{profile=\"prom\"} 96167\n# HELP resticprofile_backup_dir_changed Number of directories with changes.\n# TYPE resticprofile_backup_dir_changed gauge\nresticprofile_backup_dir_changed{profile=\"prom\"} 8\n# HELP resticprofile_backup_dir_new Number of new directories added to the backup.\n# TYPE resticprofile_backup_dir_new gauge\nresticprofile_backup_dir_new{profile=\"prom\"} 0\n# HELP resticprofile_backup_dir_unmodified Number of directories unmodified since last backup.\n# TYPE resticprofile_backup_dir_unmodified gauge\nresticprofile_backup_dir_unmodified{profile=\"prom\"} 1060\n# HELP resticprofile_backup_duration_seconds The backup duration (in seconds).\n# TYPE resticprofile_backup_duration_seconds gauge\nresticprofile_backup_duration_seconds{profile=\"prom\"} 0.986296416\n# HELP resticprofile_backup_files_changed Number of files with changes.\n# TYPE resticprofile_backup_files_changed gauge\nresticprofile_backup_files_changed{profile=\"prom\"} 2\n# HELP resticprofile_backup_files_new Number of new files added to the backup.\n# TYPE resticprofile_backup_files_new gauge\nresticprofile_backup_files_new{profile=\"prom\"} 0\n# HELP resticprofile_backup_files_processed Total number of files scanned by the backup for changes.\n# TYPE resticprofile_backup_files_processed gauge\nresticprofile_backup_files_processed{profile=\"prom\"} 7723\n# HELP resticprofile_backup_files_unmodified Number of files unmodified since last backup.\n# TYPE resticprofile_backup_files_unmodified gauge\nresticprofile_backup_files_unmodified{profile=\"prom\"} 7721\n# HELP resticprofile_backup_processed_bytes Total number of bytes scanned for changes.\n# TYPE resticprofile_backup_processed_bytes gauge\nresticprofile_backup_processed_bytes{profile=\"prom\"} 2.935621558e+09\n# HELP resticprofile_backup_status Backup status: 0=fail, 1=warning, 2=success.\n# TYPE resticprofile_backup_status gauge\nresticprofile_backup_status{profile=\"prom\"} 2\n# HELP resticprofile_backup_time_seconds Last backup run (unixtime).\n# TYPE resticprofile_backup_time_seconds gauge\nresticprofile_backup_time_seconds{profile=\"prom\"} 1.747673785e+09\n# HELP resticprofile_build_info resticprofile build information.\n# TYPE resticprofile_build_info gauge\nresticprofile_build_info{goversion=\"go1.24.3\",profile=\"prom\",version=\"0.31.0\"} 1\n```\n\n## Restic Profile Configuration for Windows (HCL)\n\n```hcl\nglobal {\n  restic-binary = \"c:\\\\ProgramData\\\\chocolatey\\\\bin\\\\restic.exe\"\n}\n\ndefault {\n  repository = \"local:r:/\"\n  password-file = \"key\"\n  initialize = false\n}\n\ntest {\n  inherit = \"default\"\n  initialize = true\n\n  backup = {\n    tag = [ \"windows\" ]\n    source = [ \"c:\\\\\" ]\n    check-after = true\n    run-before = \"dir /l\"\n    run-after = \"echo All Done!\"\n    no-error-on-warning = true\n  }\n}\n```\n\n## Restic Profile Configuration (HCL)\n\n```hcl\nglobal {\n    priority = \"low\"\n    ionice = true\n    ionice-class = 2\n    ionice-level = 6\n    # don't start if the memory available is < 1000MB\n    min-memory = 1000\n}\n\ngroups {\n    all = [\"src\", \"self\"]\n}\n\ndefault {\n    repository = \"/tmp/backup\"\n    password-file = \"key\"\n    run-before = \"echo Profile started!\"\n    run-after = \"echo Profile finished!\"\n    run-after-fail = \"echo An error occurred!\"\n}\n\n\nsrc {\n    inherit = \"default\"\n    initialize = true\n    lock = \"/tmp/backup/resticprofile-profile-src.lock\"\n    force-inactive-lock = false\n\n    snapshots = {\n        tag = [ \"test\", \"dev\" ]\n    }\n\n    backup = {\n        run-before = [ \"echo Starting!\", \"ls -al ~/go/src\" ]\n        run-after = \"echo All Done!\"\n        exclude = [ \"/**/.git\" ]\n        exclude-caches = true\n        tag = [ \"test\", \"dev\" ]\n        source = [\"~/go/src\"]\n        check-before = true\n    }\n\n    retention = {\n        before-backup = false\n        after-backup = true\n        keep-last = 3\n        compact = false\n        prune = true\n    }\n\n    check = {\n        check-unused = true\n        with-cache = false\n    }\n}\n\nself {\n    inherit = \"default\"\n    initialize = false\n\n    snapshots = {\n        tag = [ \"self\" ]\n    }\n\n    backup = {\n        source = \"./\"\n        tag = [ \"self\" ]\n    }\n}\n```\n\n## Resticprofile Prometheus Configuration Examples\n\n```toml\nversion = \"1\"\n\n[root]\n  prometheus-save-to-file = \"root.prom\"\n  prometheus-push = \"http://localhost:9091/\"\n\n  [root.backup]\n    extended-status = true\n    no-error-on-warning = true\n    source = [ \"/\" ]\n```\n\n## Resticprofile Prometheus Configuration Examples\n\n```yaml\nversion: \"1\"\n\nroot:\n  prometheus-save-to-file: \"root.prom\"\n  prometheus-push: \"http://localhost:9091/\"\n  backup:\n    extended-status: true\n    no-error-on-warning: true\n    source:\n      - /\n```\n\n## Resticprofile Prometheus Configuration Examples\n\n```hcl\n\"root\" = {\n  \"prometheus-save-to-file\" = \"root.prom\"\n  \"prometheus-push\" = \"http://localhost:9091/\"\n\n  \"backup\" = {\n    \"extended-status\" = true\n    \"no-error-on-warning\" = true\n    \"source\" = [\"/\"]\n  }\n}\n```\n\n## Resticprofile Prometheus Configuration Examples\n\n```json\n{\n  \"version\": \"1\",\n  \"root\": {\n    \"prometheus-save-to-file\": \"root.prom\",\n    \"prometheus-push\": \"http://localhost:9091/\",\n    \"backup\": {\n      \"extended-status\": true,\n      \"no-error-on-warning\": true,\n      \"source\": [\n        \"/\"\n      ]\n    }\n  }\n}\n```\n\n## Restic Profile Configuration for Windows (TOML)\n\n```toml\nversion = \"1\"\n\n[global]\n  restic-binary = \"c:\\\\ProgramData\\\\chocolatey\\\\bin\\\\restic.exe\"\n\n# Default profile when not specified on the command line\n# There's no default inheritance from the 'default' profile,\n# but you can use the 'inherit' flag if needed\n[default]\n  repository = \"local:r:/\"\n  password-file = \"key\"\n  initialize = false\n\n# New profile named 'test'\n[test]\n  inherit = \"default\"\n  initialize = true\n\n  # 'backup' command of profile 'test'\n  [test.backup]\n    tag = [ \"windows\" ]\n    source = [ \"c:\\\\\" ]\n    check-after = true\n    run-before = \"dir /l\"\n    run-after = \"echo All Done!\"\n    # ignore restic warnings\n    # without it the backup is considered failed when restic can't read some files\n    no-error-on-warning = true\n```\n\n## Restic Profile Configuration for Windows (YAML)\n\n```yaml\nversion: \"1\"\n\nglobal:\n  restic-binary: c:\\\\ProgramData\\\\chocolatey\\\\bin\\\\restic.exe\n\n# Default profile when not specified on the command line\n# There's no default inheritance from the 'default' profile,\n# but you can use the 'inherit' flag if needed\ndefault:\n  repository: local:r:/\n  password-file: key\n  initialize: false\n\n# New profile named 'test'\ntest:\n  inherit: default\n  initialize: true\n\n  # 'backup' command of profile 'test'\n  backup:\n    tag:\n      - windows\n    source:\n      - c:\\\\\n    check-after: true\n    run-before: dir /l\n    run-after: echo All Done!\n    # ignore restic warnings\n    # without it the backup is considered failed when restic can't read some files\n    no-error-on-warning: true\n```\n\n## resticprofile Help Command Example\n\n```shell\n$ resticprofile help generate\n\nThe \"generate\" command is used to create various resources and print them to stdout\n\nUsage:\n  resticprofile [resticprofile flags] generate [command specific flags]\n\nFlags:\n  --bash-completion                               generate a shell completion script for bash\n  --config-reference [--version 0.15] [template]  generate a config file reference from a go template (defaults to the built-in markdown template when omitted)\n  --json-schema [--version 0.15] [v1|v2]          generate a JSON schema that validates resticprofile configuration files in YAML or JSON format\n  --random-key [size]                             generate a cryptographically secure random key to use as a restic keyfile (size defaults to 1024 when omitted)\n  --zsh-completion                                generate a shell completion script for zsh\n\n```\n\n## Complete Restic Profile Configuration Example\n\n```json\n{{\n  define \"backup_root\" \n    \"exclude\": [\n      \"{{ .Profile.Name }}-backup.log\"\n    ],\n    \"exclude-file\": [\n      \"{{ .ConfigDir }}/root-excludes\",\n      \"{{ .ConfigDir }}/excludes\"\n    ],\n    \"exclude-caches\": true,\n    \"tag\": [\n      \"root\"\n    ],\n    \"source\": [\n      \"/\"\n    ]\n  \n}}\n{\n  \"version\": \"1\",\n  \"global\": {\n    \"priority\": \"low\",\n    \"ionice\": true,\n    \"ionice-class\": 2,\n    \"ionice-level\": 6\n  },\n  \"base\": {\n    \"status-file\": \"{{ .Env.HOME }}/status.json\",\n    \"snapshots\": {\n      \"host\": true\n    },\n    \"retention\": {\n      \"host\": true,\n      \"after-backup\": true,\n      \"keep-within\": \"30d\"\n    }\n  },\n  \"nas\": {\n    \"inherit\": \"base\",\n    \"repository\": \"rest:http://{{ .Env.BACKUP_REST_USER }}:{{ .Env.BACKUP_REST_PASSWORD }}@nas:8000/root\",\n    \"password-file\": \"nas-key\"\n  },\n  \"nas-root\": {\n    \"inherit\": \"nas\",\n    \"backup\": {\n      {{ template \"backup_root\" . }}\n      \"schedule\": \"01:47\",\n      \"schedule-permission\": \"system\",\n      \"schedule-log\": \"{{ .Profile.Name }}-backup.log\"\n    }\n  },\n  \"azure\": {\n    \"inherit\": \"base\",\n    \"repository\": \"azure:restic:/\",\n    \"password-file\": \"azure-key\",\n    \"lock\": \"/tmp/resticprofile-azure.lock\",\n    \"backup\": {\n      \"schedule-permission\": \"system\",\n      \"schedule-log\": \"{{ .Profile.Name }}-backup.log\"\n    }\n  },\n  \"azure-root\": {\n    \"inherit\": \"azure\",\n    \"backup\": {\n      {{ template \"backup_root\" . }}\n      \"schedule\": \"03:58\"\n    }\n  },\n  \"azure-mysql\": {\n    \"inherit\": \"azure\",\n    \"backup\": {\n      \"tag\": [\n        \"mysql\"\n      ],\n      \"run-before\": [\n        \"rm -f /tmp/mysqldumpall.sql\",\n        \"mysqldump -u{{ .Env.MYSQL_BACKUP_USER }} -p{{ .Env.MYSQL_BACKUP_PASSWORD }} --all-databases > /tmp/mysqldumpall.sql\"\n      ],\n      \"source\": \"/tmp/mysqldumpall.sql\",\n      \"run-after\": [\n        \"rm -f /tmp/mysqldumpall.sql\"\n      ],\n      \"schedule\": \"03:18\"\n    }\n  }\n}\n```",
    "library": "project_profile",
    "topic": "examples",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T18:32:01.351428"
}