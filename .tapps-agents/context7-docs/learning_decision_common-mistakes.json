{
  "library": "learning_decision",
  "topic": "common-mistakes",
  "documentation": {
    "content": "## NodeJS Model Training (CommonJS)\n\n```js\n(async function (){\n    // Load the YDF library.\n    const ydf = await require(\"ydf-training\")();\n\n    // Load the model.\n    const fs = require(\"node:fs\");\n    const data = fs.readFileSync(\"data.csv\", 'utf-8');\n    const task = \"CLASSIFICATION\";\n    const label = \"label\";\n    const model = new ydf.GradientBoostedTreesLearner(label, task).train(data);\n\n    // Make predictions.\n    const predictions = model.predict(data);\n    console.log(\"predictions:\", predictions);\n\n    // Describe the model.\n    const description = model.describe();\n    console.log( predictions);\n\n    // Save the model to disk.\n    var fileReader = new FileReader();\n    fileReader.onload = function() {\n      fs.writeFileSync('model.zip', Buffer.from(new Uint8Array(this.result)));\n    };\n    const blob = await model.save();\n    fileReader.readAsArrayBuffer(blob);\n\n    // Release model\n    model.unload();\n}())\n```\n\n## Decision Tree Structure Example\n\n```raw\nx >= 0.220\n    \u251c\u2500(pos)\u2500 y >= 0.780\n    |        \u251c\u2500(pos)\u2500 ...\n    |        \u2514\u2500(neg)\u2500 ...\n    \u2514\u2500(neg)\u2500 y >= 0.207\n                \u251c\u2500(pos)\u2500 ...\n                \u2514\u2500(neg)\u2500 ...\n```\n\n## Troubleshooting Windows Build: Protobuf Version Issue\n\n```shell\n# In bazel-python\\external\\upb\\upbc\\names.c:\n# Replace:\n# const absl::string_view kRepeatedFieldArrayGetterPostfix = ...;\n# with:\n# ABSL_CONST_INIT const absl::string_view kRepeatedFieldArrayGetterPostfix = ...;\n# Do the same for kRepeatedFieldMutableArrayGetterPostfix.\n```\n\n## Prediction Output Example\n\n```text\n<=50K,>50K\n0.978384,0.0216162\n0.641894,0.358106\n0.180569,0.819431\n```\n\n## Beginner Yggdrasil Decision Forests C++ Example\n\n```cc\n// This is a placeholder for the actual C++ code from yggdrasil_decision_forests/examples/beginner.cc\n// It would typically involve including Yggdrasil Decision Forests headers and using its functionalities.\n\n#include <iostream>\n\nint main() {\n    std::cout << \"Hello from Yggdrasil Decision Forests Bazel example!\" << std::endl;\n    // TODO: Add Yggdrasil Decision Forests specific code here\n    return 0;\n}\n\n```\n\n## Example Dataset Structure\n\n```python\n\"attribute_1\": 5.1 # NUMERICAL\n\"attribute_2\": \"CAT\" # CATEGORICAL stored as string\n\"attribute_3\": [1, 2, 3] # CATEGORICAL-SET stored as integer\n```\n\n## Calculate and Find Closest Training Examples\n\n```python\nimport numpy as np\n\n# Assuming train_ds, test_ds, and model are pre-loaded\nselected_example_idx = 0\nselected_example = test_ds[selected_example_idx:(selected_example_idx+1)]\n\ndistances = model.distance(train_ds, selected_example).squeeze()\nclose_train_idxs = np.argsort(distances)[:5]\n\nprint(\"Distances to training examples:\", distances)\nprint(\"Indices of closest training examples:\", close_train_idxs)\nprint(\"Closest training examples:\")\nprint(train_ds.iloc[close_train_idxs])\n```\n\n## Load Dataset\n\n```python\nds_path = \"https://raw.githubusercontent.com/google/yggdrasil-decision-forests/main/yggdrasil_decision_forests/test_data/dataset\"\ntrain_ds = pd.read_csv(f\"{ds_path}/adult_train.csv\")\ntest_ds = pd.read_csv(f\"{ds_path}/adult_test.csv\")\n```\n\n## Print First Training Examples\n\n```python\nfor example_idx, example in enumerate(islice(ag_news_dataset(\"train\"), 3)):\n  print(f\"==========\\nExample #{example_idx}\\n----------\")\n  print(example)\n```\n\n## Select and Predict Example\n\n```python\n# Assuming test_ds is a pre-loaded dataset and model is a trained model\nselected_example_idx = 0\nselected_example = test_ds[selected_example_idx:(selected_example_idx+1)]\nprediction = model.predict(selected_example)\n\nprint(f\"Prediction for selected example: {prediction}\")\n```\n",
    "library": "learning_decision",
    "topic": "common-mistakes",
    "source": "api"
  },
  "source": "api",
  "saved_at": "2026-01-30T18:26:07.308538"
}