{
  "library": "aiohttp",
  "topic": "architecture",
  "documentation": {
    "content": "## Response Classes Overview\n\n```APIDOC\n## Response Classes\n\nFor now, :mod:`aiohttp.web` has three classes for the *HTTP response*:\n:class:`StreamResponse`, :class:`Response` and :class:`FileResponse`.\n\nUsually you need to use the second one. :class:`StreamResponse` is\nintended for streaming data, while :class:`Response` contains *HTTP\nBODY* as an attribute and sends own content as single piece with the\ncorrect *Content-Length HTTP header*.\n\nFor sake of design decisions :class:`Response` is derived from\n:class:`StreamResponse` parent class.\n\nThe response supports *keep-alive* handling out-of-the-box if\n*request* supports it.\n\nYou can disable *keep-alive* by :meth:`~StreamResponse.force_close` though.\n\nThe common case for sending an answer from\n:ref:`web-handler<aiohttp-web-handler>` is returning a\n:class:`Response` instance::\n\n   async def handler(request):\n       return Response(text=\"All right!\")\n\nResponse classes are :obj:`dict` like objects,\nallowing them to be used for :ref:`sharing\ndata<aiohttp-web-data-sharing>` among :ref:`aiohttp-web-middlewares`\nand :ref:`aiohttp-web-signals` handlers::\n\n   resp['key'] = value\n\n.. versionadded:: 3.0\n\n   Dict-like interface support.\n```\n\n## Client Exceptions\n\n```APIDOC\n## Client Exceptions\n\n### Description\naiohttp defines client-specific exceptions to handle connection and server response issues. For developer errors, standard Python exceptions like `ValueError` are used. `ClientPayloadError` specifically addresses issues with response payload encoding.\n\n### Exception Hierarchy\n- **aiohttp.ClientError**\n  - Base class for all client-specific exceptions.\n  - Derived from `Exception`.\n- **aiohttp.ClientPayloadError**\n  - Raised when errors occur during payload decoding (e.g., invalid compression, malformed chunks, content length issues).\n\n### Usage\nExceptions are accessed directly from the `aiohttp` module.\n\n### Example Usage (Conceptual)\n```python\nimport aiohttp\n\ntry:\n    # Code that might raise a ClientPayloadError\n    async with aiohttp.ClientSession() as session:\n        async with session.get('http://example.com/compressed_data') as response:\n            data = await response.text() # Might raise ClientPayloadError if data is corrupted\nexcept aiohttp.ClientPayloadError as e:\n    print(f\"Payload error occurred: {e}\")\nexcept aiohttp.ClientError as e:\n    print(f\"A general client error occurred: {e}\")\nexcept Exception as e:\n    print(f\"An unexpected error occurred: {e}\")\n```\n\n### Response\nN/A (Exception handling information)\n\n#### Success Response (N/A)\nNone\n\n#### Response Example\nNone\n```\n\n## Client Tracing API Reference\n\n```APIDOC\n## Client Request Life Cycle Tracing\n\nThis section outlines the stages a client request goes through and the associated tracing events.\n\n### Stages and Events\n\n- **start**: Corresponds to the `on_request_start` event.\n- **redirect**: Corresponds to the `on_request_redirect` event.\n- **acquire_connection**: Represents the connection acquiring phase.\n- **headers_received**: Represents the headers received phase.\n- **exception**: Triggered when an exception occurs during the request.\n- **end**: Corresponds to the `on_request_end` event.\n- **headers_sent**: Corresponds to the `on_request_headers_sent` event.\n- **chunk_sent**: Corresponds to the `on_request_chunk_sent` event.\n- **chunk_received**: Corresponds to the `on_response_chunk_received` event.\n\n### Connection Acquiring Stages\n\n- **begin**: Start of the connection acquiring process.\n- **end**: End of the connection acquiring process.\n- **queued_start**: Corresponds to the `on_connection_queued_start` event.\n- **create_start**: Corresponds to the `on_connection_create_start` event.\n- **reuseconn**: Corresponds to the `on_connection_reuseconn` event.\n- **queued_end**: Corresponds to the `on_connection_queued_end` event.\n- **create_end**: Corresponds to the `on_connection_create_end` event.\n- **exception**: Exception raised during connection acquiring.\n- **resolve_dns**: Represents the DNS resolving stage.\n- **sock_connect**: Represents the socket connection establishment.\n\n### DNS Resolving Stages\n\n- **begin**: Start of the DNS resolving process.\n- **end**: End of the DNS resolving process.\n- **exception**: Exception raised during DNS resolving.\n- **resolve_end**: Corresponds to the `on_dns_resolvehost_end` event.\n- **resolve_start**: Corresponds to the `on_dns_resolvehost_start` event.\n- **cache_hit**: Corresponds to the `on_dns_cache_hit` event.\n- **cache_miss**: Corresponds to the `on_dns_cache_miss` event.\n```\n\n## FileField Information\n\n```APIDOC\n## FileField Information\n\n### Description\nA :mod:`dataclass <dataclasses>` instance that is returned as multidict value by :meth:`aiohttp.web.BaseRequest.post` if field is uploaded file.\n\n### Class\n`FileField`\n\n### Attributes\n- `name` (str) - Field name.\n- `filename` (str) - File name as specified by uploading (client) side.\n- `file` (io.IOBase) - An :class:`io.IOBase` instance with content of uploaded file.\n- `content_type` (str) - MIME type of uploaded file, ``'text/plain'`` by default.\n\n### See Also\n- :ref:`aiohttp-web-file-upload`\n\n### Request Example\nThis is a data structure returned by a request, not used in requests themselves.\n\n### Response Example\n```json\n{\n  \"name\": \"file_upload\",\n  \"filename\": \"document.pdf\",\n  \"file\": \"<file_stream_object>\",\n  \"content_type\": \"application/pdf\"\n}\n```\n```\n\n## ResolveResult\n\n```APIDOC\n## ResolveResult\n\n### Description\nRepresents the result of a hostname resolution operation.\n\n### Attributes\n\n- **hostname** (str) - The original hostname that was provided for resolution.\n- **host** (str) - The resolved IP address.\n- **port** (int) - The resolved port number.\n- **family** (int) - The address family of the resolved address.\n- **proto** (int) - The protocol associated with the resolved address.\n- **flags** (int) - Flags related to the resolution process.\n```\n\n## Server Class\n\n```APIDOC\n## Server\n\nA protocol factory compatible with :meth:`~asyncio.AbstractEventLoop.create_server`.\n\nThe class is responsible for creating HTTP protocol objects that can handle HTTP connections.\n\n.. attribute:: connections\n\n   List of all currently opened connections.\n\n.. attribute:: requests_count\n\n   Amount of processed requests.\n\n.. method:: Server.shutdown(timeout)\n   :async:\n\n   A :ref:`coroutine<coroutine>` that should be called to close all opened connections.\n```\n\n## aiohttp.abc.AbstractView\n\n```APIDOC\n## Class Based View Example\n\n### Description\nIllustrative example of using an AbstractView. The actual methods like `__iter__` or `__await__` need to be implemented.\n\n### Method\n(Depends on implementation, e.g., GET, POST)\n\n### Endpoint\n(Depends on routing)\n\n### Parameters\n#### Request Body (if applicable)\n- **field_name** (type) - Required/Optional - Description of the field.\n\n### Request Example\n(Example depends on the specific view implementation)\n\n### Response\n#### Success Response (200)\n- **content** (str) - The response content.\n\n#### Response Example\n{\n  \"content\": \"Response from class-based view\"\n}\n```\n\n## Application Class\n\n```APIDOC\n## Application Class\n\n### Application\n\n**Description**: Represents the aiohttp web server application. It acts as a container for shared data and configuration, and manages the routing and request handling.\n\n**Class**: `aiohttp.web.Application`\n\n**Parameters**:\n\n#### Path Parameters\nNone\n\n#### Query Parameters\nNone\n\n#### Request Body\nNone\n\n**Attributes**:\n- **logger** (default logger) - Logger for the application.\n- **middlewares** (tuple) - A tuple of middlewares to apply to the application.\n- **handler_args** (dict) - Arguments to be passed to request handlers.\n- **client_max_size** (int) - Maximum size of the client request body in bytes (default: 1MB).\n- **debug** (bool) - Enables or disables debug mode.\n\n**Usage Example**:\n```python\nfrom aiohttp import web\n\nasync def handler(request):\n    return web.Response(text=\"Hello, world!\")\n\napp = web.Application()\napp.router.add_get('/', handler)\n\n# To run the app:\n# web.run_app(app)\n```\n\n**Data Sharing Example**:\n```python\nfrom aiohttp import web\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncEngine\n\n# Assuming AppKey is defined elsewhere for safe app key access\n# from your_module import AppKey\n\nasync def create_app():\n    app = web.Application()\n    # Example: using a placeholder for AppKey\n    class AppKey: \n        def __init__(self, name, type):\n            self.name = name\n            self.type = type\n        def __hash__(self):\n            return hash(self.name)\n        def __eq__(self, other):\n            return isinstance(other, AppKey) and self.name == other.name\n\n    database = AppKey(\"database\", AsyncEngine)\n    app[database] = await create_async_engine('sqlite+aiosqlite:///mydatabase.db')\n\n    async def handler(request):\n        async with request.app[database].begin() as conn:\n            # Use the database connection\n            pass\n        return web.Response(text=\"Database access example\")\n\n    app.router.add_get('/db_access', handler)\n    return app\n\n# To run the app:\n# async def main():\n#    app = await create_app()\n#    web.run_app(app)\n# import asyncio\n# asyncio.run(main())\n```\n```\n\n## AbstractResolver\n\n```APIDOC\n## AbstractResolver\n\n### Description\nAn abstract base class for resolver implementations, responsible for resolving hostnames to IP addresses.\n\n### Methods\n\n#### `resolve(host, port, family)`\n\n- **Description**: Resolves a host name to an IP address.\n- **Parameters**:\n  - **host** (str) - Required - The hostname to resolve.\n  - **port** (int) - Required - The port number.\n  - **family** (int) - Required - The socket family (e.g., `socket.AF_INET`).\n- **Returns**: A list of `aiohttp.abc.ResolveResult` instances.\n\n#### `close()`\n\n- **Description**: Releases resources held by the resolver.\n```\n\n## ContentDisposition Class\n\n```APIDOC\n## ContentDisposition Class\n\n### Description\nA data class to represent the Content-Disposition header, available as `:attr:`ClientResponse.content_disposition` attribute.\n\n### Attributes\n- **type** (str) - Value of Content-Disposition header itself, e.g. ``attachment`.\n- **filename** (str | None) - Content filename extracted from parameters. May be ``None`.\n- **parameters** (dict) - Read-only mapping contains all parameters.\n```",
    "library": "aiohttp",
    "topic": "overview",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-29T22:13:27.156112"
}