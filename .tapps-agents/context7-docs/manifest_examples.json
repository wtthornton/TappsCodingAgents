{
  "library": "manifest",
  "topic": "examples",
  "documentation": {
    "content": "## Validate Embedded Manifest with mt.exe\n\n```shell\nmt /inputresource:..\\target\\debug\\test.exe /out:con /validate_manifest\n```\n\n## Validate Embedded Manifest with mt.exe\n\n```shell\nmt /inputresource:..\\target\\x86_64-pc-windows-gnu\\debug\\test.exe /out:con /validate_manifest\n```\n\n## Dry Run of Cargo Publish\n\n```bash\ncargo publish --dry-run\n```\n\n## List Package Contents for Release\n\n```bash\ncargo package --list\n```\n\n## Cross-Compile for Different Target (Rustup & Cargo)\n\n```shell\nrustup target add x86_64-pc-windows-gnu\ncargo build -v --target x86_64-pc-windows-gnu\n```\n\n## Remove Default Dependency from Manifest\n\n```rust\n// build.rs\nuse embed_manifest::{embed_manifest, new_manifest};\n\nfn main() {\n    if std::env::var_os(\"CARGO_CFG_WINDOWS\").is_some() {\n        let manifest = new_manifest(\"Contoso.NoDepsApp\")\n            .remove_dependency(\"Microsoft.Windows.Common-Controls\");\n\n        embed_manifest(manifest).expect(\"unable to embed manifest\");\n    }\n    println!(\"cargo:rerun-if-changed=build.rs\");\n}\n```\n\n## ManifestBuilder::active_code_page - Configure string encoding\n\n```APIDOC\n## ManifestBuilder::active_code_page - Configure string encoding\n\n### Description\nSets the code page used for single-byte Windows APIs. UTF-8 makes Rust strings work directly with APIs like `MessageBoxA`.\n\n### Method\nBuilder Method\n\n### Endpoint\nN/A (Rust build script function)\n\n### Parameters\n#### Path Parameters\nNone\n\n#### Query Parameters\nNone\n\n#### Request Body\n- **code_page** (ActiveCodePage) - Required - The desired code page. Can be `ActiveCodePage::Utf8` or `ActiveCodePage::Legacy`.\n\n### Request Example\n```rust\n// build.rs\nuse embed_manifest::{embed_manifest, new_manifest};\nuse embed_manifest::manifest::ActiveCodePage;\n\nfn main() {\n    if std::env::var_os(\"CARGO_CFG_WINDOWS\").is_some() {\n        // Use UTF-8 for single-byte APIs (default, Windows 10 1903+)\n        let manifest_utf8 = new_manifest(\"Contoso.Utf8App\")\n            .active_code_page(ActiveCodePage::Utf8);\n\n        // Or use legacy system code page\n        let manifest_legacy = new_manifest(\"Contoso.LegacyApp\")\n            .active_code_page(ActiveCodePage::Legacy);\n\n        embed_manifest(manifest_utf8).expect(\"unable to embed manifest\");\n    }\n    println!(\"cargo:rerun-if-changed=build.rs\");\n}\n```\n\n### Response\n#### Success Response\n- **ManifestBuilder** - The builder instance with the active code page set.\n\n#### Response Example\nN/A\n```\n\n## Compile with Specific Toolchain (Cargo)\n\n```shell\ncargo +stable-gnu build -v\n```\n\n## Compile with Specific Toolchain (Cargo)\n\n```shell\nrustup default stable-gnu\n```\n\n## Publish New Version to Crates.io\n\n```bash\ncargo publish\n```\n\n## Configure String Encoding (Active Code Page) in Rust build.rs\n\n```rust\nuse embed_manifest::{embed_manifest, new_manifest};\nuse embed_manifest::manifest::ActiveCodePage;\n\nfn main() {\n    if std::env::var_os(\"CARGO_CFG_WINDOWS\").is_some() {\n        // Use UTF-8 for single-byte APIs (default, Windows 10 1903+)\n        let manifest_utf8 = new_manifest(\"Contoso.Utf8App\")\n            .active_code_page(ActiveCodePage::Utf8);\n\n        // Or use legacy system code page\n        let manifest_legacy = new_manifest(\"Contoso.LegacyApp\")\n            .active_code_page(ActiveCodePage::Legacy);\n\n        embed_manifest(manifest_utf8).expect(\"unable to embed manifest\");\n    }\n    println!(\"cargo:rerun-if-changed=build.rs\");\n}\n```\n\n## Create Default Manifest Builder in Rust build.rs\n\n```rust\nuse embed_manifest::{embed_manifest, new_manifest};\n\nfn main() {\n    if std::env::var_os(\"CARGO_CFG_WINDOWS\").is_some() {\n        let manifest = new_manifest(\"MyCompany.MyApp\");\n        embed_manifest(manifest).expect(\"unable to embed manifest\");\n    }\n    println!(\"cargo:rerun-if-changed=build.rs\");\n}\n```",
    "library": "manifest",
    "topic": "common-mistakes",
    "source": "fuzzy_match"
  },
  "source": "fuzzy_match",
  "saved_at": "2026-01-30T16:10:16.118815"
}