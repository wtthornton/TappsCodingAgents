{
  "library": "capability_registry",
  "topic": "usage",
  "documentation": {
    "content": "## Creating a New Run with Repeat Key\n\n```APIDOC\n## POST /runs\n\n### Description\nCreates a new run. If a `repeatKey` is provided and the `intent` matches the last successful run with that key, the new run will be a repeat run, utilizing only the tools successfully used in the prior run.\n\n### Method\nPOST\n\n### Endpoint\n/runs\n\n### Parameters\n#### Request Body\n- **intent** (string) - Required - The user's intent for the run.\n- **context** (object) - Optional - The context for the run.\n- **selected_integrations** (array) - Optional - A list of selected integrations.\n- **repeatKey** (string) - Optional - A custom value to identify repeat runs. Recommended to be meaningful and reflect the intent (e.g., `get_next_calendar_events`).\n\n### Request Example\n```json\n{\n  \"intent\": \"get_next_calendar_events\",\n  \"context\": {\n    \"date\": \"2023-10-27\"\n  },\n  \"selected_integrations\": [\"google_calendar\"],\n  \"repeatKey\": \"get_next_calendar_events_20231027\"\n}\n```\n\n### Response\n#### Success Response (200)\n- **run_id** (string) - The unique identifier for the created run.\n- **status** (string) - The status of the run (e.g., \"pending\", \"in_progress\", \"completed\").\n- **used_tools** (array) - A list of tools used in the run (will be limited in repeat runs).\n\n#### Response Example\n```json\n{\n  \"run_id\": \"run_abc123\",\n  \"status\": \"pending\",\n  \"used_tools\": [\"calendar_tool\"]\n}\n```\n```\n\n## Approve Tool Registry AI Agent Plan with Token\n\n```http\nGET /v1/runs/approval?token=...\n```\n\n## FeedbackSourceMetadataDto Object\n\n```APIDOC\n## FeedbackSourceMetadataDto Object\n\n### Description\nMetadata object for feedback sources, including device, platform, and session information.\n\n### Properties\n- **device** (string) - The device used.\n- **platform** (string) - The platform used.\n- **version** (string) - The version of the platform or application.\n- **sessionId** (string) - The session identifier.\n- **userAgent** (string) - The user agent string.\n```\n\n## Resume Run with Approval Token\n\n```APIDOC\n## GET /v1/runs/approval\n\n### Description\nApproves or denies a paused run. This endpoint uses a one-time token provided in the query parameter. Approving a run will return it to the RUNNING state. Denying a run typically results in a CANCELED state.\n\n### Method\nGET\n\n### Endpoint\n/v1/runs/approval\n\n### Parameters\n#### Query Parameters\n- **token** (string) - Required - A one-time token used to approve or deny the run.\n- **action** (string) - Optional - The action to take, either 'approve' or 'deny'. Defaults to 'approve' if not provided.\n\n### Response\n#### Success Response (200)\n- **status** (string) - Indicates the outcome of the approval action (e.g., 'approved', 'denied').\n\n#### Error Response (400)\n- **message** (string) - Invalid token or action provided.\n```\n\n## Define FeedbackMetadataDto in OpenAPI\n\n```json\n{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"toolregistry.ai API\",\n    \"version\": \"1.0\"\n  },\n  \"components\": {\n    \"schemas\": {\n      \"FeedbackMetadataDto\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"version\": {\n            \"type\": \"string\"\n          },\n          \"sessionId\": {\n            \"type\": \"string\"\n          },\n          \"experimentId\": {\n            \"type\": \"string\"\n          },\n          \"environment\": {\n            \"type\": \"string\"\n          },\n          \"clientVersion\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n## GET /v1/runs/approval\n\n```APIDOC\n## GET /v1/runs/approval\n\n### Description\nUse the one-time token link provided in the server-sent stream to give approvals. This endpoint allows you to obtain the necessary token to approve the AI agent's plan or individual tool calls based on the selected approval strategy.\n\n### Method\nGET\n\n### Endpoint\n/v1/runs/approval\n\n### Parameters\n#### Query Parameters\n- **token** (string) - Required - The one-time token for granting approval.\n\n### Request Example\n```http\nGET /v1/runs/approval?token=YOUR_UNIQUE_TOKEN\n```\n\n### Response\n#### Success Response (200)\nThis endpoint typically returns a success status or redirects to the next step in the approval process. The actual response content may vary based on the integration.\n\n#### Response Example\n(No specific JSON response body is defined for this example, as it often involves redirects or status confirmations.)\n```\n\n## Select All Active Integrations\n\n```javascript\nselectedCustomerIntegrationIds = [\"*\"]\n```\n\n## GET /v1/runs/approval\n\n```APIDOC\n## GET /v1/runs/approval\n\n### Description\nApprove or deny a run or its individual steps.\n\n### Method\nGET\n\n### Endpoint\n/v1/runs/approval\n\n### Parameters\n#### Query Parameters\n- **token** (string) - Required - The token to approve or deny the run/steps\n\n#### Request Body\nNone\n\n### Request Example\n```\nGET /v1/runs/approval?token=your_approval_token_here\n```\n\n### Response\n#### Success Response (201)\n- The response schema is currently unspecified in the provided OpenAPI definition.\n\n#### Response Example\n```json\n{\n  \"message\": \"Approval processed successfully.\"\n}\n```\n\n#### Error Responses\n- **400** - Invalid request body or parameters\n- **401** - Unauthorized - invalid API key\n```\n\n## POST /v1/actions/run\n\n```APIDOC\n## POST /v1/actions/run\n\n### Description\nRuns an action for the specified action key, customer integration ID and user ID. Returns the run ID and output of the action.\n\n### Method\nPOST\n\n### Endpoint\n/v1/actions/run\n\n### Parameters\n#### Request Body\n- **key** (string) - Required - The key of the action to run\n- **customerIntegrationId** (string) - Required - The customer integration ID to use for the action\n- **userId** (string) - Required - The ID of the user who is running the action\n- **input** (object) - Optional - Input parameters for the action. Required if the action has an input schema defined.\n\n### Request Example\n```json\n{\n  \"key\": \"action_key_example\",\n  \"customerIntegrationId\": \"customer_integration_id_example\",\n  \"userId\": \"user_id_example\",\n  \"input\": {\n    \"parameter1\": \"value1\"\n  }\n}\n```\n\n### Response\n#### Success Response (200)\n- **runId** (string) - The ID of the run that was created (UUID format)\n- **output** (object) - The output of the action\n\n#### Response Example\n```json\n{\n  \"runId\": \"a1b2c3d4-e5f6-7890-1234-567890abcdef\",\n  \"output\": {\n    \"result\": \"Action completed successfully.\"\n  }\n}\n```\n\n#### Error Response (401)\n- **description**: Unauthorized - invalid API key\n```\n\n## Define FeedbackSourceDto in OpenAPI\n\n```json\n{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"toolregistry.ai API\",\n    \"version\": \"1.0\"\n  },\n  \"components\": {\n    \"schemas\": {\n      \"FeedbackSourceDto\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"user\",\n              \"evaluator\",\n              \"api\"\n            ]\n          },\n          \"userId\": {\n            \"type\": \"string\"\n          },\n          \"metadata\": {\n            \"$ref\": \"#/components/schemas/FeedbackSourceMetadataDto\"\n          }\n        }\n      },\n      \"FeedbackSourceMetadataDto\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"device\": {\n            \"type\": \"string\"\n          },\n          \"platform\": {\n            \"type\": \"string\"\n          },\n          \"version\": {\n            \"type\": \"string\"\n          },\n          \"sessionId\": {\n            \"type\": \"string\"\n          },\n          \"userAgent\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n",
    "library": "capability_registry",
    "topic": "usage",
    "source": "api"
  },
  "source": "api",
  "saved_at": "2026-01-30T18:25:59.160015"
}